!function(e){function t(t){for(var r,s,a=t[0],u=t[1],c=t[2],f=0,h=[];f<a.length;f++)s=a[f],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);h.length;)h.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==i[u]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={1:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=u;o.push([240,0]),n()}([,function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return u}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function a(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r,i,o=e.exports=n(101),s=n(233);o.codegen=n(341),o.fetch=n(342),o.path=n(343),o.fs=o.inquire("fs"),o.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),r=0;r<t.length;)n[r]=e[t[r++]];return n}return[]},o.toObject=function(e){for(var t={},n=0;n<e.length;){var r=e[n++],i=e[n++];void 0!==i&&(t[r]=i)}return t};var a=/\\/g,u=/"/g;o.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},o.safeProp=function(e){return!/^[$\w_]+$/.test(e)||o.isReserved(e)?'["'+e.replace(a,"\\\\").replace(u,'\\"')+'"]':"."+e},o.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var c=/_([a-z])/g;o.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(c,(function(e,t){return t.toUpperCase()}))},o.compareFieldsById=function(e,t){return e.id-t.id},o.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(o.decorateRoot.remove(e.$type),e.$type.name=t,o.decorateRoot.add(e.$type)),e.$type;r||(r=n(195));var i=new r(t||e.name);return o.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var l=0;o.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=n(88));var t=new i("Enum"+l++,e);return o.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},o.setProperty=function(e,t,n){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,n,r){var i=n.shift();if(n.length>0)t[i]=e(t[i]||{},n,r);else{var o=t[i];o&&(r=[].concat(o).concat(r)),t[i]=r}return t}(e,t=t.split("."),n)},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(n(200)))}})},,,,,,,,,,,function(e,t,n){e.exports={EPSILON:n(206),create:n(207),clone:n(242),angle:n(243),fromValues:n(208),copy:n(244),set:n(245),equals:n(246),exactEquals:n(247),add:n(248),subtract:n(211),sub:n(249),multiply:n(212),mul:n(250),divide:n(213),div:n(251),min:n(252),max:n(253),floor:n(254),ceil:n(255),round:n(256),scale:n(257),scaleAndAdd:n(258),distance:n(214),dist:n(259),squaredDistance:n(215),sqrDist:n(260),length:n(216),len:n(261),squaredLength:n(217),sqrLen:n(262),negate:n(263),inverse:n(264),normalize:n(209),dot:n(210),cross:n(265),lerp:n(266),random:n(267),transformMat4:n(268),transformMat3:n(269),transformQuat:n(270),rotateX:n(271),rotateY:n(272),rotateZ:n(273),forEach:n(274)}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noaOpts=t.updateSettings=t.gameSettings=t.defaultSettings=t.gameProtocol=t.gameVersion=void 0;t.gameVersion="0.2.0-dev",t.gameProtocol=2,t.defaultSettings={nickname:"Player"+Math.round(1e3*Math.random()),autostep:!1,gamepad:!1,singleplayer:!1,allowcustom:!1,mouse:15,hotbarsize:9},t.gameSettings={...t.defaultSettings},t.updateSettings=function(e){t.gameSettings={...t.defaultSettings,...e}},t.noaOpts=function(){return{debug:!0,showFPS:!0,inverseY:!1,inverseX:!1,sensitivityX:t.gameSettings.mouse,sensitivityY:t.gameSettings.mouse,chunkSize:32,chunkAddDistance:8.5,chunkRemoveDistance:9,blockTestDistance:7,tickRate:50,texturePath:"",playerStart:[0,100,0],playerHeight:1.85,playerWidth:.5,playerAutoStep:t.gameSettings.autostep?1:0,clearColor:[.8,.9,1],ambientColor:[1,1,1],lightDiffuse:[1,1,1],lightSpecular:[1,1,1],groundLightColor:[.5,.5,.5],useAO:!0,AOmultipliers:[.93,.8,.5],reverseAOmultiplier:1,preserveDrawingBuffer:!0,gravity:[0,-14,0],bindings:{forward:["W"],left:["A"],backward:["S"],right:["D"],fire:"<mouse 1>","mid-fire":["<mouse 2>"],"alt-fire":["<mouse 3>"],jump:"<space>",inventory:["E"],muteMusic:["O"],thirdprsn:["M"],chatenter:["<enter>"],chat:["T"],tab:["<tab>"],menu:["<escape>"],screenshot:["P"]}}}},,,,,,,,,,,,function(e,t,n){"use strict";e.exports=s;var r=n(130);((s.prototype=Object.create(r.prototype)).constructor=s).className="Enum";var i=n(139),o=n(62);function s(e,t,n,i,o){if(r.call(this,e,n),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=o||{},this.reserved=void 0,t)for(var s=Object.keys(t),a=0;a<s.length;++a)"number"==typeof t[s[a]]&&(this.valuesById[this.values[s[a]]=t[s[a]]]=s[a])}s.fromJSON=function(e,t){var n=new s(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},s.prototype.add=function(e,t,n){if(!o.isString(e))throw TypeError("name must be a string");if(!o.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},s.prototype.remove=function(e){if(!o.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},s.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},s.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){var r=t;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(230),r.base64=n(332),r.EventEmitter=n(333),r.float=n(334),r.inquire=n(231),r.utf8=n(335),r.pool=n(336),r.LongBits=n(337),r.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),r.global=r.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,n(129))},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";e.exports=c;var r=n(130);((c.prototype=Object.create(r.prototype)).constructor=c).className="Field";var i,o=n(88),s=n(131),a=n(62),u=/^required|optional|repeated$/;function c(e,t,n,i,o,c,l){if(a.isObject(i)?(l=o,c=i,i=o=void 0):a.isObject(o)&&(l=c,c=o,o=void 0),r.call(this,e,c),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(n))throw TypeError("type must be a string");if(void 0!==i&&!u.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!a.isString(o))throw TypeError("extend must be a string");this.rule=i&&"optional"!==i?i:void 0,this.type=n,this.id=t,this.extend=o||void 0,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==s.long[n],this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=l}c.fromJSON=function(e,t){return new c(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(c.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),c.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,n)},c.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},c.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=s.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},c.d=function(e,t,n,r){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(i,o){a.decorateType(i.constructor).add(new c(o,e,t,n,{default:r}))}},c._configure=function(e){i=e}},function(e,t,n){var r=n(205),i=n(241),o="undefined"!=typeof Float64Array;function s(e,t){return e[0]-t[0]}function a(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(s);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function u(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var i="generic"===e;if(-1===t){var o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(o)()}if(0===t){o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",o)(c[e][0])}o=["'use strict'"];var s=r(t),u=s.map((function(e){return"i"+e})),l="this.offset+"+s.map((function(e){return"this.stride["+e+"]*i"+e})).join("+"),f=s.map((function(e){return"b"+e})).join(","),h=s.map((function(e){return"c"+e})).join(",");o.push("function "+n+"(a,"+f+","+h+",d){this.data=a","this.shape=["+f+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+s.map((function(e){return"this.shape["+e+"]"})).join("*"),"}})"),1===t?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),t<4?(o.push("function "+n+"_order(){"),2===t?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+u.join(",")+",v){"),i?o.push("return this.data.set("+l+",v)}"):o.push("return this.data["+l+"]=v}"),o.push("proto.get=function "+n+"_get("+u.join(",")+"){"),i?o.push("return this.data.get("+l+")}"):o.push("return this.data["+l+"]}"),o.push("proto.index=function "+n+"_index(",u.join(),"){return "+l+"}"),o.push("proto.hi=function "+n+"_hi("+u.join(",")+"){return new "+n+"(this.data,"+s.map((function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")})).join(",")+","+s.map((function(e){return"this.stride["+e+"]"})).join(",")+",this.offset)}");var d=s.map((function(e){return"a"+e+"=this.shape["+e+"]"})),p=s.map((function(e){return"c"+e+"=this.stride["+e+"]"}));o.push("proto.lo=function "+n+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+p.join(","));for(var m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");o.push("return new "+n+"(this.data,"+s.map((function(e){return"a"+e})).join(",")+","+s.map((function(e){return"c"+e})).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+u.join(",")+"){var "+s.map((function(e){return"a"+e+"=this.shape["+e+"]"})).join(",")+","+s.map((function(e){return"b"+e+"=this.stride["+e+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");o.push("return new "+n+"(this.data,"+s.map((function(e){return"a"+e})).join(",")+","+s.map((function(e){return"b"+e})).join(",")+",c)}");var v=new Array(t),y=new Array(t);for(m=0;m<t;++m)v[m]="a[i"+m+"]",y[m]="b[i"+m+"]";o.push("proto.transpose=function "+n+"_transpose("+u+"){"+u.map((function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+v.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+u+"){var a=[],b=[],c=this.offset");for(m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");return o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+s.map((function(e){return"shape["+e+"]"})).join(",")+","+s.map((function(e){return"stride["+e+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",o.join("\n"))(c[e],a)}var c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};e.exports=function(e,t,n,r){if(void 0===e)return(0,c.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var s=t.length;if(void 0===n){n=new Array(s);for(var a=s-1,l=1;a>=0;--a)n[a]=l,l*=t[a]}if(void 0===r){r=0;for(a=0;a<s;++a)n[a]<0&&(r-=(t[a]-1)*n[a])}for(var f=function(e){if(i(e))return"buffer";if(o)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),h=c[f];h.length<=s+1;)h.push(u(f,h.length-1));return(0,h[s+1])(e,t,n,r)}},,,,,,function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,i),r(n)},e.once("error",o)),e.once(t,i)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o,s,a;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):v(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var c=u.length,l=v(u,c);for(n=0;n<c;++n)o(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return f(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return f(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},,,,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports=o,o.className="ReflectionObject";var r,i=n(62);function o(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},o.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},o.prototype.getOption=function(e){if(this.options)return this.options[e]},o.prototype.setOption=function(e,t,n){return n&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},o.prototype.setParsedOption=function(e,t,n){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(n){var o=r.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(o){var s=o[e];i.setProperty(s,n,t)}else(o={})[e]=i.setProperty({},n,t),r.push(o)}else{var a={};a[e]=t,r.push(a)}return this},o.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;++r)this.setOption(n[r],e[n[r]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(e){r=e}},function(e,t,n){"use strict";var r=t,i=n(62),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function s(e,t){var n=0,r={};for(t|=0;n<e.length;)r[o[n+t]]=e[n++];return r}r.basic=s([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=s([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),r.long=s([0,0,0,1,1],7),r.mapKey=s([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=s([1,5,0,0,0,5,5,0,0,0,1,1,0])},,,,,,,,function(e,t,n){"use strict";e.exports=l;var r=n(130);((l.prototype=Object.create(r.prototype)).constructor=l).className="Namespace";var i,o,s,a=n(118),u=n(62);function c(e,t){if(e&&e.length){for(var n={},r=0;r<e.length;++r)n[e[r].name]=e[r].toJSON(t);return n}}function l(e,t){r.call(this,e,t),this.nested=void 0,this._nestedArray=null}function f(e){return e._nestedArray=null,e}l.fromJSON=function(e,t){return new l(e,t.options).addJSON(t.nested)},l.arrayToJSON=c,l.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>t)return!0;return!1},l.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),l.prototype.toJSON=function(e){return u.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},l.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),r=0;r<n.length;++r)t=e[n[r]],this.add((void 0!==t.fields?i.fromJSON:void 0!==t.values?s.fromJSON:void 0!==t.methods?o.fromJSON:void 0!==t.id?a.fromJSON:l.fromJSON)(n[r],t));return this},l.prototype.get=function(e){return this.nested&&this.nested[e]||null},l.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},l.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof i||e instanceof s||e instanceof o||e instanceof l))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof l&&e instanceof l)||t instanceof i||t instanceof o)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,r=0;r<n.length;++r)e.add(n[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),f(this)},l.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),f(this)},l.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var r=e.shift();if(n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof l))throw Error("path conflicts with non-namespace objects")}else n.add(n=new l(r))}return t&&n.addJSON(t),n},l.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof l?e[t++].resolveAll():e[t++].resolve();return this.resolve()},l.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof l&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof l&&(r=this._nestedArray[i].lookup(e,t,!0)))return r;return null===this.parent||n?null:this.parent.lookup(e,t)},l.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},l.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},l.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},l.prototype.lookupService=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},l._configure=function(e,t,n){i=e,o=t,s=n}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";e.exports=s;var r=n(130);((s.prototype=Object.create(r.prototype)).constructor=s).className="OneOf";var i=n(118),o=n(62);function s(e,t,n,i){if(Array.isArray(t)||(n=t,t=void 0),r.call(this,e,n),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}s.fromJSON=function(e,t){return new s(e,t.oneof,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},s.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},s.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},s.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var n=e.get(this.oneof[t]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n))}a(this)},s.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},s.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){o.decorateType(t.constructor).add(new s(n,e)),Object.defineProperty(t,n,{get:o.oneOfGetter(e),set:o.oneOfSetter(e)})}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=i;var r=n(73);function i(e,t){if(!(this instanceof i))return new i(e,t);var n=r.create();r.add(n,e,t),this.base=r.min(r.create(),e,n),this.vec=r.clone(t),this.max=r.max(r.create(),e,n),this.mag=r.length(this.vec)}var o=i.prototype;o.width=function(){return this.vec[0]},o.height=function(){return this.vec[1]},o.depth=function(){return this.vec[2]},o.x0=function(){return this.base[0]},o.y0=function(){return this.base[1]},o.z0=function(){return this.base[2]},o.x1=function(){return this.max[0]},o.y1=function(){return this.max[1]},o.z1=function(){return this.max[2]},o.translate=function(e){return r.add(this.max,this.max,e),r.add(this.base,this.base,e),this},o.setPosition=function(e){return r.add(this.max,e,this.vec),r.copy(this.base,e),this},o.expand=function(e){var t=r.create(),n=r.create();return r.max(t,e.max,this.max),r.min(n,e.base,this.base),r.subtract(t,t,n),new i(n,t)},o.intersects=function(e){return!(e.base[0]>this.max[0])&&(!(e.base[1]>this.max[1])&&(!(e.base[2]>this.max[2])&&(!(e.max[0]<this.base[0])&&(!(e.max[1]<this.base[1])&&!(e.max[2]<this.base[2])))))},o.touches=function(e){var t=this.union(e);return null!==t&&(0==t.width()||0==t.height()||0==t.depth())},o.union=function(e){if(!this.intersects(e))return null;var t=Math.max(e.base[0],this.base[0]),n=Math.max(e.base[1],this.base[1]),r=Math.max(e.base[2],this.base[2]);return new i([t,n,r],[Math.min(e.max[0],this.max[0])-t,Math.min(e.max[1],this.max[1])-n,Math.min(e.max[2],this.max[2])-r])}},function(e,t,n){"use strict";(function(e){var r=n(190),i=n(299),o=n(300).Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var s="undefined"!=typeof Uint8ClampedArray,a="undefined"!=typeof BigUint64Array,u="undefined"!=typeof BigInt64Array,c=e.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=i([32,0])),c.BIGUINT64||(c.BIGUINT64=i([32,0])),c.BIGINT64||(c.BIGINT64=i([32,0])),c.BUFFER||(c.BUFFER=i([32,0]));var l=c.DATA,f=c.BUFFER;function h(e){if(e){var t=e.length||e.byteLength,n=r.log2(t);l[n].push(e)}}function d(e){e=r.nextPow2(e);var t=r.log2(e),n=l[t];return n.length>0?n.pop():new ArrayBuffer(e)}function p(e){return new Uint8Array(d(e),0,e)}function m(e){return new Uint16Array(d(2*e),0,e)}function v(e){return new Uint32Array(d(4*e),0,e)}function y(e){return new Int8Array(d(e),0,e)}function g(e){return new Int16Array(d(2*e),0,e)}function b(e){return new Int32Array(d(4*e),0,e)}function w(e){return new Float32Array(d(4*e),0,e)}function k(e){return new Float64Array(d(8*e),0,e)}function _(e){return s?new Uint8ClampedArray(d(e),0,e):p(e)}function x(e){return a?new BigUint64Array(d(8*e),0,e):null}function E(e){return u?new BigInt64Array(d(8*e),0,e):null}function S(e){return new DataView(d(e),0,e)}function O(e){e=r.nextPow2(e);var t=r.log2(e),n=f[t];return n.length>0?n.pop():new o(e)}t.free=function(e){if(o.isBuffer(e))f[r.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|r.log2(t);l[n].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(e){h(e.buffer)},t.freeArrayBuffer=h,t.freeBuffer=function(e){f[r.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return d(e);switch(t){case"uint8":return p(e);case"uint16":return m(e);case"uint32":return v(e);case"int8":return y(e);case"int16":return g(e);case"int32":return b(e);case"float":case"float32":return w(e);case"double":case"float64":return k(e);case"uint8_clamped":return _(e);case"bigint64":return E(e);case"biguint64":return x(e);case"buffer":return O(e);case"data":case"dataview":return S(e);default:return null}return null},t.mallocArrayBuffer=d,t.mallocUint8=p,t.mallocUint16=m,t.mallocUint32=v,t.mallocInt8=y,t.mallocInt16=g,t.mallocInt32=b,t.mallocFloat32=t.mallocFloat=w,t.mallocFloat64=t.mallocDouble=k,t.mallocUint8Clamped=_,t.mallocBigUint64=x,t.mallocBigInt64=E,t.mallocDataView=S,t.mallocBuffer=O,t.clearCache=function(){for(var e=0;e<32;++e)c.UINT8[e].length=0,c.UINT16[e].length=0,c.UINT32[e].length=0,c.INT8[e].length=0,c.INT16[e].length=0,c.INT32[e].length=0,c.FLOAT[e].length=0,c.DOUBLE[e].length=0,c.BIGUINT64[e].length=0,c.BIGINT64[e].length=0,c.UINT8C[e].length=0,l[e].length=0,f[e].length=0}}).call(this,n(129))},function(e,t,n){"use strict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=r,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(i),t.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.registerItems=t.registerBlocks=t.blockIDmap=t.blockIDs=t.items=t.blocks=void 0;const s=n(76),a=o(n(226));t.blocks={},t.items={},t.blockIDs={},t.blockIDmap={},t.registerBlocks=function(e,n){const r=e.rendering.getScene();t.blocks=n,Object.values(n).forEach(e=>{t.blockIDs[e.id]=e.rawid,t.blockIDmap[e.rawid]=e.id}),e.registry.registerMaterial("water",[.5,.5,.8,.7],null,!0),e.registry.registerMaterial("barrier",[0,0,0,0],null,!0),console.log("Blocks: ",t.blockIDs),Object.values(n).forEach((function(t){!function(t,n,i,o,u,c,l,f){if(0==i){let r,i=!1;if(0==u.opaque&&(i=!0),1==o.length&&null==u.material)(o[0].startsWith("http://")||o[0].startsWith("https://"))&&1==s.gameSettings.allowcustom?e.registry.registerMaterial(n,[0,0,0],o[0],i):e.registry.registerMaterial(n,[0,0,0],"textures/"+o[0]+".png",i),r=n;else if(null==u.material){r=new Array;for(let t=0;t<o.length;t++)(o[t].startsWith("http://")||o[t].startsWith("https://"))&&1==s.gameSettings.allowcustom?e.registry.registerMaterial(n+t,[0,0,0],o[t],i):e.registry.registerMaterial(n+t,[0,0,0],"textures/"+o[t]+".png",i),r.push(n+t)}else r=u.material;const a=u;a.material=r,e.registry.registerBlock(t,a)}else if(1==i){const i=function(e,t,n,r){const i=r||"sprite-mat";let o;o=(n.startsWith("http://")||n.startsWith("https://"))&&1==s.gameSettings.allowcustom?new a.Texture(n,t,!0,!0,a.Texture.NEAREST_SAMPLINGMODE):new a.Texture("textures/"+n+".png",t,!0,!0,a.Texture.NEAREST_SAMPLINGMODE);o.hasAlpha=!0;const u=a.Mesh.CreatePlane("sprite-"+i,1,t),c=e.rendering.makeStandardMaterial(i);c.backFaceCulling=!1,c.diffuseTexture=o,c.diffuseTexture.vOffset=.99,u.material=c,u.rotation.y+=.81;const l=a.Matrix.Translation(0,.5,0);u.bakeTransformIntoVertices(l);const f=u.clone();return f.rotation.y+=1.62,a.Mesh.MergeMeshes([u,f],!0)}(e,r,o[0],n),c=u;c.blockMesh=i,e.registry.registerBlock(t,c)}else if(2==i){const i=function(e,t,n,r){const i={},o={};for(let u=0;u<6;u++){let c,l=r+"-"+u||"sprite-mat";switch(i[u]=a.Mesh.CreatePlane("sprite-"+l,1,t),o[u]=e.rendering.makeStandardMaterial(l+u),o[u].backFaceCulling=!1,((u<4?n[1]:n[0]).startsWith("http://")||(u<4?n[1]:n[0]).startsWith("https://"))&&1==s.gameSettings.allowcustom?o[u].diffuseTexture=new a.Texture(u<4?n[1]:n[0],t,!0,!0,a.Texture.NEAREST_SAMPLINGMODE):o[u].diffuseTexture=new a.Texture("textures/"+(u<4?n[1]:n[0])+".png",t,!0,!0,a.Texture.NEAREST_SAMPLINGMODE),o[u].diffuseTexture.hasAlpha=!0,i[u].material=o[u],u){case 0:c=a.Matrix.Translation(0,.5,.435),i[u].rotation.y=1.57;break;case 1:c=a.Matrix.Translation(0,.5,-.435),i[u].rotation.y=1.57;break;case 2:c=a.Matrix.Translation(0,.5,.435);break;case 3:c=a.Matrix.Translation(0,.5,-.435);break;case 4:c=a.Matrix.Translation(0,0,-1),i[u].rotation.x=1.57;break;case 5:c=a.Matrix.Translation(0,0,0),i[u].rotation.x=1.57}i[u].bakeTransformIntoVertices(c)}return a.Mesh.MergeMeshes(Object.values(i),!0,!0,void 0,!1,!1)}(e,r,[o[0],o[1]],n),c=u;c.blockMesh=i,e.registry.registerBlock(t,c)}else if(4==i){const i=e.rendering.makeStandardMaterial(n);let c;c=(o[0].startsWith("http://")||o[0].startsWith("https://"))&&1==s.gameSettings.allowcustom?new a.Texture(o[0],r,!0,!0,a.Texture.NEAREST_SAMPLINGMODE):new a.Texture("textures/"+o[0]+".png",r,!0,!0,a.Texture.NEAREST_SAMPLINGMODE),i.diffuseTexture=c,i.opacityTexture=i.diffuseTexture,i.backFaceCulling=!0;const l=a.MeshBuilder.CreateBox(n,{size:1},e.rendering.getScene());l.material=i,l.bakeTransformIntoVertices(a.Matrix.Scaling(1,1,1).setTranslation(new a.Vector3(0,.5,0))),l.opaque=!1,l.material.needDepthPrePass=!0;const f=u;f.blockMesh=l,e.registry.registerBlock(t,f)}}(t.rawid,t.id,t.type,t.texture,t.options,t.hardness,t.miningtime,t.tool)}))},t.registerItems=function(e,n){t.items=n,console.log("Items: ",n)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getScreen=t.getUI=t.getLayer=t.constructScreen=void 0;const s=o(n(228)),a=o(n(201));let u,c,l,f,h,d,p=!1;t.constructScreen=function(e){const t=e.rendering.getEngine();u=new s.Scene(t),c=new s.Scene(t),l=a.AdvancedDynamicTexture.CreateFullscreenUI("UI",!1,u,s.Texture.NEAREST_SAMPLINGMODE),f=a.AdvancedDynamicTexture.CreateFullscreenUI("UI",!1,c,s.Texture.NEAREST_SAMPLINGMODE),h=new a.Rectangle,l.addControl(h),d=new a.Rectangle,f.addControl(d),t.onResizeObservable.add(()=>{l.getContext().imageSmoothingEnabled=!1,f.getContext().imageSmoothingEnabled=!1}),l.getContext().imageSmoothingEnabled=!1,f.getContext().imageSmoothingEnabled=!1,console.log(l.samplingMode),u.autoClear=!1,c.autoClear=!1,new s.ArcRotateCamera("Camera",-Math.PI/2,7*Math.PI/16,10,s.Vector3.Zero(),u),new s.ArcRotateCamera("Camera",-Math.PI/2,7*Math.PI/16,10,s.Vector3.Zero(),c),p=!0,e.rendering._multiscenes.push(u),e.rendering._multiscenes.push(c)},t.getLayer=function(e){if(!p)throw"Scenes aren't initialized yet!";if(0==e)return u;if(1==e)return c;throw"Invalid number"},t.getUI=function(e){if(!p)throw"UIs aren't initialized yet!";if(0==e)return l;if(1==e)return f;throw"Invalid number"},t.getScreen=function(e){if(!p)throw"UIs aren't initialized yet!";if(0==e)return h;if(1==e)return d;throw"Invalid number"}},function(e,t,n){"use strict";e.exports=f;var r,i=n(101),o=i.LongBits,s=i.base64,a=i.utf8;function u(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function c(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function f(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(f.create=function(){return new r})()}:function(){return new f}};function d(e,t,n){t[n]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function v(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}f.create=h(),f.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(f.alloc=i.pool(f.alloc,i.Array.prototype.subarray)),f.prototype._push=function(e,t,n){return this.tail=this.tail.next=new u(e,t,n),this.len+=t,this},p.prototype=Object.create(u.prototype),p.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},f.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},f.prototype.int32=function(e){return e<0?this._push(m,10,o.fromNumber(e)):this.uint32(e)},f.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},f.prototype.uint64=function(e){var t=o.from(e);return this._push(m,t.length(),t)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(m,t.length(),t)},f.prototype.bool=function(e){return this._push(d,1,e?1:0)},f.prototype.fixed32=function(e){return this._push(v,4,e>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(e){var t=o.from(e);return this._push(v,4,t.lo)._push(v,4,t.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},f.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var y=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};f.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(d,1,0);if(i.isString(e)){var n=f.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(y,t,e)},f.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(d,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},f.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},f.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},f._configure=function(e){r=e,f.create=h(),r._configure()}},function(e,t,n){"use strict";e.exports=u;var r,i=n(101),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}var c,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")},f=function(){return i.Buffer?function(e){return(u.create=function(e){return i.Buffer.isBuffer(e)?new r(e):l(e)})(e)}:l};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new o(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}u.create=f(),u.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,u.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},u.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},u.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){r=e,u.create=f(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(u.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},function(e,t,n){"use strict";e.exports=g;var r=n(139);((g.prototype=Object.create(r.prototype)).constructor=g).className="Type";var i=n(88),o=n(155),s=n(118),a=n(196),u=n(197),c=n(199),l=n(194),f=n(193),h=n(62),d=n(234),p=n(235),m=n(236),v=n(237),y=n(238);function g(e,t){r.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(g.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=g.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof c||((e.prototype=new c).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,c,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:h.oneOfGetter(this._oneofsArray[n].oneof),set:h.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,r)}}}),g.generateConstructor=function(e){for(var t,n=h.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?n("this%s={}",h.safeProp(t.name)):t.repeated&&n("this%s=[]",h.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},g.fromJSON=function(e,t){var n=new g(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var c=Object.keys(t.fields),l=0;l<c.length;++l)n.add((void 0!==t.fields[c[l]].keyType?a.fromJSON:s.fromJSON)(c[l],t.fields[c[l]]));if(t.oneofs)for(c=Object.keys(t.oneofs),l=0;l<c.length;++l)n.add(o.fromJSON(c[l],t.oneofs[c[l]]));if(t.nested)for(c=Object.keys(t.nested),l=0;l<c.length;++l){var f=t.nested[c[l]];n.add((void 0!==f.id?s.fromJSON:void 0!==f.fields?g.fromJSON:void 0!==f.values?i.fromJSON:void 0!==f.methods?u.fromJSON:r.fromJSON)(c[l],f))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},g.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return h.toObject(["options",t&&t.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},g.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return r.prototype.resolveAll.call(this)},g.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},g.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof s&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof o?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):r.prototype.add.call(this,e)},g.prototype.remove=function(e){if(e instanceof s&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof o){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return r.prototype.remove.call(this,e)},g.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},g.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},g.prototype.create=function(e){return new this.ctor(e)},g.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=d(this)({Writer:f,types:t,util:h}),this.decode=p(this)({Reader:l,types:t,util:h}),this.verify=m(this)({types:t,util:h}),this.fromObject=v.fromObject(this)({types:t,util:h}),this.toObject=v.toObject(this)({types:t,util:h});var r=y[e];if(r){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(i),i.toObject=this.toObject,this.toObject=r.toObject.bind(i)}return this},g.prototype.encode=function(e,t){return this.setup().encode(e,t)},g.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},g.prototype.decode=function(e,t){return this.setup().decode(e,t)},g.prototype.decodeDelimited=function(e){return e instanceof l||(e=l.create(e)),this.decode(e,e.uint32())},g.prototype.verify=function(e){return this.setup().verify(e)},g.prototype.fromObject=function(e){return this.setup().fromObject(e)},g.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},g.d=function(e){return function(t){h.decorateType(t,e)}}},function(e,t,n){"use strict";e.exports=s;var r=n(118);((s.prototype=Object.create(r.prototype)).constructor=s).className="MapField";var i=n(131),o=n(62);function s(e,t,n,i,s,a){if(r.call(this,e,t,i,void 0,void 0,s,a),!o.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(e,t){return new s(e,t.id,t.keyType,t.type,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},s.d=function(e,t,n){return"function"==typeof n?n=o.decorateType(n).name:n&&"object"==typeof n&&(n=o.decorateEnum(n).name),function(r,i){o.decorateType(r.constructor).add(new s(i,e,t,n))}}},function(e,t,n){"use strict";e.exports=a;var r=n(139);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var i=n(198),o=n(62),s=n(232);function a(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function u(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var n=new a(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),o=0;o<r.length;++o)n.add(i.fromJSON(r[o],t.methods[r[o]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},a.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return o.toObject(["options",t&&t.options||void 0,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=o.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,u(this)):r.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,u(this)}return r.prototype.remove.call(this,e)},a.prototype.create=function(e,t,n){for(var r,i=new s.Service(e,t,n),a=0;a<this.methodsArray.length;++a){var u=o.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[u]=o.codegen(["r","c"],o.isReserved(u)?u+"_":u)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return i}},function(e,t,n){"use strict";e.exports=o;var r=n(130);((o.prototype=Object.create(r.prototype)).constructor=o).className="Method";var i=n(62);function o(e,t,n,o,s,a,u,c){if(i.isObject(s)?(u=s,s=a=void 0):i.isObject(a)&&(u=a,a=void 0),void 0!==t&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(n))throw TypeError("requestType must be a string");if(!i.isString(o))throw TypeError("responseType must be a string");r.call(this,e,u),this.type=t||"rpc",this.requestType=n,this.requestStream=!!s||void 0,this.responseType=o,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c}o.fromJSON=function(e,t){return new o(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},function(e,t,n){"use strict";e.exports=i;var r=n(101);function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},function(e,t,n){"use strict";e.exports=f;var r=n(139);((f.prototype=Object.create(r.prototype)).constructor=f).className="Root";var i,o,s,a=n(118),u=n(88),c=n(155),l=n(62);function f(e){r.call(this,"",e),this.deferred=[],this.files=[]}function h(){}f.fromJSON=function(e,t){return t||(t=new f),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},f.prototype.resolvePath=l.path.resolve,f.prototype.fetch=l.fetch,f.prototype.load=function e(t,n,r){"function"==typeof n&&(r=n,n=void 0);var i=this;if(!r)return l.asPromise(e,i,t,n);var a=r===h;function u(e,t){if(r){var n=r;if(r=null,a)throw e;n(e,t)}}function c(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var n=e.substring(t);if(n in s)return n}return null}function f(e,t){try{if(l.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),l.isString(t)){o.filename=e;var r,s=o(t,i,n),f=0;if(s.imports)for(;f<s.imports.length;++f)(r=c(s.imports[f])||i.resolvePath(e,s.imports[f]))&&d(r);if(s.weakImports)for(f=0;f<s.weakImports.length;++f)(r=c(s.weakImports[f])||i.resolvePath(e,s.weakImports[f]))&&d(r,!0)}else i.setOptions(t.options).addJSON(t.nested)}catch(e){u(e)}a||p||u(null,i)}function d(e,t){if(!(i.files.indexOf(e)>-1))if(i.files.push(e),e in s)a?f(e,s[e]):(++p,setTimeout((function(){--p,f(e,s[e])})));else if(a){var n;try{n=l.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||u(e))}f(e,n)}else++p,i.fetch(e,(function(n,o){--p,r&&(n?t?p||u(null,i):u(n):f(e,o))}))}var p=0;l.isString(t)&&(t=[t]);for(var m,v=0;v<t.length;++v)(m=i.resolvePath("",t[v]))&&d(m);if(a)return i;p||u(null,i)},f.prototype.loadSync=function(e,t){if(!l.isNode)throw Error("not supported");return this.load(e,t,h)},f.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var d=/^[A-Z]/;function p(e,t){var n=t.parent.lookup(t.extend);if(n){var r=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.declaringField=t,t.extensionField=r,n.add(r),!0}return!1}f.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||p(0,e)||this.deferred.push(e);else if(e instanceof u)d.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof c)){if(e instanceof i)for(var t=0;t<this.deferred.length;)p(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);d.test(e.name)&&(e.parent[e.name]=e)}},f.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof u)d.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);d.test(e.name)&&delete e.parent[e.name]}},f._configure=function(e,t,n){i=e,o=t,s=n}},,function(e,t,n){"use strict";n.r(t),n.d(t,"updatePositionExtents",(function(){return i}));var r=n(73);function i(e){var t=e.width/2,n=e._localPosition,r=e._extents;r[0]=n[0]-t,r[1]=n[1],r[2]=n[2]-t,r[3]=n[0]+t,r[4]=n[1]+e.height,r[5]=n[2]+t}t.default=function(e){return{name:"position",order:60,state:{position:null,width:1,height:1,_localPosition:null,_renderPosition:null,_extents:null},onAdd:function(t,n){var o=[0,0,0];n.position&&r.copy(o,n.position),n.position=o,n._localPosition=r.create(),n._renderPosition=r.create(),n._extents=new Float32Array(6),e.globalToLocal(n.position,null,n._localPosition),r.copy(n._renderPosition,n._localPosition),i(n)},onRemove:null,system:function(t,n){var o=e.worldOriginOffset;n.forEach(e=>{r.add(e.position,e._localPosition,o),i(e)})}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"setPhysicsFromPosition",(function(){return o}));var r=n(73);t.default=function(e){return{name:"physics",order:40,state:{body:null},onAdd:function(t,n){n.body=e.physics.addBody(),o(n,e.ents.getPositionData(n.__id))},onRemove:function(t,n){if(e.ents.hasPosition(n.__id)){var r=e.ents.getPositionData(n.__id);s(n,r),a(n,r,0,!1)}e.physics.removeBody(n.body)},system:function(t,n){n.forEach(t=>{s(t,e.ents.getPositionData(t.__id))})},renderSystem:function(t,n){var r=(e.positionInCurrentTick*e._tickRate-e._tickRate)/1e3;n.forEach(t=>{var n=t.__id,i=e.ents.getPositionData(n),o=e.ents.cameraSmoothed(n);a(t,i,r,o)})}}};var i=r.create();function o(e,t){var n=e.body.aabb,i=t._extents;r.copy(n.base,i),r.set(n.vec,t.width,t.height,t.width),r.add(n.max,n.base,n.vec)}function s(e,t){var n=e.body.aabb.base,i=t.width/2;r.set(t._localPosition,n[0]+i,n[1],n[2]+i)}function a(e,t,n,o){var s=e.body.velocity;r.scaleAndAdd(i,t._localPosition,s,n),o&&r.lerp(i,t._renderPosition,i,.3),r.copy(t._renderPosition,i)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=t.BaseSocket=void 0;const s=o(n(327));class a{constructor(){this.listeners={}}send(e,t){const n=s.parseToMessage("client",e,t);null!=n&&this.socket.send(n)}close(){this.listeners={}}emit(e,t){null!=this.listeners[e]&&this.listeners[e].forEach(e=>{e(t)})}on(e,t){null!=this.listeners[e]||(this.listeners[e]=new Array),this.listeners[e].push(t)}}t.BaseSocket=a;t.Socket=class extends a{constructor(e){super(),this.server=e,this.socket=new WebSocket(e),this.socket.binaryType="arraybuffer",this.socket.onopen=()=>{this.emit("connection",{})},this.socket.onmessage=e=>{const t=s.parseToObject("server",new Uint8Array(e.data));null!=t&&this.emit(t.type,t.data)}}close(){this.listeners={},this.socket.close}}},function(e,t,n){"use strict";e.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},function(e,t){e.exports=1e-6},function(e,t){e.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},function(e,t){e.exports=function(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}},function(e,t){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o);return e}},function(e,t){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}},function(e,t){e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}},function(e,t){e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}},function(e,t){e.exports=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}},function(e,t){e.exports=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}},,,,,,function(e,t,n){"use strict";var r=[],i=[],o=[],s=[],a=[],u=[],c=[],l=[],f=[],h=[],d=[],p=[];e.exports=function(e,t,n,m,v,y){for(var g=c,b=f,w=h,k=p,_=0;_<3;_++)g[_]=+n[_],w[_]=+t.max[_],b[_]=+t.base[_];y||(y=1e-10);var x=function(e,t,n,c,f,h){var p=r,m=i,v=o,y=s,g=a,b=u,w=l,k=Math.floor,_=0,x=0,E=0,S=0,O=0;if(T(),0===E)return 0;for(S=M();x<=E;){if(A(S))if(C())return _;S=M()}for(_+=E,O=0;O<3;O++)c[O]+=n[O],f[O]+=n[O];return _;function T(){if(x=0,0!==(E=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2])))for(var e=0;e<3;e++){var t=n[e]>=0;y[e]=t?1:-1;var r=t?f[e]:c[e];p[e]=t?c[e]:f[e],m[e]=P(r,y[e]),v[e]=j(p[e],y[e]),w[e]=n[e]/E,g[e]=Math.abs(1/w[e]);var i=t?m[e]+1-r:r-m[e];b[e]=g[e]<1/0?g[e]*i:1/0}}function A(t){for(var n=y[0],r=0===t?m[0]:v[0],i=m[0]+n,o=y[1],s=1===t?m[1]:v[1],a=m[1]+o,u=y[2],c=2===t?m[2]:v[2],l=m[2]+u,f=r;f!=i;f+=n)for(var h=s;h!=a;h+=o)for(var d=c;d!=l;d+=u)if(e(f,h,d))return!0;return!1}function C(){_+=x;var e=y[S],r=x/E,i=d;for(O=0;O<3;O++){var o=n[O]*r;c[O]+=o,f[O]+=o,i[O]=n[O]-o}if(e>0?f[S]=Math.round(f[S]):c[S]=Math.round(c[S]),t(_,S,e,i))return!0;for(O=0;O<3;O++)n[O]=i[O];return T(),0===E}function M(){var e=b[0]<b[1]?b[0]<b[2]?0:2:b[1]<b[2]?1:2,t=b[e]-x;for(x=b[e],m[e]+=y[e],b[e]+=g[e],O=0;O<3;O++)p[O]+=t*w[O],v[O]=j(p[O],y[O]);return e}function P(e,t){return k(e-t*h)}function j(e,t){return k(e+t*h)}}(e,m,g,b,w,y);if(!v){for(_=0;_<3;_++)k[_]=n[_]>0?w[_]-t.max[_]:b[_]-t.base[_];t.translate(k)}return x}},function(e,t,n){"use strict";e.exports={init:function(e){var t=i.nextPow2(e);s.length<t&&(r.free(s),s=r.mallocInt32(t));a.length<t&&(r.free(a),a=r.mallocInt32(t));u.length<t&&(r.free(u),u=r.mallocInt32(t));c.length<t&&(r.free(c),c=r.mallocInt32(t));l.length<t&&(r.free(l),l=r.mallocInt32(t));f.length<t&&(r.free(f),f=r.mallocInt32(t));var n=8*t;h.length<n&&(r.free(h),h=r.mallocDouble(n))},sweepBipartite:function(e,t,n,r,i,l,f,m,v,y){for(var g=0,b=2*e,w=e-1,k=b-1,_=n;_<r;++_){var x=l[_],E=b*_;h[g++]=i[E+w],h[g++]=-(x+1),h[g++]=i[E+k],h[g++]=x}for(_=f;_<m;++_){x=y[_]+(1<<28);var S=b*_;h[g++]=v[S+w],h[g++]=-x,h[g++]=v[S+k],h[g++]=x}var O=g>>>1;o(h,O);var T=0,A=0;for(_=0;_<O;++_){var C=0|h[2*_+1];if(C>=1<<28)d(u,c,A--,C=C-(1<<28)|0);else if(C>=0)d(s,a,T--,C);else if(C<=-(1<<28)){C=-C-(1<<28)|0;for(var M=0;M<T;++M){if(void 0!==(P=t(s[M],C)))return P}p(u,c,A++,C)}else{C=-C-1|0;for(M=0;M<A;++M){var P;if(void 0!==(P=t(C,u[M])))return P}p(s,a,T++,C)}}},sweepComplete:function(e,t,n,r,i,m,v,y,g,b){for(var w=0,k=2*e,_=e-1,x=k-1,E=n;E<r;++E){var S=m[E]+1<<1,O=k*E;h[w++]=i[O+_],h[w++]=-S,h[w++]=i[O+x],h[w++]=S}for(E=v;E<y;++E){S=b[E]+1<<1;var T=k*E;h[w++]=g[T+_],h[w++]=1|-S,h[w++]=g[T+x],h[w++]=1|S}var A=w>>>1;o(h,A);var C=0,M=0,P=0;for(E=0;E<A;++E){var j=0|h[2*E+1],I=1&j;if(E<A-1&&j>>1==h[2*E+3]>>1&&(I=2,E+=1),j<0){for(var D=-(j>>1)-1,L=0;L<P;++L){if(void 0!==(B=t(l[L],D)))return B}if(0!==I)for(L=0;L<C;++L){if(void 0!==(B=t(s[L],D)))return B}if(1!==I)for(L=0;L<M;++L){var B;if(void 0!==(B=t(u[L],D)))return B}0===I?p(s,a,C++,D):1===I?p(u,c,M++,D):2===I&&p(l,f,P++,D)}else{D=(j>>1)-1;0===I?d(s,a,C--,D):1===I?d(u,c,M--,D):2===I&&d(l,f,P--,D)}}},scanBipartite:function(e,t,n,r,i,u,c,l,f,m,v,y){var g=0,b=2*e,w=t,k=t+e,_=1,x=1;r?x=1<<28:_=1<<28;for(var E=i;E<u;++E){var S=E+_,O=b*E;h[g++]=c[O+w],h[g++]=-S,h[g++]=c[O+k],h[g++]=S}for(E=f;E<m;++E){S=E+x;var T=b*E;h[g++]=v[T+w],h[g++]=-S}var A=g>>>1;o(h,A);var C=0;for(E=0;E<A;++E){var M=0|h[2*E+1];if(M<0){var P=!1;if((S=-M)>=1<<28?(P=!r,S-=1<<28):(P=!!r,S-=1),P)p(s,a,C++,S);else{var j=y[S],I=b*S,D=v[I+t+1],L=v[I+t+1+e];e:for(var B=0;B<C;++B){var R=s[B],N=b*R;if(!(L<c[N+t+1]||c[N+t+1+e]<D)){for(var F=t+2;F<e;++F)if(v[I+F+e]<c[N+F]||c[N+F+e]<v[I+F])continue e;var z,U=l[R];if(void 0!==(z=r?n(j,U):n(U,j)))return z}}}}else d(s,a,C--,M-_)}},scanComplete:function(e,t,n,r,i,a,u,c,l,f,d){for(var p=0,m=2*e,v=t,y=t+e,g=r;g<i;++g){var b=g+(1<<28),w=m*g;h[p++]=a[w+v],h[p++]=-b,h[p++]=a[w+y],h[p++]=b}for(g=c;g<l;++g){b=g+1;var k=m*g;h[p++]=f[k+v],h[p++]=-b}var _=p>>>1;o(h,_);var x=0;for(g=0;g<_;++g){var E=0|h[2*g+1];if(E<0){if((b=-E)>=1<<28)s[x++]=b-(1<<28);else{var S=d[b-=1],O=m*b,T=f[O+t+1],A=f[O+t+1+e];e:for(var C=0;C<x;++C){var M=s[C],P=u[M];if(P===S)break;var j=m*M;if(!(A<a[j+t+1]||a[j+t+1+e]<T)){for(var I=t+2;I<e;++I)if(f[O+I+e]<a[j+I]||a[j+I+e]<f[O+I])continue e;var D=n(P,S);if(void 0!==D)return D}}}}else{for(b=E-(1<<28),C=x-1;C>=0;--C)if(s[C]===b){for(I=C+1;I<x;++I)s[I-1]=s[I];break}--x}}}};var r=n(189),i=n(190),o=n(304),s=r.mallocInt32(1024),a=r.mallocInt32(1024),u=r.mallocInt32(1024),c=r.mallocInt32(1024),l=r.mallocInt32(1024),f=r.mallocInt32(1024),h=r.mallocDouble(8192);function d(e,t,n,r){var i=t[r],o=e[n-1];e[i]=o,t[o]=i}function p(e,t,n,r){e[n]=r,t[r]=n}},function(e,t,n){"use strict";e.exports=function(e,t){var n="abcdef".split("").concat(t),r=[];e.indexOf("lo")>=0&&r.push("lo=e[k+n]");e.indexOf("hi")>=0&&r.push("hi=e[k+o]");return n.push("for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m".replace("_",r.join()).replace("$",e)),Function.apply(void 0,n)}},,function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createSlot=t.buildInventory=t.inventory=t.buildHotbar=void 0;const s=n(192),a=n(191),u=o(n(201));t.buildHotbar=function(e){const t=s.getUI(0),n=(s.getLayer(0),new u.Rectangle);n.zIndex=20,n.verticalAlignment=1,n.width="552px",n.height="72px",n.thickness=0,t.addControl(n);const r=new u.Image("hotbar","./textures/gui/hotbar.png");r.width="552px",r.height="72px",n.addControl(r);const i=new u.Image("hotbar","./textures/gui/selected.png");i.zIndex=50,i.width="72px",i.height="72px",i.left="-228px",n.addControl(i);const o=new Array(9);for(let e=0;e<9;e++){o[e]=f(3);const t=o[e].container;t.zIndex=20,t.left=60*e-240+"px",n.addControl(t)}e.on("beforeRender",async()=>{const t=e.ents.getState(e.playerEntity,"inventory");i.left=60*t.selected-240+"px";for(let e=0;e<9;e++)if(null!=t.items[e]&&null!=t.items[e].id){const n=a.items[t.items[e].id];let r;r=null!=n.blockTexture?n.blockTexture:n.texture.startsWith("https://")&&n.texture.startsWith("http://")?n.texture:"./textures/"+n.texture+".png",o[e].item.source=r,1==n.count?o[e].count.text="":t.items[e].count<=10?o[e].count.text=" "+t.items[e].count.toString():o[e].count.text=t.items[e].count.toString()}else o[e].item.source="",o[e].count.text=""})};let c=0;function l(e,n){function r(){return e.ents.getState(e.playerEntity,"inventory")}const i=s.getScreen(1);s.getLayer(1);t.inventory=new u.Rectangle,t.inventory.zIndex=20,t.inventory.verticalAlignment=2,t.inventory.background="#00000077",t.inventory.thickness=0,t.inventory.isVisible=!1,i.addControl(t.inventory);const o=new u.Image("inventory","./textures/gui/container/inventory.png");o.width="540px",o.height="528px",o.zIndex=10,t.inventory.addControl(o);const l=new u.Rectangle;l.zIndex=20,l.verticalAlignment=2,l.top="201px",l.height="60px",l.width="492px",l.thickness=0,t.inventory.addControl(l);const h=new Array(9),d=new Array(36),p=[];for(let e=1;e<4;e++){const r=new u.Rectangle;r.zIndex=20,r.verticalAlignment=2,r.height="60px",r.width="492px",r.top=27+18*(e-1)*3+"px",r.thickness=0,t.inventory.addControl(r),p[e]=r;for(let t=9*e;t<9*e+9;t++){d[t]=f(3);const e=d[t].container;e.zIndex=20,e.left=t%9*54-216+"px",e.onPointerClickObservable.add(e=>{let r="left";switch(e.buttonIndex){case 0:r="left";break;case 1:r="middle";break;case 2:r="right"}console.log({slot:t+27*c,type:r}),n.send("actionInventoryClick",{slot:t+27*c,type:r,inventory:"main"})}),e.onPointerEnterObservable.add(t=>{e.background="#ffffff22"}),e.onPointerOutObservable.add(t=>{e.background="#00000000"}),e.isPointerBlocker=!0,r.addControl(e)}}const m=f(3);m.container.zIndex=50,m.container.verticalAlignment=0,m.container.horizontalAlignment=0,t.inventory.addControl(m.container);for(let e=0;e<9;e++){h[e]=f(3);const t=h[e].container;t.zIndex=20,t.left=54*e-216+"px",t.onPointerClickObservable.add(t=>{let r="left";switch(t.buttonIndex){case 0:r="left";break;case 1:r="middle";break;case 2:r="right"}n.send("actionInventoryClick",{slot:e,type:r,inventory:"main"})}),t.onPointerEnterObservable.add(e=>{t.background="#ffffff22"}),t.onPointerOutObservable.add(e=>{t.background="#00000000"}),t.isPointerBlocker=!0,l.addControl(t)}const v=new u.Rectangle;v.zIndex=30,v.verticalAlignment=2,v.top="-117px",v.left="-216px",v.height="216px",v.width="54px",v.thickness=0,t.inventory.addControl(v);const y=new Array(4);for(let e=0;e<4;e++){y[e]=f(3);const t=y[e].container;t.zIndex=20,t.verticalAlignment=0,t.top=54*e+"px",t.onPointerClickObservable.add(t=>{let r="left";switch(t.buttonIndex){case 0:r="left";break;case 1:r="middle";break;case 2:r="right"}console.log({slot:e,type:r,inventory:"armor"}),n.send("actionInventoryClick",{slot:e,type:r,inventory:"armor"})}),t.onPointerEnterObservable.add(e=>{t.background="#ffffff22"}),t.onPointerOutObservable.add(e=>{t.background="#00000000"}),t.isPointerBlocker=!0,v.addControl(t)}if(i.onPointerMoveObservable.add(e=>{m.container.left=e.x,m.container.top=e.y}),r().size>36){const e=new u.Rectangle;e.height="45px",e.width="66px",e.zIndex=25,e.thickness=0,e.top="-18px",e.left="213px",t.inventory.addControl(e);const n=r(),i=new u.Image("button1","./textures/gui/button-right.png");i.zIndex=25,i.horizontalAlignment=1,i.height="45px",i.width="33px",i.onPointerClickObservable.add(e=>{c+=1,9+27*c>n.size&&(c=0)}),i.isPointerBlocker=!0,e.addControl(i);const o=new u.Image("button2","./textures/gui/button-left.png");o.zIndex=25,o.horizontalAlignment=0,o.height="45px",o.width="33px",o.onPointerClickObservable.add(e=>{c-=1,c<0&&(c=Math.round(27/((n.size-9)/27)/3-1))}),o.isPointerBlocker=!0,e.addControl(o)}e.on("beforeRender",async()=>{const e=r();if(null!=e.tempslot&&null!=e.tempslot.id){m.item.alpha=1,m.count.alpha=1;let t=a.items[e.tempslot.id].texture+".png";t.startsWith("https://")&&t.startsWith("http://")||(t="./textures/"+t),m.item.source=t,1==e.tempslot.count?m.count.text="":e.tempslot.count<=10?m.count.text=" "+e.tempslot.count.toString():m.count.text=e.tempslot.count.toString()}else m.item.alpha=0,m.count.alpha=0,m.item.source="",m.count.text="";for(let t=0;t<9;t++)if(null!=e.items[t]&&null!=e.items[t].id){h[t].item.alpha=1,h[t].count.alpha=1;let n=a.items[e.items[t].id].texture+".png";n.startsWith("https://")&&n.startsWith("http://")||(n="./textures/"+n),h[t].item.source=n,1==e.items[t].count?h[t].count.text="":e.items[t].count<=10?h[t].count.text=" "+e.items[t].count.toString():h[t].count.text=e.items[t].count.toString()}else h[t].item.alpha=0,h[t].count.alpha=0,h[t].item.source="",h[t].count.text="";for(let t=9;t<36;t++){const n=27*c+t;if(null!=e.items[n]&&null!=e.items[n].id){d[t].item.alpha=1,d[t].count.alpha=1;let r=a.items[e.items[n].id].texture+".png";r.startsWith("https://")&&r.startsWith("http://")||(r="./textures/"+r),d[t].item.source=r,1==e.items[n].count?d[t].count.text="":e.items[n].count<=10?d[t].count.text=" "+e.items[n].count.toString():d[t].count.text=e.items[n].count.toString()}else n>e.size?(d[t].item.alpha=1,d[t].count.alpha=1,d[t].item.source="./textures/gui/noslot.png",d[t].count.text=""):(d[t].item.alpha=0,d[t].count.alpha=0,d[t].item.source="",d[t].count.text="")}for(let t=0;t<4;t++)if(null!=e.armor.items[t]&&null!=e.armor.items[t].id){y[t].count.alpha=1;let n=a.items[e.armor.items[t].id].texture+".png";n.startsWith("https://")&&n.startsWith("http://")||(n="./textures/"+n),y[t].item.source=n,1==e.armor.items[t].count?y[t].count.text="":e.armor.items[t].count<=10?y[t].count.text=" "+e.armor.items[t].count.toString():y[t].count.text=e.armor.items[t].count.toString()}else{let e;switch(y[t].count.alpha=0,t){case 0:e="./textures/item/empty_armor_slot_helmet.png";break;case 1:e="./textures/item/empty_armor_slot_chestplate.png";break;case 2:e="./textures/item/empty_armor_slot_leggings.png";break;case 3:e="./textures/item/empty_armor_slot_boots.png"}y[t].item.source=e,y[t].count.text=""}})}function f(e){const t={item:new u.Image("hotbar",""),container:new u.Rectangle,count:new u.TextBlock},n=t.container;n.zIndex=20,n.height=16*e+"px",n.width=16*e+"px",n.thickness=0;const r=t.item;r.width=16*e+"px",r.height=16*e+"px",n.addControl(r);const i=t.count;return i.text="",i.fontFamily="silkscreen",i.color="#f0f0f0",i.fontSize=8*e+"px",i.left=2*e+"px",i.top=4*e+"px",i.shadowColor="#111111",i.shadowOffsetX=e,i.shadowOffsetY=e,n.addControl(i),t}t.buildInventory=l,t.createSlot=f,window.inv=l},,,function(e,t,n){"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),r=0,i=2,o=!0;for(;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}}))}},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){"use strict";t.Service=n(340)},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";e.exports=function(e){for(var t,n=o.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(o.compareFieldsById),u=0;u<a.length;++u){var c=a[u].resolve(),l=e._fieldsArray.indexOf(c),f=c.resolvedType instanceof r?"int32":c.type,h=i.basic[f];t="m"+o.safeProp(c.name),c.map?(n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|i.mapKey[c.keyType],c.keyType),void 0===h?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,t):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,f,t),n("}")("}")):c.repeated?(n("if(%s!=null&&%s.length){",t,t),c.packed&&void 0!==i.packed[f]?n("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",f,t)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",t),void 0===h?s(n,c,l,t+"[i]"):n("w.uint32(%i).%s(%s[i])",(c.id<<3|h)>>>0,f,t)),n("}")):(c.optional&&n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,c.name),void 0===h?s(n,c,l,t):n("w.uint32(%i).%s(%s)",(c.id<<3|h)>>>0,f,t))}return n("return w")};var r=n(88),i=n(131),o=n(62);function s(e,t,n,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(t.id<<3|2)>>>0)}},function(e,t,n){"use strict";e.exports=function(e){var t=o.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var a=e._fieldsArray[n].resolve(),u=a.resolvedType instanceof r?"int32":a.type,c="m"+o.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[a.keyType]?t("k=%j",i.defaults[a.keyType]):t("k=null"),void 0!==i.defaults[u]?t("value=%j",i.defaults[u]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===i.basic[u]?t("value=types[%i].decode(r,r.uint32())",n):t("value=r.%s()",u),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==i.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',c):t("%s[k]=value",c)):a.repeated?(t("if(!(%s&&%s.length))",c,c)("%s=[]",c),void 0!==i.packed[u]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,u)("}else"),void 0===i.basic[u]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,n):t("%s.push(r.%s())",c,u)):void 0===i.basic[u]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,n):t("%s=r.%s()",c,u),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var l=e._fieldsArray[n];l.required&&t("if(!m.hasOwnProperty(%j))",l.name)("throw util.ProtocolError(%j,{instance:m})",s(l))}return t("return m")};var r=n(88),i=n(131),o=n(62);function s(e){return"missing required '"+e.name+"'"}},function(e,t,n){"use strict";e.exports=function(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n=e.oneofsArray,r={};n.length&&t("var p={}");for(var u=0;u<e.fieldsArray.length;++u){var c=e._fieldsArray[u].resolve(),l="m"+i.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)t("if(!util.isObject(%s))",l)("return%j",o(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),a(t,c,"k[i]"),s(t,c,u,l+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",l)("return%j",o(c,"array"))("for(var i=0;i<%s.length;++i){",l),s(t,c,u,l+"[i]")("}");else{if(c.partOf){var f=i.safeProp(c.partOf.name);1===r[c.partOf.name]&&t("if(p%s===1)",f)("return%j",c.partOf.name+": multiple values"),r[c.partOf.name]=1,t("p%s=1",f)}s(t,c,u,l)}c.optional&&t("}")}return t("return null")};var r=n(88),i=n(62);function o(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function s(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",i)("default:")("return%j",o(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),a=0;a<s.length;++a)e("case %i:",t.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",o(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",o(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",o(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",o(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",o(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",o(t,"buffer"))}return e}function a(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",o(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",o(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",o(t,"boolean key"))}return e}},function(e,t,n){"use strict";var r=t,i=n(88),o=n(62);function s(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",r);for(var o=t.resolvedType.values,s=Object.keys(o),a=0;a<s.length;++a)t.repeated&&o[s[a]]===t.typeDefault&&e("default:"),e("case%j:",s[a])("case %i:",o[s[a]])("m%s=%j",r,o[s[a]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var u=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,u)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,u?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function a(e,t,n,r){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,n,r,r):e("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,o?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,n=o.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<t.length;++r){var a=t[r].resolve(),u=o.safeProp(a.name);a.map?(n("if(d%s){",u)('if(typeof d%s!=="object")',u)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",u)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",u),s(n,a,r,u+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",u)("if(!Array.isArray(d%s))",u)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",u)("for(var i=0;i<d%s.length;++i){",u),s(n,a,r,u+"[i]")("}")("}")):(a.resolvedType instanceof i||n("if(d%s!=null){",u),s(n,a,r,u),a.resolvedType instanceof i||n("}"))}return n("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);if(!t.length)return o.codegen()("return {}");for(var n=o.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],s=[],u=[],c=0;c<t.length;++c)t[c].partOf||(t[c].resolve().repeated?r:t[c].map?s:u).push(t[c]);if(r.length){for(n("if(o.arrays||o.defaults){"),c=0;c<r.length;++c)n("d%s=[]",o.safeProp(r[c].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),c=0;c<s.length;++c)n("d%s={}",o.safeProp(s[c].name));n("}")}if(u.length){for(n("if(o.defaults){"),c=0;c<u.length;++c){var l=u[c],f=o.safeProp(l.name);if(l.resolvedType instanceof i)n("d%s=o.enums===String?%j:%j",f,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",f)("}else")("d%s=o.longs===String?%j:%i",f,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var h="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",f,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",f,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",f,f)("}")}else n("d%s=%j",f,l.typeDefault)}n("}")}var d=!1;for(c=0;c<t.length;++c){l=t[c];var p=e._fieldsArray.indexOf(l);f=o.safeProp(l.name);l.map?(d||(d=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",f,f)("d%s={}",f)("for(var j=0;j<ks2.length;++j){"),a(n,l,p,f+"[ks2[j]]")("}")):l.repeated?(n("if(m%s&&m%s.length){",f,f)("d%s=[]",f)("for(var j=0;j<m%s.length;++j){",f),a(n,l,p,f+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",f,l.name),a(n,l,p,f),l.partOf&&n("if(o.oneofs)")("d%s=%j",o.safeProp(l.partOf.name),l.name)),n("}")}return n("return d")}},function(e,t,n){"use strict";var r=t,i=n(199);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),n=this.lookup(t);if(n){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:n.encode(n.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var n="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(r);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var s=e.$type.toObject(e,t);return""===n&&(n="type.googleapis.com/"),r=n+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),s["@type"]=r,s}return this.toObject(e,t)}}},function(e,t,n){"use strict";e.exports=d;var r=/[\s{}=;:[\],'"()<>]/g,i=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,o=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,s=/^ *[*/]+ */,a=/^\s*\*?\/*/,u=/\n/g,c=/\s/,l=/\\(.?)/g,f={0:"\0",r:"\r",n:"\n",t:"\t"};function h(e){return e.replace(l,(function(e,t){switch(t){case"\\":case"":return t;default:return f[t]||""}}))}function d(e,t){e=e.toString();var n=0,l=e.length,f=1,d=null,p=null,m=0,v=!1,y=!1,g=[],b=null;function w(e){return Error("illegal "+e+" (line "+f+")")}function k(t){return e.charAt(t)}function _(n,r,i){d=e.charAt(n++),m=f,v=!1,y=i;var o,c=n-(t?2:3);do{if(--c<0||"\n"===(o=e.charAt(c))){v=!0;break}}while(" "===o||"\t"===o);for(var l=e.substring(n,r).split(u),h=0;h<l.length;++h)l[h]=l[h].replace(t?a:s,"").trim();p=l.join("\n").trim()}function x(t){var n=E(t),r=e.substring(t,n);return/^\s*\/{1,2}/.test(r)}function E(e){for(var t=e;t<l&&"\n"!==k(t);)t++;return t}function S(){if(g.length>0)return g.shift();if(b)return function(){var t="'"===b?o:i;t.lastIndex=n-1;var r=t.exec(e);if(!r)throw w("string");return n=t.lastIndex,O(b),b=null,h(r[1])}();var s,a,u,d,p,m=0===n;do{if(n===l)return null;for(s=!1;c.test(u=k(n));)if("\n"===u&&(m=!0,++f),++n===l)return null;if("/"===k(n)){if(++n===l)throw w("comment");if("/"===k(n))if(t){if(d=n,p=!1,x(n)){p=!0;do{if((n=E(n))===l)break;n++}while(x(n))}else n=Math.min(l,E(n)+1);p&&_(d,n,m),f++,s=!0}else{for(p="/"===k(d=n+1);"\n"!==k(++n);)if(n===l)return null;++n,p&&_(d,n-1,m),++f,s=!0}else{if("*"!==(u=k(n)))return"/";d=n+1,p=t||"*"===k(d);do{if("\n"===u&&++f,++n===l)throw w("comment");a=u,u=k(n)}while("*"!==a||"/"!==u);++n,p&&_(d,n-2,m),s=!0}}}while(s);var v=n;if(r.lastIndex=0,!r.test(k(v++)))for(;v<l&&!r.test(k(v));)++v;var y=e.substring(n,n=v);return'"'!==y&&"'"!==y||(b=y),y}function O(e){g.push(e)}function T(){if(!g.length){var e=S();if(null===e)return null;O(e)}return g[0]}return Object.defineProperty({next:S,peek:T,push:O,skip:function(e,t){var n=T();if(n===e)return S(),!0;if(!t)throw w("token '"+n+"', '"+e+"' expected");return!1},cmnt:function(e){var n=null;return void 0===e?m===f-1&&(t||"*"===d||v)&&(n=y?p:null):(m<e&&T(),m!==e||v||!t&&"/"!==d||(n=y?null:p)),n}},"line",{get:function(){return f}})}d.unescape=h},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});n(119);const i=n(73),o=r(n(348)),s=n(191),a=n(317),u=n(318),c=n(323),l=n(324),f=n(76),h=n(192),d=r(n(325)),p=n(349),m=n(204),v=new o.default(f.noaOpts());function y(e){console.log("Username: "+f.gameSettings.nickname,"Server: "+e.server);let t="";e.on("loginRequest",(function(n){document.getElementById("gui-container").innerHTML="",e.send("loginResponse",{username:f.gameSettings.nickname,protocol:f.gameProtocol,mobile:!1}),e.on("playerKick",(function(e){console.log("You has been kicked from server \nReason: "+e.reason),t=e.reason}));let r=0;const o={};e.on("playerEntity",(function(e){console.log("Ignoring player-entity: "+e.uuid),r=e.uuid,null!=o[e.uuid]&&null!=v&&v.ents.deleteEntity(o[e.uuid]),delete o[e.uuid]})),e.on("loginSuccess",(function(t){v.inputs.state;const f=[];s.registerBlocks(v,JSON.parse(t.blocksDef)),s.registerItems(v,JSON.parse(t.itemsDef)),l.defineModelComp(v),u.setupControls(v,e),u.setupPlayer(v,JSON.parse(t.inventory),JSON.parse(t.armor)),d.default(v,e,t,n),v.ents.setPosition(v.playerEntity,t.xPos,t.yPos,t.zPos),e.on("worldChunk",(function(e){f.push(e)})),e.on("worldBlockUpdate",(function(e){v.setBlock(e.id,e.x,e.y,e.z)})),e.on("playerInventory",(function(e){const t=JSON.parse(e.inventory);"armor"==e.type?v.ents.getState(v.playerEntity,"inventory").armor=t:"hook"==e.type?v.ents.getState(v.playerEntity,"inventory").hook=t:(v.ents.getState(v.playerEntity,"inventory").items=t.items,v.ents.getState(v.playerEntity,"inventory").tempslot=t.tempslot)})),e.on("playerSlotUpdate",(function(e){const t=JSON.parse(e.data);console.log(e);const n=v.ents.getState(v.playerEntity,"inventory");"temp"==e.type?n.tempslot=t:"main"==e.type?n.items[e.slot]=t:"armor"==e.type?n.armor.items[e.slot]=t:"hook"==e.type&&(n.hook.items[e.slot]=t)})),e.on("chatMessage",(function(e){console.log("Chat: "+e.message)})),e.on("tabUpdate",(function(e){})),e.on("playerTeleport",(function(e){v.ents.setPosition(v.playerEntity,e.x,e.y,e.z),console.log("Teleport: ",e)})),e.on("playerMovementChange",(function(e){v.ents.getMovement(v.playerEntity)[e.key]=e.value})),e.on("entityCreate",(async function(e){if(r!=e.uuid){const t=JSON.parse(e.data);o[e.uuid]=v.ents.add(Object.values(t.position),1,2,null,null,!1,!0),l.applyModel(o[e.uuid],t.model,t.texture,t.offset,t.nametag,t.name,t.hitbox)}})),e.on("entityRemove",(function(e){null!=o[e.uuid]&&v.ents.deleteEntity(o[e.uuid]),delete o[e.uuid]})),e.on("entityMove",(function(e){if(null!=o[e.uuid]){var t=[e.x,e.y,e.z];v.ents.getState(o[e.uuid],"position").newPosition=t,v.ents.getState(o[e.uuid],"position").rotation=2*e.rotation}})),e.on("soundPlay",(function(e){c.playSound(e.sound,e.volume,null!=e.x?[e.x,e.y,e.z]:null,v)}));const h=v.ents.getState(v.playerEntity,"position");setTimeout((function(){setInterval((async function(){0!=f.length&&(a.setChunk(f[0],v),f.shift())}),50)}),500);let p=[],m=0;v.on("tick",(function(){const t=v.camera.heading;JSON.stringify(p)==JSON.stringify(h.position)&&m==t||(p=[...h.position],m=t,e.send("actionMove",{x:h.position[0],y:h.position[1],z:h.position[2],rotation:v.camera.heading}))})),v.on("beforeRender",(async function(){Object.values(o).forEach((async function(e){const t=v.ents.getState(e,"position").position,n=v.ents.getState(e,"position").newPosition;if(null!=v.ents.getState(e,v.entities.names.mesh)&&null!=n&&null!=t){let r=i.create();i.lerp(r,t,n,.1);const o=v.ents.getState(e,"position").rotation;v.ents.setPosition(e,r[0],r[1],r[2]);const s=v.ents.getState(e,v.entities.names.mesh).mesh.rotation.y;v.ents.getState(e,v.entities.names.mesh).mesh.rotation.y=o/2-s>5?o/2:(o/2+s)/2,null!=v.ents.getState(e,"model").nametag&&(v.ents.getState(e,"model").nametag.rotation.y=v.camera.heading-v.ents.getState(e,v.entities.names.mesh).mesh.rotation.y,v.ents.getState(e,"model").nametag.rotation.x=v.camera.pitch)}}))}))}))})),e.onclose=function(){}}h.constructScreen(v),document.fonts.load('10pt "silkscreen"'),p.buildMain(y),window.connect=e=>{y(new m.Socket(e))},window.onload=function(){const e=new URLSearchParams(window.location.search);if(e.get("server")){y(new m.Socket("ws://"+e.get("server")))}}},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t){e.exports=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},function(e,t,n){e.exports=function(e,t){var n=r(e[0],e[1],e[2]),s=r(t[0],t[1],t[2]);i(n,n),i(s,s);var a=o(n,s);return a>1?0:Math.acos(a)};var r=n(208),i=n(209),o=n(210)},function(e,t){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},function(e,t){e.exports=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}},function(e,t,n){e.exports=function(e,t){var n=e[0],i=e[1],o=e[2],s=t[0],a=t[1],u=t[2];return Math.abs(n-s)<=r*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-a)<=r*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(o-u)<=r*Math.max(1,Math.abs(o),Math.abs(u))};var r=n(206)},function(e,t){e.exports=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}},function(e,t,n){e.exports=n(211)},function(e,t,n){e.exports=n(212)},function(e,t,n){e.exports=n(213)},function(e,t){e.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}},function(e,t){e.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}},function(e,t){e.exports=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}},function(e,t){e.exports=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}},function(e,t){e.exports=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}},function(e,t){e.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}},function(e,t,n){e.exports=n(214)},function(e,t,n){e.exports=n(215)},function(e,t,n){e.exports=n(216)},function(e,t,n){e.exports=n(217)},function(e,t){e.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}},function(e,t){e.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],u=n[2];return e[0]=i*u-o*a,e[1]=o*s-r*u,e[2]=r*a-i*s,e}},function(e,t){e.exports=function(e,t,n,r){var i=t[0],o=t[1],s=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=s+r*(n[2]-s),e}},function(e,t){e.exports=function(e,t){t=t||1;var n=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],u=n[2],c=n[3],l=c*r+a*o-u*i,f=c*i+u*r-s*o,h=c*o+s*i-a*r,d=-s*r-a*i-u*o;return e[0]=l*c+d*-s+f*-u-h*-a,e[1]=f*c+d*-a+h*-s-l*-u,e[2]=h*c+d*-u+l*-a-f*-s,e}},function(e,t){e.exports=function(e,t,n,r){var i=n[1],o=n[2],s=t[1]-i,a=t[2]-o,u=Math.sin(r),c=Math.cos(r);return e[0]=t[0],e[1]=i+s*c-a*u,e[2]=o+s*u+a*c,e}},function(e,t){e.exports=function(e,t,n,r){var i=n[0],o=n[2],s=t[0]-i,a=t[2]-o,u=Math.sin(r),c=Math.cos(r);return e[0]=i+a*u+s*c,e[1]=t[1],e[2]=o+a*c-s*u,e}},function(e,t){e.exports=function(e,t,n,r){var i=n[0],o=n[1],s=t[0]-i,a=t[1]-o,u=Math.sin(r),c=Math.cos(r);return e[0]=i+s*c-a*u,e[1]=o+s*u+a*c,e[2]=t[2],e}},function(e,t,n){e.exports=function(e,t,n,i,o,s){var a,u;t||(t=3);n||(n=0);u=i?Math.min(i*t+n,e.length):e.length;for(a=n;a<u;a+=t)r[0]=e[a],r[1]=e[a+1],r[2]=e[a+2],o(r,r,s),e[a]=r[0],e[a+1]=r[1],e[a+2]=r[2];return e};var r=n(207)()},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o){var s=+t[0],a=+t[1],u=+t[2],c=+n[0],l=+n[1],f=+n[2],h=Math.sqrt(c*c+l*l+f*f);if(0===h)throw new Error("Can't raycast along a zero vector");return function(e,t,n,r,i,o,s,a,u,c){for(var l=0,f=Math.floor,h=0|f(t),d=0|f(n),p=0|f(r),m=i>0?1:-1,v=o>0?1:-1,y=s>0?1:-1,g=Math.abs(1/i),b=Math.abs(1/o),w=Math.abs(1/s),k=g<1/0?g*(m>0?h+1-t:t-h):1/0,_=b<1/0?b*(v>0?d+1-n:n-d):1/0,x=w<1/0?w*(y>0?p+1-r:r-p):1/0,E=-1;l<=a;){var S=e(h,d,p);if(S)return u&&(u[0]=t+l*i,u[1]=n+l*o,u[2]=r+l*s),c&&(c[0]=c[1]=c[2]=0,0===E&&(c[0]=-m),1===E&&(c[1]=-v),2===E&&(c[2]=-y)),S;k<_?k<x?(h+=m,l=k,k+=g,E=0):(p+=y,l=x,x+=w,E=2):_<x?(d+=v,l=_,_+=b,E=1):(p+=y,l=x,x+=w,E=2)}return u&&(u[0]=t+l*i,u[1]=n+l*o,u[2]=r+l*s),c&&(c[0]=c[1]=c[2]=0),0}(e,s,a,u,c/=h,l/=h,f/=h,r=void 0===r?64:+r,i,o)}},function(e,t,n){"use strict";var r=n(125).EventEmitter,i=n(277),o=n(281),s=n(282),a=n(283),u=n(284),c=n(285),l=n(205),f=Math.min;n(286);var h=n(287),d=n(288),p=function(){var e,t,n=new Array(256);for(e=0;e<256;++e)n[e]="UNK";for(e in s)"<"===(t=s[e]).charAt(0)&&">"===t.charAt(t.length-1)&&(t=t.substring(1,t.length-1)),t=t.replace(/\s/g,"-"),n[parseInt(e)]=t;return n}(),m=u(Object.keys(a(p)));function v(e){return c.eq(m,e)}function y(e){return v(p[e])}function g(){r.call(this),this._curKeyState=new Array(m.length),this._pressCount=new Array(m.length),this._releaseCount=new Array(m.length),this._tickInterval=null,this._rafHandle=null,this._tickRate=0,this._lastTick=d(),this._frameTime=0,this._paused=!0,this._width=0,this._height=0,this._wantFullscreen=!1,this._wantPointerLock=!1,this._fullscreenActive=!1,this._pointerLockActive=!1,this._rafFunction=T.bind(void 0,this,!0),this.preventDefaults=!0,this.stopPropagation=!1;for(var e=0;e<m.length;++e)this._curKeyState[e]=!1,this._pressCount[e]=this._releaseCount[e]=0;this.element=null,this.bindings={},this.frameSkip=100,this.tickCount=0,this.frameCount=0,this.startTime=d(),this.tickTime=this._tickRate,this.frameTime=10,this.stickyFullscreen=!1,this.stickyPointerLock=!1,this.scroll=[0,0,0],this.mouseX=0,this.mouseY=0,this.prevMouseX=0,this.prevMouseY=0}i.inherits(g,r);var b=g.prototype;function w(e,t,n){if(n in t){for(var r=t[n],i=0,o=0,s=r.length;o<s;++o)i+=e[v(r[o])];return i}var a=v(n);return a>=0?e[a]:0}function k(e){var t=e.element;e._wantFullscreen&&!e._fullscreenActive&&(t.requestFullscreen||t.requestFullScreen||t.webkitRequestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullscreen||t.mozRequestFullScreen||function(){}).call(t);e._wantPointerLock&&!e._pointerLockActive&&(t.requestPointerLock||t.webkitRequestPointerLock||t.mozRequestPointerLock||t.msRequestPointerLock||t.oRequestPointerLock||function(){}).call(t)}b.keyNames=m,b.bind=function(e){var t,n;t=e in this.bindings?this.bindings[e]:[];for(var r=1,i=arguments.length;r<i;++r)if(v(n=arguments[r])>=0)t.push(n);else if(n in this.bindings)for(var o=this.bindings[n],s=0;s<o.length;++s)t.push(o[s]);(t=u(t)).length>0&&(this.bindings[e]=t),this.emit("bind",e,t)},b.unbind=function(e){e in this.bindings&&delete this.bindings[e],this.emit("unbind",e)},b.down=function(e){return function(e,t,n){if(n in t){for(var r=t[n],i=0,o=r.length;i<o;++i)if(e[v(r[i])])return!0;return!1}var s=v(n);return s>=0&&e[s]}(this._curKeyState,this.bindings,e)},b.wasDown=function(e){return this.down(e)||!!this.press(e)},b.up=function(e){return!this.down(e)},b.wasUp=function(e){return this.up(e)||!!this.release(e)},b.press=function(e){return w(this._pressCount,this.bindings,e)},b.release=function(e){return w(this._releaseCount,this.bindings,e)},Object.defineProperty(b,"paused",{get:function(){return this._paused},set:function(e){!!e!==this._paused&&(this._paused?(this._paused=!1,this._lastTick=d()-Math.floor(this._frameTime*this._tickRate),this._tickInterval=setInterval(T,this._tickRate,this,!1),this._rafHandle=requestAnimationFrame(this._rafFunction)):(this._paused=!0,this._frameTime=f(1,(d()-this._lastTick)/this._tickRate),clearInterval(this._tickInterval)))}});var _=document.exitFullscreen||document.cancelFullscreen||document.cancelFullScreen||document.webkitCancelFullscreen||document.webkitCancelFullScreen||document.mozCancelFullscreen||document.mozCancelFullScreen||function(){};function x(e){e._fullscreenActive=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||!1,!e.stickyFullscreen&&e._fullscreenActive&&(e._wantFullscreen=!1)}Object.defineProperty(b,"fullscreen",{get:function(){return this._fullscreenActive},set:function(e){!e?(this._wantFullscreen=!1,(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||!1)&&_.call(document)):(this._wantFullscreen=!0,k(this));return this._fullscreenActive}});var E=document.exitPointerLock||document.webkitExitPointerLock||document.mozExitPointerLock||function(){};function S(e,t){e._pointerLockActive=e.element===(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||null),!e.stickyPointerLock&&e._pointerLockActive&&(e._wantPointerLock=!1)}function O(e,t,n){e._curKeyState[t]!==n&&(n?e._pressCount[t]++:e._releaseCount[t]++,e._curKeyState[t]=n)}function T(e,t){!function(e){var t,n,r,i=d()+e.frameSkip,o=e._pressCount,s=e._releaseCount,a=e._tickRate,u=m.length;for(;!e._paused&&d()>=e._lastTick+a;){if(d()>i)return void(e._lastTick=d()+a);for(n=d(),e.emit("tick"),r=d(),e.tickTime=r-n,++e.tickCount,e._lastTick+=a,t=0;t<u;++t)o[t]=s[t]=0;e._pointerLockActive?(e.prevMouseX=e.mouseX=e.width>>1,e.prevMouseY=e.mouseY=e.height>>1):(e.prevMouseX=e.mouseX,e.prevMouseY=e.mouseY),e.scroll[0]=e.scroll[1]=e.scroll[2]=0}}(e),t&&function(e){var t;e._rafHandle=requestAnimationFrame(e._rafFunction),t=e._paused?e._frameTime:f(1,(d()-e._lastTick)/e._tickRate);++e.frameCount;var n=d();e.emit("render",t);var r=d();e.frameTime=r-n}(e)}function A(e,t){e.preventDefaults&&t.preventDefault(),e.stopPropagation&&t.stopPropagation()}function C(e,t){A(e,t);var n=y(t.keyCode||t.char||t.which||t.charCode);n>=0&&O(e,n,!1)}function M(e,t){if(function(e){return document.activeElement===document.body||document.activeElement===e.element}(e))if(A(e,t),t.metaKey)F(e,t);else{var n=y(t.keyCode||t.char||t.which||t.charCode);n>=0&&O(e,n,!0)}}Object.defineProperty(b,"pointerLock",{get:function(){return this._pointerLockActive},set:function(e){return!!e?(this._wantPointerLock=!0,k(this)):(this._wantPointerLock=!1,E.call(document)),this._pointerLockActive}}),Object.defineProperty(b,"width",{get:function(){return this.element.clientWidth}}),Object.defineProperty(b,"height",{get:function(){return this.element.clientHeight}});var P=l(32).map((function(e){return v("mouse-"+(e+1))}));function j(e,t){if(A(e,t),e._pointerLockActive){var n=t.movementX||t.mozMovementX||t.webkitMovementX||0,r=t.movementY||t.mozMovementY||t.webkitMovementY||0;e.mouseX+=n,e.mouseY+=r}else e.mouseX=t.clientX-e.element.offsetLeft,e.mouseY=t.clientY-e.element.offsetTop;return!1}function I(e,t){return A(e,t),O(e,P[t.button],!0),!1}function D(e,t){return A(e,t),O(e,P[t.button],!1),!1}function L(e,t){return A(e,t),e._pointerLockActive?(e.prevMouseX=e.mouseX=e.width>>1,e.prevMouseY=e.mouseY=e.height>>1):(e.prevMouseX=e.mouseX=t.clientX-e.element.offsetLeft,e.prevMouseY=e.mouseY=t.clientY-e.element.offsetTop),!1}function B(e,t){return A(e,t),function(e,t){for(var n=0;n<32;++n)O(e,P[n],!!(t&1<<n))}(e,0),!1}function R(e,t){A(e,t);var n=1;switch(t.deltaMode){case 0:n=1;break;case 1:n=12;break;case 2:n=e.height}return e.scroll[0]+=t.deltaX*n,e.scroll[1]+=t.deltaY*n,e.scroll[2]+=t.deltaZ*n||0,!1}function N(e,t){return A(e,t),!1}function F(e,t){var n,r=m.length,i=e._curKeyState,o=e._releaseCount;for(n=0;n<r;++n)i[n]&&++o[n],i[n]=!1;return!1}function z(e,t){var n=0|e.element.clientWidth,r=0|e.element.clientHeight;n===e._width&&r===e._height||(e._width=n,e._height=r,e.emit("resize",n,r))}function U(){var e=document.createElement("div");return e.tabindex=1,e.style.position="absolute",e.style.left="0px",e.style.right="0px",e.style.top="0px",e.style.bottom="0px",e.style.height="100%",e.style.overflow="hidden",document.body.appendChild(e),document.body.style.overflow="hidden",document.body.style.height="100%",e}e.exports=function(e){var t=!!(e=e||{}).fullscreen,n=t;void 0!==typeof e.pointerLock&&(n=!!e.pointerLock);var r=new g;return r._tickRate=e.tickRate||30,r.frameSkip=e.frameSkip||5*(r._tickRate+5),r.stickyFullscreen=!!e.stickyFullscreen||!!e.sticky,r.stickyPointerLock=!!e.stickyPointerLock||!!e.sticky,e.bindings&&(r.bindings=e.bindings),setTimeout((function(){o((function(){var i=e.element;if("string"==typeof i){var o=document.querySelector(i);o||(o=document.getElementById(i)),o||(o=document.getElementByClass(i)[0]),o||(o=U()),r.element=o}else r.element="object"==typeof i&&i?i:"function"==typeof i?i():U();r.element.style&&(r.element.style["-webkit-touch-callout"]="none",r.element.style["-webkit-user-select"]="none",r.element.style["-khtml-user-select"]="none",r.element.style["-moz-user-select"]="none",r.element.style["-ms-user-select"]="none",r.element.style["user-select"]="none"),r._width=r.element.clientWidth,r._height=r.element.clientHeight;var s=z.bind(void 0,r);"undefined"!=typeof MutationObserver?new MutationObserver(s).observe(r.element,{attributes:!0,subtree:!0}):r.element.addEventListener("DOMSubtreeModified",s,!1);window.addEventListener("resize",s,!1),window.addEventListener("keydown",M.bind(void 0,r),!1),window.addEventListener("keyup",C.bind(void 0,r),!1),r.element.oncontextmenu=N.bind(void 0,r),r.element.addEventListener("mousedown",I.bind(void 0,r),!1),r.element.addEventListener("mouseup",D.bind(void 0,r),!1),r.element.addEventListener("mousemove",j.bind(void 0,r),!1),r.element.addEventListener("mouseenter",L.bind(void 0,r),!1);var a=B.bind(void 0,r);r.element.addEventListener("mouseleave",a,!1),r.element.addEventListener("mouseout",a,!1),window.addEventListener("mouseleave",a,!1),window.addEventListener("mouseout",a,!1);var u=F.bind(void 0,r);r.element.addEventListener("blur",u,!1),r.element.addEventListener("focusout",u,!1),r.element.addEventListener("focus",u,!1),window.addEventListener("blur",u,!1),window.addEventListener("focusout",u,!1),window.addEventListener("focus",u,!1),h(r.element,R.bind(void 0,r),!1);var c=x.bind(void 0,r);document.addEventListener("fullscreenchange",c,!1),document.addEventListener("mozfullscreenchange",c,!1),document.addEventListener("webkitfullscreenchange",c,!1),r.element.addEventListener("click",k.bind(void 0,r),!1);var l=S.bind(void 0,r);document.addEventListener("pointerlockchange",l,!1),document.addEventListener("mozpointerlockchange",l,!1),document.addEventListener("webkitpointerlockchange",l,!1),document.addEventListener("pointerlocklost",l,!1),document.addEventListener("webkitpointerlocklost",l,!1),document.addEventListener("mozpointerlocklost",l,!1),r.fullscreen=t,r.pointerLock=n,r.bind("mouse-left","mouse-1"),r.bind("mouse-right","mouse-3"),r.bind("mouse-middle","mouse-2"),r._lastTick=d(),r.startTime=d(),r.paused=!1,r.emit("init")}))}),0),r}},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),u=r[n];n<o;u=r[++n])m(u)||!w(u)?s+=" "+u:s+=" "+a(u);return s},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,s={};function a(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function c(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&x(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return y(i)||(i=l(e,i,r)),i}var o=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(v(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,n);if(o)return o;var s=Object.keys(n),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),_(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(x(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return e.stylize(Date.prototype.toString.call(n),"date");if(_(n))return f(n)}var c,w="",E=!1,S=["{","}"];(d(n)&&(E=!0,S=["[","]"]),x(n))&&(w=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(w=" "+RegExp.prototype.toString.call(n)),k(n)&&(w=" "+Date.prototype.toUTCString.call(n)),_(n)&&(w=" "+f(n)),0!==s.length||E&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=E?function(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)A(t,String(s))?o.push(h(e,t,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))})),o}(e,n,r,a,s):s.map((function(t){return h(e,n,r,a,t,E)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,w,S)):S[0]+w+S[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),A(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=m(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),g(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function d(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return"number"==typeof e}function y(e){return"string"==typeof e}function g(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===E(e)}function w(e){return"object"==typeof e&&null!==e}function k(e){return w(e)&&"[object Date]"===E(e)}function _(e){return w(e)&&("[object Error]"===E(e)||e instanceof Error)}function x(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(g(o)&&(o=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=e.pid;s[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else s[n]=function(){};return s[n]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=p,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=g,t.isRegExp=b,t.isObject=w,t.isDate=k,t.isError=_,t.isFunction=x,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(279);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",T(),t.format.apply(t,arguments))},t.inherits=n(280),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var C="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function M(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(C&&e[C]){var t;if("function"!=typeof(t=e[C]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),C&&Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=C,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(M,t,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(278))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=a(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){var r,i,o,s,a;e.exports=(i=[],o=document,s=o.documentElement.doScroll,(a=(s?/^loaded|^c/:/^loaded|^i|^c/).test(o.readyState))||o.addEventListener("DOMContentLoaded",r=function(){for(o.removeEventListener("DOMContentLoaded",r),a=1;r=i.shift();)r()}),function(e){a?setTimeout(e,0):i.push(e)})},function(e,t){var n,r="undefined"!=typeof window?window.navigator.userAgent:"",i=/OS X/.test(r),o=/Opera/.test(r),s=!/like Gecko/.test(r)&&!o,a=e.exports={0:i?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:i?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:i&&s?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:o?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(n=58;n<65;++n)a[n]=String.fromCharCode(n);for(n=48;n<58;++n)a[n]=n-48+"";for(n=65;n<91;++n)a[n]=String.fromCharCode(n);for(n=96;n<106;++n)a[n]="<num-"+(n-96)+">";for(n=112;n<136;++n)a[n]="F"+(n-111)},function(e,t,n){"use strict";e.exports=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}},function(e,t,n){"use strict";e.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,i=e[0],o=e[0],s=1;s<r;++s)if(o=i,t(i=e[s],o)){if(s===n){n++;continue}e[n++]=i}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],i=e[0],o=1;o<n;++o,i=r)if(i=r,(r=e[o])!==i){if(o===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},function(e,t,n){"use strict";function r(e,t,n,r,i,o){var s=["function ",e,"(a,l,h,",r.join(","),"){",o?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return o?t.indexOf("c")<0?s.push(";if(x===y){return m}else if(x<=y){"):s.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):s.push(";if(",t,"){i=m;"),n?s.push("l=m+1}else{h=m-1}"):s.push("h=m-1}else{l=m+1}"),s.push("}"),o?s.push("return -1};"):s.push("return i};"),s.join("")}function i(e,t,n,i){return new Function([r("A","x"+e+"y",t,["y"],!1,i),r("B","x"+e+"y",t,["y"],!0,i),r("P","c(x,y)"+e+"0",t,["y","c"],!1,i),r("Q","c(x,y)"+e+"0",t,["y","c"],!0,i),"function dispatchBsearch",n,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",n].join(""))()}e.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},function(e,t){for(var n=0,r=["ms","moz","webkit","o"],i=0;i<r.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[r[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r[i]+"CancelAnimationFrame"]||window[r[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var r=(new Date).getTime(),i=Math.max(0,16-(r-n)),o=window.setTimeout((function(){e(r+i)}),i);return n=r+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})},function(e,t){var n,r,i="";function o(e,t,o,s){e[n](i+t,"wheel"==r?o:function(e){!e&&(e=window.event);var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"==r?(t.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-1/40*e.wheelDeltaX)):t.deltaY=e.detail,o(t)},s||!1)}window.addEventListener?n="addEventListener":(n="attachEvent",i="on"),r="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.exports=function(e,t,n){o(e,r,t,n),"DOMMouseScroll"==r&&o(e,"MozMousePixelScroll",t,n)}},function(e,t){"object"==typeof window.performance?window.performance.now?e.exports=function(){return window.performance.now()}:window.performance.webkitNow&&(e.exports=function(){return window.performance.webkitNow()}):Date.now?e.exports=Date.now:e.exports=function(){return(new Date).getTime()}},function(e,t,n){var r=n(290),i=n(125).EventEmitter,o=n(291);function s(e,t){this.element=e||document,t=t||{},this.preventDefaults=!!t.preventDefaults,this.stopPropagation=!!t.stopPropagation,this.allowContextMenu=!!t.allowContextMenu,this.disabled=!!t.disabled,this.down=new i,this.up=new i,this.state={dx:0,dy:0,scrollx:0,scrolly:0,scrollz:0},this._keybindmap={},this._keyStates={},this._bindPressCounts={},this._ignoreMousemoveOnce=!1,this.initEvents()}function a(e,t,n){y(n.keyCode,r[n.keyCode],t,e,n)}function u(e,t,n){return y(-1-n.button,"<mouse "+(n.button+1)+">",t,e,n),!1}function c(e){if(!e.allowContextMenu)return!1}function l(e,t){if(e._ignoreMousemoveOnce)e._ignoreMousemoveOnce=!1;else{var n=t.movementX||t.mozMovementX||0,r=t.movementY||t.mozMovementY||0;if(t.touches&&0==(n|r)){var i=function(e){for(var t,n=e.changedTouches,r=0;r<n.length;++r)n[r].identifier==d&&(t=n[r]);if(!t)return[0,0];var i=[t.clientX-f,t.clientY-h];return f=t.clientX,h=t.clientY,i}(t);n=i[0],r=i[1]}e.state.dx+=n,e.state.dy+=r}}e.exports=function(e,t){return new s(e,t)},s.prototype.initEvents=function(){window.addEventListener("keydown",a.bind(void 0,this,!0),!1),window.addEventListener("keyup",a.bind(void 0,this,!1),!1),this.element.addEventListener("mousedown",u.bind(void 0,this,!0),!1),this.element.addEventListener("mouseup",u.bind(void 0,this,!1),!1),this.element.oncontextmenu=c.bind(void 0,this),this.element.addEventListener("dragstart",u.bind(void 0,this,!1),!1),this.element.addEventListener("mousemove",l.bind(void 0,this),!1),this.element.addEventListener("touchmove",l.bind(void 0,this),!1),this.element.addEventListener("touchstart",p.bind(void 0,this),!1),o(this.element,m.bind(void 0,this),!1),document.addEventListener("pointerlockchange",v.bind(void 0,this),!1),document.addEventListener("mozpointerlockchange",v.bind(void 0,this),!1)},s.prototype.bind=function(e){for(var t=1;t<arguments.length;++t){var n=arguments[t],r=this._keybindmap[n]||[];-1==r.indexOf(e)&&r.push(e),this._keybindmap[n]=r}this.state[e]=!!this.state[e]},s.prototype.unbind=function(e){for(var t in this._keybindmap){var n=this._keybindmap[t],r=n.indexOf(e);r>-1&&n.splice(r,1)}},s.prototype.tick=function(){this.state.dx=this.state.dy=0,this.state.scrollx=this.state.scrolly=this.state.scrollz=0},s.prototype.getBoundKeys=function(){var e=[];for(var t in this._keybindmap)e.push(t);return e};var f=0,h=0,d=null;function p(e,t){var n=t.changedTouches[0];f=n.clientX,h=n.clientY,d=n.identifier}function m(e,t){var n=1;switch(t.deltaMode){case 0:n=1;break;case 1:n=12;break;case 2:n=e.element.clientHeight||window.innerHeight}return e.state.scrollx+=t.deltaX*n,e.state.scrolly+=t.deltaY*n,e.state.scrollz+=t.deltaZ*n||0,!1}function v(e,t){(document.pointerLockElement||document.mozPointerLockElement||null)&&(e._ignoreMousemoveOnce=!0)}function y(e,t,n,r,i){var o=r._keybindmap[t];if(o){if(r.preventDefaults&&i.preventDefault(),r.stopPropagation&&i.stopPropagation(),b(r._keyStates[e],n))for(var s=0;s<o.length;++s)g(o[s],n,r,i);r._keyStates[e]=n}}function g(e,t,n,r){var i=n._bindPressCounts[e]||0;if((i+=t?1:-1)<0&&(i=0),n._bindPressCounts[e]=i,b(n.state[e],i)){var o=t?n.down:n.up;n.disabled||o.emit(e,r)}n.state[e]=!!i}function b(e,t){return e?!t:t}},function(e,t,n){"use strict";var r,i="undefined"!=typeof window?window.navigator.userAgent:"",o=/OS X/.test(i),s=/Opera/.test(i),a=!/like Gecko/.test(i)&&!s,u=e.exports={0:o?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:o?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:o&&a?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:s?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(r=58;r<65;++r)u[r]=String.fromCharCode(r);for(r=48;r<58;++r)u[r]=r-48+"";for(r=65;r<91;++r)u[r]=String.fromCharCode(r);for(r=96;r<106;++r)u[r]="<num-"+(r-96)+">";for(r=112;r<136;++r)u[r]="F"+(r-111)},function(e,t){var n,r,i="";function o(e,t,o,s){e[n](i+t,"wheel"==r?o:function(e){!e&&(e=window.event);var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"==r?(t.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-1/40*e.wheelDeltaX)):t.deltaY=e.detail,o(t)},s||!1)}window.addEventListener?n="addEventListener":(n="attachEvent",i="on"),r="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.exports=function(e,t,n){o(e,r,t,n),"DOMMouseScroll"==r&&o(e,"MozMousePixelScroll",t,n)}},function(e,t,n){"use strict";var r=n(188),i=n(73),o=n(223),s=n(293);e.exports=function(e,t,n){return new u(e,t,n)};var a={gravity:[0,-10,0],minBounceImpulse:.5,airDrag:.1,fluidDrag:.4,fluidDensity:2};function u(e,t,n){e=Object.assign({},a,e),this.gravity=e.gravity,this.airDrag=e.airDrag,this.fluidDensity=e.fluidDensity,this.fluidDrag=e.fluidDrag,this.minBounceImpulse=e.minBounceImpulse,this.bodies=[],this.testSolid=t,this.testFluid=n}u.prototype.addBody=function(e,t,n,i,o,a){e=e||new r([0,0,0],[1,1,1]),void 0===t&&(t=1),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=1);var u=new s(e,t,n,i,o,a);return this.bodies.push(u),u},u.prototype.removeBody=function(e){var t=this.bodies.indexOf(e);t<0||(this.bodies.splice(t,1),e.aabb=e.onCollide=null)};var c=i.create(),l=i.create(),f=i.create(),h=i.create(),d=i.create();u.prototype.tick=function(e){e/=1e3;var t=E(0,i.squaredLength(this.gravity));this.bodies.forEach(n=>function(e,t,n,r){if(i.copy(d,t.resting),t.mass<=0)return i.set(t.velocity,0,0,0),i.set(t._forces,0,0,0),void i.set(t._impulses,0,0,0);var s=r||0===t.gravityMultiplier;if(function(e,t,n,r){if(t._sleepFrameCount>0)return!1;if(r)return!0;var s=!1,a=.5*n*n*t.gravityMultiplier;return i.scale(x,e.gravity,a),o(e.testSolid,t.aabb,x,(function(){return s=!0,!0}),!0),s}(e,t,n,s))return;t._sleepFrameCount--,function(e,t){var n=t.aabb,r=Math.floor(n.base[0]),o=Math.floor(n.base[2]),s=Math.floor(n.base[1]),a=Math.floor(n.max[1]);if(!e.testFluid(r,s,o))return t.inFluid=!1,void(t.ratioInFluid=0);var u=1,c=s+1;for(;c<=a&&e.testFluid(r,c,o);)u++,c++;var l=(s+u-n.base[1])/n.vec[1];l>1&&(l=1);var f=n.vec[0]*n.vec[1]*n.vec[2]*l,h=p;i.scale(h,e.gravity,-e.fluidDensity*f),t.applyForce(h),t.inFluid=!0,t.ratioInFluid=l}(e,t),O(t._forces),O(t._impulses),O(t.velocity),O(t.resting),i.scale(c,t._forces,1/t.mass),i.scaleAndAdd(c,c,e.gravity,t.gravityMultiplier),i.scale(l,t._impulses,1/t.mass),i.scaleAndAdd(l,l,c,n),i.add(t.velocity,t.velocity,l),t.friction&&(m(0,t,l),m(1,t,l),m(2,t,l));var a=t.airDrag>=0?t.airDrag:e.airDrag;t.inFluid&&(a=t.fluidDrag>=0?t.fluidDrag:e.fluidDrag,a*=1-(1-t.ratioInFluid)**2);var u=Math.max(1-a*n/t.mass,0);i.scale(t.velocity,t.velocity,u),i.scale(f,t.velocity,n),i.set(t._forces,0,0,0),i.set(t._impulses,0,0,0),t.autoStep&&S(g,t.aabb);y(e,t.aabb,f,t.resting),t.autoStep&&function(e,t,n,r){if(t.resting[1]>=0&&!t.inFluid)return;var s=0!==t.resting[0],a=0!==t.resting[2];if(!s&&!a)return;var u=Math.abs(r[0]/r[2]);if(!s&&u>4)return;if(!a&&u<1/4)return;i.add(w,n.base,r);var c=e.testSolid;o(c,n,r,(function(e,t,n,r){if(1!==t)return!0;r[t]=0}));var l=t.aabb.base[1],f=Math.floor(l+1.001)-l;i.set(k,0,f,0);var h=!1;if(o(c,n,k,(function(e,t,n,r){return h=!0,!0})),h)return;if(i.subtract(_,w,n.base),_[1]=0,y(e,n,_,b),s&&!E(n.base[0],w[0]))return;if(a&&!E(n.base[2],w[2]))return;S(t.aabb,n),t.resting[0]=b[0],t.resting[2]=b[2],t.onStep&&t.onStep()}(e,t,g,f);for(var v=0;v<3;++v)h[v]=0,t.resting[v]&&(d[v]||(h[v]=-t.velocity[v]),t.velocity[v]=0);var T=i.length(h);T>.001&&(i.scale(h,h,t.mass),t.onCollide&&t.onCollide(h),t.restitution>0&&T>e.minBounceImpulse&&(i.scale(h,h,t.restitution),t.applyImpulse(h)));i.squaredLength(t.velocity)>1e-5&&t._markActive()}(this,n,e,t))};var p=i.create();function m(e,t,n){var r=t.resting[e],o=n[e];if(0!==r&&!(r*o<=0)){i.copy(v,t.velocity),v[e]=0;var s=i.length(v);if(!E(s,0)){var a=Math.abs(t.friction*o),u=s>a?(s-a)/s:0;t.velocity[(e+1)%3]*=u,t.velocity[(e+2)%3]*=u}}}var v=i.create();function y(e,t,n,r){return i.set(r,0,0,0),o(e.testSolid,t,n,(function(e,t,n,i){r[t]=n,i[t]=0}))}var g=new r([],[]),b=i.create(),w=i.create(),k=i.create(),_=i.create();var x=i.create();function E(e,t){return Math.abs(e-t)<1e-5}function S(e,t){for(var n=0;n<3;n++)e.base[n]=t.base[n],e.max[n]=t.max[n],e.vec[n]=t.vec[n]}var O=function(){}},function(e,t,n){"use strict";var r=n(188),i=n(73);function o(e,t,n,o,s,a,u){this.aabb=new r(e.base,e.vec),this.mass=t,this.friction=n,this.restitution=o,this.gravityMultiplier=s,this.onCollide=a,this.autoStep=!!u,this.airDrag=-1,this.fluidDrag=-1,this.onStep=null,this.velocity=i.create(),this.resting=[0,0,0],this.inFluid=!1,this._ratioInFluid=0,this._forces=i.create(),this._impulses=i.create(),this._sleepFrameCount=10}e.exports=o,o.prototype.setPosition=function(e){s(e),i.subtract(e,e,this.aabb.base),this.aabb.translate(e),this._markActive()},o.prototype.getPosition=function(){return i.clone(this.aabb.base)},o.prototype.applyForce=function(e){s(e),i.add(this._forces,this._forces,e),this._markActive()},o.prototype.applyImpulse=function(e){s(e),i.add(this._impulses,this._impulses,e),this._markActive()},o.prototype._markActive=function(){this._sleepFrameCount=10},o.prototype.atRestX=function(){return this.resting[0]},o.prototype.atRestY=function(){return this.resting[1]},o.prototype.atRestZ=function(){return this.resting[2]};var s=function(){}},function(e,t,n){"use strict";e.exports=
/*!
 * ent-comp: a light, *fast* Entity Component System in JS
 * @url      github.com/andyhall/ent-comp
 * @author   Andy Hall <andy@fenomas.com>
 * @license  MIT
*/
function e(){var t=this;this.components={},this.comps=this.components;var n=this.components,i=1,o={},s=[],a=[],u=[],c=[],l=[];function f(e){Object.keys(o).forEach(t=>{o[t].hash[e]&&h(e,t)})}function h(e,t){var i=n[t],s=o[t];s&&s.hash[e]&&(i.onRemove&&(i.multi?s.hash[e].forEach(t=>{i.onRemove(e,t)}):i.onRemove(e,s.hash[e])),i.multi&&(s.hash[e].length=0),r.remove(s,e))}function d(e,t,r){var i=n[t],s=o[t].hash[e];if(s){var a=s.indexOf(r);a<0||(i.onRemove&&i.onRemove(e,r),s.splice(a,1),0===s.length&&h(e,t))}}function p(){m||(m=!0,setTimeout((function(){m=!1,v()}),1))}this._storage=o,this._systems=s,this._renderSystems=a,this.createEntity=function(e){var n=i++;return e&&e.length&&e.forEach(e=>t.addComponent(n,e)),n},this.deleteEntity=function(e,n){return n?f(e):(u.push(e),p()),t},this.createComponent=function(e){if(!e)throw"Missing component definition";var t=e.name;if(!t)throw"Component definition must have a name property.";if("string"!=typeof t)throw"Component name must be a string.";if(""===t)throw"Component name must be a non-empty string.";if(o[t])throw`Component ${t} already exists.`;var i={};return i.name=t,i.order=isNaN(e.order)?99:e.order,i.state=e.state||{},i.onAdd=e.onAdd||null,i.onRemove=e.onRemove||null,i.system=e.system||null,i.renderSystem=e.renderSystem||null,i.multi=!!e.multi,n[t]=i,o[t]=r.create(),i.system&&(s.push(t),s.sort((e,t)=>n[e].order-n[t].order)),i.renderSystem&&(a.push(t),a.sort((e,t)=>n[e].order-n[t].order)),t},this.deleteComponent=function(e){var r=o[e];if(!r)throw"Unknown component: "+e;r.list.forEach(n=>{var r=n.__id||n[0].__id;t.removeComponent(r,e,!0)});var i=s.indexOf(e),u=a.indexOf(e);return i>-1&&s.splice(i,1),u>-1&&a.splice(u,1),delete n[e],delete o[e],t},this.addComponent=function(e,t,i){var s=n[t],a=o[t];if(!a)throw`Unknown component: ${t}.`;var u=!1;if(c.forEach(n=>{n.id===e&&n.compName===t&&(u=!0)}),u&&y(),a.hash[e]&&!s.multi)throw`Entity ${e} already has component: ${t}.`;var l=Object.assign({},{__id:e},s.state,i);if(l.__id=e,s.multi){var f=a.hash[e];f||(f=[],r.add(a,e,f)),f.push(l)}else r.add(a,e,l);return s.onAdd&&s.onAdd(e,l),this},this.hasComponent=function(e,t){var n=o[t];if(!n)throw`Unknown component: ${t}.`;return void 0!==n.hash[e]},this.removeComponent=function(e,r,i){var s=n[r],a=o[r];if(!a)throw`Unknown component: ${r}.`;if(!a.hash[e]){if(s.multi)return t;throw`Entity ${e} does not have component: ${r} to remove.`}return i?h(e,r):(c.push({id:e,compName:r}),p()),t},this.getState=function(e,t){var n=o[t];if(!n)throw`Unknown component: ${t}.`;return n.hash[e]},e.prototype.getStatesList=function(e){var t=o[e];if(!t)throw`Unknown component: ${e}.`;return t.list},this.getStateAccessor=function(e){if(!o[e])throw`Unknown component: ${e}.`;var t=o[e].hash;return function(e){return t[e]}},this.getComponentAccessor=function(e){if(!o[e])throw`Unknown component: ${e}.`;var t=o[e].hash;return function(e){return void 0!==t[e]}},this.tick=function(e){return v(),s.forEach(t=>{var r=o[t].list;n[t].system(e,r)}),v(),t},this.render=function(e){return v(),a.forEach(t=>{var r=o[t].list;n[t].renderSystem(e,r)}),v(),t},this.removeMultiComponent=function(e,r,i,s){var a=n[r],u=o[r];if(!u)throw`Unknown component: ${r}.`;if(!a.multi)throw"removeMultiComponent called on non-multi component";var c=u.hash[e];if(!c||!c[i])throw`Multicomponent ${r} instance not found at index ${i}`;var f=c[i];return s?d(e,r,f):l.push({id:e,compName:r,state:f}),t};var m=!1;function v(){y(),function(e){for(;l.length;){var t=l.pop();d(t.id,t.compName,t.state),t.state=null}}(),function(){for(;u.length;){f(u.pop())}}()}function y(){for(;c.length;){var e=c.pop();h(e.id,e.compName)}}};var r=n(295)},function(e,t,n){"use strict";e.exports={create:function(){return{list:[],hash:{},_map:{}}},add:function(e,t,n){e.list.push(n),e.hash[t]=n,e._map[t]=e.list.length-1},remove:function(e,t){var n=e._map[t];if(n===e.list.length-1)e.list.pop();else{var r=e.list.pop();e.list[n]=r;var i=r.__id||r[0].__id;e._map[i]=n}delete e.hash[t],delete e._map[t]}}},function(e,t,n){var r={"./collideEntities.js":297,"./collideTerrain.js":308,"./fadeOnZoom.js":309,"./followsEntity.js":310,"./mesh.js":311,"./movement.js":312,"./physics.js":203,"./position.js":202,"./receivesInputs.js":313,"./shadow.js":314,"./smoothCamera.js":315};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=296},function(e,t,n){"use strict";n.r(t);var r=n(298);t.default=function(e){var t=[];return{name:"collideEntities",order:70,state:{cylinder:!1,collideBits:1,collideMask:1,callback:null},onAdd:null,onRemove:null,system:function(i,o){for(var s=e.ents,a=0;a<o.length;a++){var u=o[a].__id,c=s.getPositionData(u);t[a]=c._extents}t.length=o.length,r(t,(function(r,i){var s=o[r],a=o[i];(function(e,t,r,i){if(e.cylinder)return t.cylinder?function(e,t){var n=(e[3]-e[0])/2,r=(t[3]-t[0])/2,i=e[0]+n-(t[0]+r),o=e[2]+n-(t[2]+r),s=n+r;return i*i+o*o<=s*s}(r,i):n(r,i);if(t.cylinder)return n(i,r);return!0})(s,a,t[r],t[i])&&function(e,t,n){var r=t.__id,i=n.__id;t.collideMask&n.collideBits&&t.callback&&t.callback(i);n.collideMask&t.collideBits&&n.callback&&n.callback(r);e.ents.onPairwiseEntityCollision(r,i)}(e,s,a)}))}};function n(e,t){var n=(e[3]-e[0])/2,r=e[0]+n,o=e[2]+n,s=i(r,t[0],t[3])-r,a=i(o,t[2],t[5])-o;return s*s+a*a<=n*n}function i(e,t,n){return e<t?t:e>n?n:e}}},function(e,t,n){"use strict";e.exports=function(e,t,n){switch(arguments.length){case 1:return f(e);case 2:return"function"==typeof t?c(e,e,t,!0):h(e,t);case 3:return c(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}};var r,i=n(189),o=n(224),s=n(305);function a(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function u(e,t,n,r){for(var i=0,o=0,s=0,u=e.length;s<u;++s){var c=e[s];if(!a(t,c)){for(var l=0;l<2*t;++l)n[i++]=c[l];r[o++]=s}}return o}function c(e,t,n,r){var a=e.length,c=t.length;if(!(a<=0||c<=0)){var l=e[0].length>>>1;if(!(l<=0)){var f,h=i.mallocDouble(2*l*a),d=i.mallocInt32(a);if((a=u(e,l,h,d))>0){if(1===l&&r)o.init(a),f=o.sweepComplete(l,n,0,a,h,d,0,a,h,d);else{var p=i.mallocDouble(2*l*c),m=i.mallocInt32(c);(c=u(t,l,p,m))>0&&(o.init(a+c),f=1===l?o.sweepBipartite(l,n,0,a,h,d,0,c,p,m):s(l,n,r,a,h,d,c,p,m),i.free(p),i.free(m))}i.free(h),i.free(d)}return f}}}function l(e,t){r.push([e,t])}function f(e){return r=[],c(e,e,l,!0),r}function h(e,t){return r=[],c(e,t,l,!1),r}},function(e,t,n){"use strict";e.exports=function(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(e>0)return function(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,t);break;case"object":if("number"==typeof e.length)return function e(t,n,r){var i=0|t[r];if(i<=0)return[];var o,s=new Array(i);if(r===t.length-1)for(o=0;o<i;++o)s[o]=n;else for(o=0;o<i;++o)s[o]=e(t,n,r+1);return s}(e,t,0)}return[]}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(301),i=n(302),o=n(303);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|d(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=a(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|d(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){f=!1;break}if(f)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function w(e,t,n,r){return V(z(t,e.length-n),e,n,r)}function k(e,t,n,r){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return k(e,t,n,r)}function x(e,t,n,r){return V(U(t),e,n,r)}function E(e,t,n,r){return V(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):m.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),f=0;f<a;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return k(this,e,t,n);case"latin1":case"binary":return _(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=F(e[o]);return i}function M(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function L(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,o){return o||L(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,o){return o||L(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=u.isBuffer(e)?e:z(new u(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(129))},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),s=r[0],a=r[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,f=a>0?s-4:s;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+d]=255&s,d+=p,s/=256,c-=8);e[n+d-p]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";e.exports=function(e,t){t<=128?r(0,t-1,e):function e(t,n,l){var f=(n-t+1)/6|0,h=t+f,d=n-f,p=t+n>>1,m=p-f,v=p+f,y=h,g=m,b=p,w=v,k=d,_=t+1,x=n-1,E=0;u(y,g,l)&&(E=y,y=g,g=E);u(w,k,l)&&(E=w,w=k,k=E);u(y,b,l)&&(E=y,y=b,b=E);u(g,b,l)&&(E=g,g=b,b=E);u(y,w,l)&&(E=y,y=w,w=E);u(b,w,l)&&(E=b,b=w,w=E);u(g,k,l)&&(E=g,g=k,k=E);u(g,b,l)&&(E=g,g=b,b=E);u(w,k,l)&&(E=w,w=k,k=E);for(var S=l[2*g],O=l[2*g+1],T=l[2*w],A=l[2*w+1],C=2*y,M=2*b,P=2*k,j=2*h,I=2*p,D=2*d,L=0;L<2;++L){var B=l[C+L],R=l[M+L],N=l[P+L];l[j+L]=B,l[I+L]=R,l[D+L]=N}o(m,t,l),o(v,n,l);for(var F=_;F<=x;++F)if(c(F,S,O,l))F!==_&&i(F,_,l),++_;else if(!c(F,T,A,l))for(;;){if(c(x,T,A,l)){c(x,S,O,l)?(s(F,_,x,l),++_,--x):(i(F,x,l),--x);break}if(--x<F)break}a(t,_-1,S,O,l),a(n,x+1,T,A,l),_-2-t<=32?r(t,_-2,l):e(t,_-2,l);n-(x+2)<=32?r(x+2,n,l):e(x+2,n,l);x-_<=32?r(_,x,l):e(_,x,l)}(0,t-1,e)};function r(e,t,n){for(var r=2*(e+1),i=e+1;i<=t;++i){for(var o=n[r++],s=n[r++],a=i,u=r-2;a-- >e;){var c=n[u-2],l=n[u-1];if(c<o)break;if(c===o&&l<s)break;n[u]=c,n[u+1]=l,u-=2}n[u]=o,n[u+1]=s}}function i(e,t,n){t*=2;var r=n[e*=2],i=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=r,n[t+1]=i}function o(e,t,n){t*=2,n[e*=2]=n[t],n[e+1]=n[t+1]}function s(e,t,n,r){t*=2,n*=2;var i=r[e*=2],o=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=i,r[n+1]=o}function a(e,t,n,r,i){t*=2,i[e*=2]=i[t],i[t]=n,i[e+1]=i[t+1],i[t+1]=r}function u(e,t,n){t*=2;var r=n[e*=2],i=n[t];return!(r<i)&&(r!==i||n[e+1]>n[t+1])}function c(e,t,n,r){var i=r[e*=2];return i<t||i===t&&r[e+1]<n}},function(e,t,n){"use strict";e.exports=function(e,t,n,o,l,_,x,E,S){!function(e,t){var n=8*i.log2(t+1)*(e+1)|0,o=i.nextPow2(6*n);y.length<o&&(r.free(y),y=r.mallocInt32(o));var s=i.nextPow2(2*n);g.length<s&&(r.free(g),g=r.mallocDouble(s))}(e,o+x);var O,T=0,A=2*e;b(T++,0,0,o,0,x,n?16:0,-1/0,1/0),n||b(T++,0,0,x,0,o,1,-1/0,1/0);for(;T>0;){var C=6*(T-=1),M=y[C],P=y[C+1],j=y[C+2],I=y[C+3],D=y[C+4],L=y[C+5],B=2*T,R=g[B],N=g[B+1],F=1&L,z=!!(16&L),U=l,V=_,q=E,Y=S;if(F&&(U=E,V=S,q=l,Y=_),!(2&L&&(j=d(e,M,P,j,U,V,N),P>=j)||4&L&&(P=p(e,M,P,j,U,V,R))>=j)){var $=j-P,W=D-I;if(z){if(e*$*($+W)<1<<22){if(void 0!==(O=u.scanComplete(e,M,t,P,j,U,V,I,D,q,Y)))return O;continue}}else{if(e*Math.min($,W)<128){if(void 0!==(O=s(e,M,t,F,P,j,U,V,I,D,q,Y)))return O;continue}if(e*$*W<1<<22){if(void 0!==(O=u.scanBipartite(e,M,t,F,P,j,U,V,I,D,q,Y)))return O;continue}}var H=f(e,M,P,j,U,V,R,N);if(P<H)if(e*(H-P)<128){if(void 0!==(O=a(e,M+1,t,P,H,U,V,I,D,q,Y)))return O}else if(M===e-2){if(void 0!==(O=F?u.sweepBipartite(e,t,I,D,q,Y,P,H,U,V):u.sweepBipartite(e,t,P,H,U,V,I,D,q,Y)))return O}else b(T++,M+1,P,H,I,D,F,-1/0,1/0),b(T++,M+1,I,D,P,H,1^F,-1/0,1/0);if(H<j){var J=c(e,M,I,D,q,Y),G=q[A*J+M],X=h(e,M,J,D,q,Y,G);if(X<D&&b(T++,M,H,j,X,D,(4|F)+(z?16:0),G,N),I<J&&b(T++,M,H,j,I,J,(2|F)+(z?16:0),R,G),J+1===X){if(void 0!==(O=z?k(e,M,t,H,j,U,V,J,q,Y[J]):w(e,M,t,F,H,j,U,V,J,q,Y[J])))return O}else if(J<X){var Z;if(z){if(Z=m(e,M,H,j,U,V,G),H<Z){var K=h(e,M,H,Z,U,V,G);if(M===e-2){if(H<K&&void 0!==(O=u.sweepComplete(e,t,H,K,U,V,J,X,q,Y)))return O;if(K<Z&&void 0!==(O=u.sweepBipartite(e,t,K,Z,U,V,J,X,q,Y)))return O}else H<K&&b(T++,M+1,H,K,J,X,16,-1/0,1/0),K<Z&&(b(T++,M+1,K,Z,J,X,0,-1/0,1/0),b(T++,M+1,J,X,K,Z,1,-1/0,1/0))}}else Z=F?v(e,M,H,j,U,V,G):m(e,M,H,j,U,V,G),H<Z&&(M===e-2?O=F?u.sweepBipartite(e,t,J,X,q,Y,H,Z,U,V):u.sweepBipartite(e,t,H,Z,U,V,J,X,q,Y):(b(T++,M+1,H,Z,J,X,F,-1/0,1/0),b(T++,M+1,J,X,H,Z,1^F,-1/0,1/0)))}}}}};var r=n(189),i=n(190),o=n(306),s=o.partial,a=o.full,u=n(224),c=n(307),l=n(225),f=l("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),h=l("lo===p0",["p0"]),d=l("lo<p0",["p0"]),p=l("hi<=p0",["p0"]),m=l("lo<=p0&&p0<=hi",["p0"]),v=l("lo<p0&&p0<=hi",["p0"]),y=r.mallocInt32(1024),g=r.mallocDouble(1024);function b(e,t,n,r,i,o,s,a,u){var c=6*e;y[c]=t,y[c+1]=n,y[c+2]=r,y[c+3]=i,y[c+4]=o,y[c+5]=s;var l=2*e;g[l]=a,g[l+1]=u}function w(e,t,n,r,i,o,s,a,u,c,l){var f=2*e,h=u*f,d=c[h+t];e:for(var p=i,m=i*f;p<o;++p,m+=f){var v=s[m+t],y=s[m+t+e];if(!(d<v||y<d)&&(!r||d!==v)){for(var g,b=a[p],w=t+1;w<e;++w){v=s[m+w],y=s[m+w+e];var k=c[h+w],_=c[h+w+e];if(y<k||_<v)continue e}if(void 0!==(g=r?n(l,b):n(b,l)))return g}}}function k(e,t,n,r,i,o,s,a,u,c){var l=2*e,f=a*l,h=u[f+t];e:for(var d=r,p=r*l;d<i;++d,p+=l){var m=s[d];if(m!==c){var v=o[p+t],y=o[p+t+e];if(!(h<v||y<h)){for(var g=t+1;g<e;++g){v=o[p+g],y=o[p+g+e];var b=u[f+g],w=u[f+g+e];if(y<b||w<v)continue e}var k=n(m,c);if(void 0!==k)return k}}}}},function(e,t,n){"use strict";var r=["d","ax","vv","rs","re","rb","ri","bs","be","bb","bi"];function i(e){var t="bruteForce"+(e?"Full":"Partial"),n=[],i=r.slice();e||i.splice(3,0,"fp");var o=["function "+t+"("+i.join()+"){"];function s(t,i){var s=function(e,t,n){var i="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(n?"Full":""),o=["function ",i,"(",r.join(),"){","var ","es","=2*","d",";"],s="for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];",a="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(n?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";return e?o.push(s,"Q",":",a):o.push(a,"Q",":",s),n?o.push("if(y1<x0||x1<y0)continue;"):t?o.push("if(y0<=x0||x1<y0)continue;"):o.push("if(y0<x0||x1<y0)continue;"),o.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv("),t?o.push("yi,xi"):o.push("xi,yi"),o.push(");if(rv!==void 0)return rv;}}}"),{name:i,code:o.join("")}}(t,i,e);n.push(s.code),o.push("return "+s.name+"("+r.join()+");")}o.push("if(re-rs>be-bs){"),e?(s(!0,!1),o.push("}else{"),s(!1,!1)):(o.push("if(fp){"),s(!0,!0),o.push("}else{"),s(!0,!1),o.push("}}else{if(fp){"),s(!1,!0),o.push("}else{"),s(!1,!1),o.push("}")),o.push("}}return "+t);var a=n.join("")+o.join("");return new Function(a)()}t.partial=i(!1),t.full=i(!0)},function(e,t,n){"use strict";e.exports=function(e,t,n,o,s,a){if(o<=n+1)return n;var u=n,c=o,l=o+n>>>1,f=2*e,h=l,d=s[f*l+t];for(;u<c;){if(c-u<8){i(e,t,u,c,s,a),d=s[f*l+t];break}var p=c-u,m=Math.random()*p+u|0,v=s[f*m+t],y=Math.random()*p+u|0,g=s[f*y+t],b=Math.random()*p+u|0,w=s[f*b+t];v<=g?w>=g?(h=y,d=g):v>=w?(h=m,d=v):(h=b,d=w):g>=w?(h=y,d=g):w>=v?(h=m,d=v):(h=b,d=w);for(var k=f*(c-1),_=f*h,x=0;x<f;++x,++k,++_){var E=s[k];s[k]=s[_],s[_]=E}var S=a[c-1];a[c-1]=a[h],a[h]=S,h=r(e,t,u,c-1,s,a,d);for(k=f*(c-1),_=f*h,x=0;x<f;++x,++k,++_){E=s[k];s[k]=s[_],s[_]=E}S=a[c-1];if(a[c-1]=a[h],a[h]=S,l<h){for(c=h-1;u<c&&s[f*(c-1)+t]===d;)c-=1;c+=1}else{if(!(h<l))break;for(u=h+1;u<c&&s[f*u+t]===d;)u+=1}}return r(e,t,n,l,s,a,s[f*l+t])};var r=n(225)("lo<p0",["p0"]);function i(e,t,n,r,i,o){for(var s=2*e,a=s*(n+1)+t,u=n+1;u<r;++u,a+=s)for(var c=i[a],l=u,f=s*(u-1);l>n&&i[f+t]>c;--l,f-=s){for(var h=f,d=f+s,p=0;p<s;++p,++h,++d){var m=i[h];i[h]=i[d],i[d]=m}var v=o[l];o[l]=o[l-1],o[l-1]=v}}},function(e,t,n){"use strict";n.r(t),t.default=function(e){return{name:"collideTerrain",order:0,state:{callback:null},onAdd:function(t,n){var r=e.entities;r.hasPhysics(t)&&(r.getPhysicsBody(t).onCollide=function(n){var r=e.ents.getCollideTerrain(t).callback;r&&r(n,t)})},onRemove:function(t,n){var r=e.entities;r.hasPhysics(t)&&(r.getPhysicsBody(t).onCollide=null)}}}},function(e,t,n){"use strict";n.r(t),t.default=function(e){return{name:"fadeOnZoom",order:99,state:{cutoff:1.5,_showing:!0},onAdd:null,onRemove:null,system:function(t,n){var r=e.camera.currentZoom,i=e.entities;n.forEach(e=>{!function(e,t,n,r){if(!r.hasMesh(t))return;if(e._showing&&n<e.cutoff||!e._showing&&n>e.cutoff){r.getMeshData(t).mesh.visibility=e._showing=n>e.cutoff}}(e,e.__id,r,i)})}}}},function(e,t,n){"use strict";n.r(t);var r=n(73);t.default=function(e){return{name:"followsEntity",order:50,state:{entity:0,offset:null},onAdd:function(e,i){var o=r.create();i.offset=i.offset?r.copy(o,i.offset):o,t(i),n(i)},onRemove:null,system:function(e,n){n.forEach(e=>t(e))},renderSystem:function(e,t){t.forEach(e=>n(e))}};function t(t){var n=t.__id,i=e.ents.getPositionData(n),o=e.ents.getPositionData(t.entity);if(!o)return e.ents.removeComponent(n,e.ents.names.followsEntity);r.add(i._localPosition,o._localPosition,t.offset)}function n(t){var n=t.__id,i=e.ents.getPositionData(n),o=e.ents.getPositionData(t.entity);if(!o)return e.ents.removeComponent(n,e.ents.names.followsEntity);r.add(i._renderPosition,o._renderPosition,t.offset)}}},function(e,t,n){"use strict";n.r(t);var r=n(73);t.default=function(e){return{name:"mesh",order:100,state:{mesh:null,offset:null},onAdd:function(t,n){var i=e.ents.getPositionData(t);if(!n.mesh)throw new Error("Mesh component added without a mesh - probably a bug!");e.rendering.addMeshToScene(n.mesh,!1,i.position),n.offset||(n.offset=new r.create);var o=i._renderPosition;n.mesh.position.copyFromFloats(o[0]+n.offset[0],o[1]+n.offset[1],o[2]+n.offset[2])},onRemove:function(e,t){t.mesh.dispose()},renderSystem:function(t,n){n.forEach(t=>{var n=t.__id,r=e.ents.getPositionData(n)._renderPosition;t.mesh.position.copyFromFloats(r[0]+t.offset[0],r[1]+t.offset[1],r[2]+t.offset[2])})}}}},function(e,t,n){"use strict";n.r(t);var r=n(73);t.default=function(e){return{name:"movement",order:30,state:{heading:0,running:!1,jumping:!1,sprint:!1,crouch:!1,xMult:1,yMult:1,maxSpeed:10,moveForce:30,responsiveness:15,runningFriction:0,standingFriction:2,sprintMoveMult:1.2,crouchMoveMult:.8,airMoveMult:.5,jumpImpulse:10,jumpForce:12,jumpTime:500,airJumps:1,_jumpCount:0,_isJumping:0,_currjumptime:0},onAdd:null,onRemove:null,system:function(t,n){var a=e.entities;n.forEach(e=>{var n=a.getPhysicsBody(e.__id);!function(e,t,n){var a=n.atRestY()<0,u=a||t._jumpCount<t.airJumps;a&&(t._isJumping=!1,t._jumpCount=0);if(t.jumping)if(t._isJumping){if(t._currjumptime>0){var c=t.jumpForce;t._currjumptime<e&&(c*=t._currjumptime/e),n.applyForce([0,c,0]),t._currjumptime-=e}}else u&&(t._isJumping=!0,a||t._jumpCount++,t._currjumptime=t.jumpTime,n.applyImpulse([0,t.jumpImpulse,0]),!a&&n.velocity[1]<0&&(n.velocity[1]=0));else t._isJumping=!1;var l=i,f=o;if(t.running){var h=t.maxSpeed;t.sprint&&(h*=t.sprintMoveMult),t.crouch&&(h*=t.crouchMoveMult),r.set(l,0,0,h),r.rotateY(l,l,s,t.heading),r.subtract(f,l,n.velocity),f[1]=0;var d=r.length(f);if(r.normalize(f,f),d>0){var p=t.moveForce;a||(p*=t.airMoveMult);var m=t.responsiveness*d;p>m&&(p=m),r.scale(f,f,p),n.applyForce(f)}n.friction=t.runningFriction}else n.friction=t.standingFriction}(t,e,n)})}}};var i=r.create(),o=r.create(),s=r.create()},function(e,t,n){"use strict";n.r(t),t.default=function(e){return{name:"receivesInputs",order:20,state:{ignore:!1,x:1,y:1},onAdd:null,onRemove:null,system:function(t,n){var r=e.entities,i=e.inputs.state,o=e.camera.heading;n.forEach(e=>{!function(e,t,n,r,i,o){e.jumping=!r&&!!t.jump;e.xMulp=i,e.yMulp=o;var s=t.forward?t.backward?0:1:t.backward?-1:0,a=t.right?t.left?0:1:t.left?-1:0;0==(s|a)||r?e.running=!1:(e.running=!0,s?(-1==s&&(n+=Math.PI),a&&(n+=Math.PI/4*s*a)):n+=a*Math.PI/2,e.heading=n)}(r.getMovement(e.__id),i,o,e.ignore,e.x,e.y)})}}}},function(e,t,n){"use strict";n.r(t);var r=n(4),i=n(29),o=n(73);t.default=function(e,t){var n=t,u=e.rendering.getScene(),c=r.a.CreateDisc("shadow",.75,30,u);return c.rotation.x=Math.PI/2,c.material=e.rendering.makeStandardMaterial("shadowMat"),c.material.diffuseColor=i.e.Black(),c.material.ambientColor=i.e.Black(),c.material.alpha=.5,c.setEnabled(!1),u.removeMesh(c),{name:"shadow",order:80,state:{size:.5,_mesh:null},onAdd:function(t,n){var r=c.createInstance("shadow_instance");e.rendering.addMeshToScene(r),r.setEnabled(!1),n._mesh=r},onRemove:function(e,t){t._mesh.dispose()},system:function(t,r){var i=e.camera._localGetPosition(),u=n;r.forEach(t=>{var n=e.ents.getPositionData(t.__id),r=e.ents.getPhysics(t.__id);!function(e,t,n,r,i,u,c){var l;if(n&&n.body.resting[1]<0)l=t._localPosition[1];else{var f=e._localPick(t._localPosition,a,u);if(!f)return void r.setEnabled(!1);l=f.position[1]-e.worldOriginOffset[1]}l=Math.round(l),o.copy(s,t._localPosition),s[1]=l;var h=.01+o.squaredDistance(c,s)/1600*.1;h>.1&&(h=.1);r.position.y=l+h;var d=t._localPosition[1]-l,p=.7*i*(1-d/u);r.scaling.copyFromFloats(p,p,p),r.setEnabled(!0)}(e,n,r,t._mesh,t.size,u,i)})},renderSystem:function(t,n){n.forEach(t=>{var n=e.ents.getPositionData(t.__id)._renderPosition,r=t._mesh.position;r.x=n[0],r.z=n[2]})}}};var s=o.fromValues(0,0,0),a=o.fromValues(0,-1,0)},function(e,t,n){"use strict";n.r(t),t.default=function(e){return{name:"smooth-camera",order:99,state:{time:100.1},onAdd:null,onRemove:null,system:function(t,n){n.forEach(n=>{n.time-=t,n.time<0&&e.ents.removeComponent(n.__id,"smooth-camera")})}}}},function(e){e.exports=JSON.parse('{"_from":"github:VoxelSrv/noa-engine","_id":"noa-engine@0.29.0","_inBundle":false,"_integrity":"","_location":"/noa-engine","_phantomChildren":{},"_requested":{"type":"git","raw":"github:VoxelSrv/noa-engine","rawSpec":"github:VoxelSrv/noa-engine","saveSpec":"github:VoxelSrv/noa-engine","fetchSpec":null,"gitCommittish":null},"_requiredBy":["#USER","/"],"_resolved":"github:VoxelSrv/noa-engine#ba1bc5a212a40202de56be979d231c4cb159f7c7","_spec":"github:VoxelSrv/noa-engine","_where":"/home/patbox/Pulpit/voxelsrv/client","author":{"name":"Andy Hall"},"bugs":{"url":"https://github.com/andyhall/noa/issues"},"bundleDependencies":false,"dependencies":{"@babylonjs/core":"^4.1.0","aabb-3d":"github:andyhall/aabb-3d","box-intersect":"^1.0.2","ent-comp":"^0.9.1","fast-voxel-raycast":"^0.1.1","game-inputs":"^0.4.0","game-shell":"github:andyhall/game-shell","gl-vec3":"^1.1.3","ndarray":"^1.0.19","voxel-aabb-sweep":"^0.5.0","voxel-physics-engine":"^0.10.0"},"deprecated":false,"description":"Experimental voxel game engine","devDependencies":{"jsdoc-to-markdown":"^5.0.3","typescript":"^3.9.7"},"files":["/src","/types"],"homepage":"https://github.com/andyhall/noa#readme","keywords":["voxel","game","engine"],"license":"MIT","main":"src/index.js","name":"noa-engine","repository":{"type":"git","url":"git+https://github.com/andyhall/noa.git"},"scripts":{"doc":"jsdoc2md -f src/* src/**/* -g table -p list --partial doc-templates/* > doc/API.md"},"typings":"types/index.d.ts","version":"0.29.0"}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setChunk=void 0;const r=n(119);t.setChunk=function(e,t){if(e.type){const i=new r(e.data,[32,256,32]);for(var n=0;n<8;n++){const o=new r(new Uint16Array(32768),[32,32,32]),s=e.x+"|"+n+"|"+e.z+"|default";for(let e=0;e<32;e++)for(let t=0;t<32;t++)for(let r=0;r<32;r++){const s=i.get(e,r+32*n,t);o.set(e,r,t,s)}t.world.setChunkData(s,o)}}else{var i=e.x+"|"+e.y+"|"+e.z+"|default";const n=new r(e.data,[32,32,32]);t.world.setChunkData(i,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupPlayer=t.setupControls=void 0;const r=n(319),i=n(320),o=n(76),s=n(191),a=n(227),u=n(321);t.setupControls=function(e,t){const n=e.playerEntity;e.rendering.getScene(),e.container.canvas.requestPointerLock(),e.container.canvas.addEventListener("click",()=>{a.inventory.isVisible||e.container.canvas.requestPointerLock()}),e.blockTargetIdCheck=function(e){return null!=s.blockIDmap[e]&&1!=s.blocks[s.blockIDmap[e]].options.fluid},e.inputs.preventDefaults=!0,e.inputs.down.on("fire",(function(){if(e.targetedBlock){const n=e.targetedBlock.position;t.send("actionBlockBreak",{x:n[0],y:n[1],z:n[2]})}})),e.inputs.up.on("fire",(function(){})),e.inputs.down.on("alt-fire",(function(){if(null!=e.targetedBlock){const n=e.targetedBlock.adjacent,r=e.targetedBlock.position;0==e.ents.isTerrainBlocked(n[0],n[1],n[2])&&t.send("actionBlockPlace",{x:n[0],y:n[1],z:n[2],x2:r[0],y2:r[1],z2:r[2]})}})),e.inputs.down.on("mid-fire",(function(){if(e.targetedBlock&&0!=e.targetedBlock.blockID){const r=function(t,r){const i=e.ents.getState(n,"inventory"),o=Object.entries(i.items);for(let e=0;e<o.length;e++)if(null!=o[e]&&o[e][1].id==t&&o[e][1].count>=r)return parseInt(o[e][0]);return-1}(s.blocks[s.blockIDmap[e.targetedBlock.blockID]].id,1),i=e.ents.getState(n,"inventory").selected;-1!=r&&r<9?(t.send("actionInventoryClick",{type:"select",slot:r}),e.ents.getState(n,"inventory").selected=r):-1!=r&&t.send("actionInventoryClick",{type:"switch",slot:r,slot2:i})}})),e.inputs.down.on("thirdprsn",(function(){document.pointerLockElement,e.container.canvas})),e.inputs.down.on("inventory",(function(){1==a.inventory.isVisible?(a.inventory.isVisible=!1,e.container.canvas.requestPointerLock()):(a.inventory.isVisible=!0,document.exitPointerLock())})),e.inputs.down.on("chat",(function(){})),e.inputs.down.on("menu",e=>{}),document.addEventListener("pointerlockchange",(function(){document.pointerLockElement,e.container.canvas}),!1),e.inputs.down.on("chatenter",(function(){})),e.inputs.down.on("tab",(function(){})),e.inputs.up.on("tab",(function(){})),e.inputs.up.on("screenshot",(function(){document.pointerLockElement==e.container.canvas&&u(e.container.canvas,{filename:"VoxelSRV-"+Date.now()+".png"})})),e.on("tick",(async function(){const r=e.inputs.state.scrolly;if(0!==r){let i=e.ents.getState(n,"inventory").selected;i+=r>0?1:-1,i>=o.gameSettings.hotbarsize?i=0:i<0&&(i=8),t.send("actionInventoryClick",{slot:i,type:"select"}),e.ents.getState(e.playerEntity,"inventory").selected=i}})),e.inputs.bind("numberkey","1","2","3","4","5","6","7","8","9"),e.inputs.down.on("numberkey",r=>{if(document.pointerLockElement==e.container.canvas){const i=parseInt(r.key);let o=e.ents.getState(n,"inventory").selected;o=i-1,t.send("actionInventoryClick",{slot:o,type:"select"}),e.ents.getState(e.playerEntity,"inventory").selected=o}}),e.on("tick",async()=>{document.pointerLockElement==e.container.canvas||i.isMobile?e.ents.getState(e.playerEntity,"receivesInputs").ignore=!1:e.ents.getState(e.playerEntity,"receivesInputs").ignore=!0}),"true"==localStorage.getItem("gamepad")&&r.setupGamepad(e)},t.setupPlayer=function(e,t,n){const r=e.playerEntity,i=e.entities.getPositionData(r),o=e.rendering.getScene(),s=(i.width,i.height),a=(e.ents.getPositionData(e.playerEntity).height,[0,s/2,0]);e.rendering.getScene().cameras[0].fov=1;const u=e.entities.getMovement(r);u.jumpForce=6,u.jumpImpulse=8.5,u.maxSpeed=7.5,e.ents.createComponent({name:"inventory",state:{items:{},selected:0,tempslot:{},armor:{}}}),null!=t&&e.ents.addComponent(r,"inventory",t),null!=n&&(e.ents.getState(r,"inventory").armor=n),e.entities.addComponent(r,e.entities.names.mesh,{mesh:new BABYLON.Mesh("main",o),offset:a})}},function(e,t,n){"use strict";function r(e){var t=null,n={};e.on("beforeRender",(function(){null!=(t=null!=navigator.getGamepads()[0]?navigator.getGamepads()[0]:null)&&(!function(t,n,r,i){t=Math.round(t),0==(n=Math.round(n))?(e.inputs.state.forward=!1,e.inputs.state.backward=!1):n>0?(e.inputs.state.forward=!1,e.inputs.state.backward=!0):n<0&&(e.inputs.state.forward=!0,e.inputs.state.backward=!1);0==t?(e.inputs.state.left=!1,e.inputs.state.right=!1):t>0?(e.inputs.state.left=!1,e.inputs.state.right=!0):t<0&&(e.inputs.state.left=!0,e.inputs.state.right=!1);e.camera.heading=e.camera.heading+Math.trunc(10*r)/500,e.camera.pitch=e.camera.pitch+Math.trunc(10*i)/500}(t.axes[0],t.axes[1],t.axes[2],t.axes[3]),e.inputs.state.jump=t.buttons[0].pressed,t.buttons[13].pressed&&e.inputs.down.emit("mid-fire"),t.buttons[2].pressed&&1!=n.inventory&&(e.inputs.down.emit("inventory"),n.inventory=!0,setTimeout((function(){n.inventory=!1}),200)),t.buttons[6].pressed&&1!=n.altfire&&(e.inputs.down.emit("alt-fire"),n.altfire=!0,setTimeout((function(){n.altfire=!1}),200)),t.buttons[7].pressed&&1!=n.fire&&(e.inputs.down.emit("fire"),n.fire=!0,setTimeout((function(){n.fire=!1}),200)))})),setInterval((function(){null!=t&&(t.buttons[4].pressed?e.inputs.state.scrolly=-1:t.buttons[5].pressed?e.inputs.state.scrolly=1:e.inputs.state.scrolly=0)}),140)}n.r(t),n.d(t,"setupGamepad",(function(){return r}))},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";var r={MOBILE:"mobile",TABLET:"tablet",SMART_TV:"smarttv",CONSOLE:"console",WEARABLE:"wearable",BROWSER:void 0};e.exports={BROWSER_TYPES:{CHROME:"Chrome",FIREFOX:"Firefox",OPERA:"Opera",YANDEX:"Yandex",SAFARI:"Safari",INTERNET_EXPLORER:"Internet Explorer",EDGE:"Edge",CHROMIUM:"Chromium",IE:"IE",MOBILE_SAFARI:"Mobile Safari",EDGE_CHROMIUM:"Edge Chromium"},DEVICE_TYPES:r,OS_TYPES:{IOS:"iOS",ANDROID:"Android",WINDOWS_PHONE:"Windows Phone",WINDOWS:"Windows",MAC_OS:"Mac OS"},defaultData:{isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1}}},function(e,t,n){"use strict";var r,i=n(2),o=n(0),s=o.BROWSER_TYPES,a=o.OS_TYPES,u=o.DEVICE_TYPES,c=n(4),l=c.checkType,f=c.broPayload,h=c.mobilePayload,d=c.wearPayload,p=c.consolePayload,m=c.stvPayload,v=c.getNavigatorInstance,y=c.isIOS13Check,g=new i,b=g.getBrowser(),w=g.getDevice(),k=g.getEngine(),_=g.getOS(),x=g.getUA(),E=s.CHROME,S=s.CHROMIUM,O=s.IE,T=s.INTERNET_EXPLORER,A=s.OPERA,C=s.FIREFOX,M=s.SAFARI,P=s.EDGE,j=s.YANDEX,I=s.MOBILE_SAFARI,D=u.MOBILE,L=u.TABLET,B=u.SMART_TV,R=u.BROWSER,N=u.WEARABLE,F=u.CONSOLE,z=a.ANDROID,U=a.WINDOWS_PHONE,V=a.IOS,q=a.WINDOWS,Y=a.MAC_OS,$=function(){return _.name===a.WINDOWS&&"10"===_.version&&("string"==typeof x&&-1!==x.indexOf("Edg/"))},W=function(){return b.name===P},H=function(){return y("iPad")},J=w.type===B,G=w.type===F,X=w.type===N,Z=b.name===I||H(),K=b.name===S,Q=function(){switch(w.type){case D:case L:return!0;default:return!1}}()||H(),ee=w.type===D,te=w.type===L||H(),ne=w.type===R,re=_.name===z,ie=_.name===U,oe=_.name===V||H(),se=b.name===E,ae=b.name===C,ue=b.name===M||b.name===I,ce=b.name===A,le=b.name===T||b.name===O,fe=_.version?_.version:"none",he=_.name?_.name:"none",de=b.major,pe=b.version,me=b.name,ve=w.vendor?w.vendor:"none",ye=w.model?w.model:"none",ge=k.name,be=k.version,we=x,ke=W()||$(),_e=b.name===j,xe=w.type,Ee=(r=v())&&(/iPad|iPhone|iPod/.test(r.platform)||"MacIntel"===r.platform&&r.maxTouchPoints>1)&&!window.MSStream,Se=H(),Oe=y("iPhone"),Te=y("iPod"),Ae=function(){var e=v(),t=e&&e.userAgent.toLowerCase();return"string"==typeof t&&/electron/.test(t)}(),Ce=$(),Me=W(),Pe=_.name===q,je=_.name===Y,Ie=l(w.type);e.exports={deviceDetect:function(){var e=Ie.isBrowser,t=Ie.isMobile,n=Ie.isTablet,r=Ie.isSmartTV,i=Ie.isConsole,o=Ie.isWearable;return e?f(e,b,k,_,x):r?m(r,k,_,x):i?p(i,k,_,x):t||n?h(Ie,w,_,x):o?d(o,k,_,x):void 0},isSmartTV:J,isConsole:G,isWearable:X,isMobileSafari:Z,isChromium:K,isMobile:Q,isMobileOnly:ee,isTablet:te,isBrowser:ne,isAndroid:re,isWinPhone:ie,isIOS:oe,isChrome:se,isFirefox:ae,isSafari:ue,isOpera:ce,isIE:le,osVersion:fe,osName:he,fullBrowserVersion:de,browserVersion:pe,browserName:me,mobileVendor:ve,mobileModel:ye,engineName:ge,engineVersion:be,getUA:we,isEdge:ke,isYandex:_e,deviceType:xe,isIOS13:Ee,isIPad13:Se,isIPhone13:Oe,isIPod13:Te,isElectron:Ae,isEdgeChromium:Ce,isLegacyEdge:Me,isWindows:Pe,isMacOs:je}},function(e,t,n){var r;
/*!
 * UAParser.js v0.7.18
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */!function(i,o){"use strict";var s="model",a="name",u="type",c="vendor",l="version",f="mobile",h="tablet",d={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(e,t){for(var n,r,i,o,s,a,u=0;u<t.length&&!s;){var c=t[u],l=t[u+1];for(n=r=0;n<c.length&&!s;)if(s=c[n++].exec(e))for(i=0;i<l.length;i++)a=s[++r],"object"==typeof(o=l[i])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,a):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=a?a.replace(o[1],o[2]):void 0:this[o[0]]=a?o[1].call(this,a,o[2]):void 0:4==o.length&&(this[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):void 0):this[o]=a||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(d.has(t[n][r],e))return"?"===n?void 0:n}else if(d.has(t[n],e))return"?"===n?void 0:n;return e}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},v={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[a,l],[/(opios)[\/\s]+([\w\.]+)/i],[[a,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[a,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[a,l],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[a,"IE"],l],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[a,"Edge"],l],[/(yabrowser)\/([\w\.]+)/i],[[a,"Yandex"],l],[/(puffin)\/([\w\.]+)/i],[[a,"Puffin"],l],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[a,"UCBrowser"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],l],[/(micromessenger)\/([\w\.]+)/i],[[a,"WeChat"],l],[/(qqbrowserlite)\/([\w\.]+)/i],[a,l],[/(QQ)\/([\d\.]+)/i],[a,l],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[a,l],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[a,l],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[a,l],[/(MetaSr)[\/\s]?([\w\.]+)/i],[a],[/(LBBROWSER)/i],[a],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[a,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[l,[a,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[l,[a,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[a,/(.+)/,"$1 WebView"],l],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[a,/(.+(?:g|us))(.+)/,"$1 $2"],l],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[l,[a,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[a,l],[/(dolfin)\/([\w\.]+)/i],[[a,"Dolphin"],l],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[a,"Chrome"],l],[/(coast)\/([\w\.]+)/i],[[a,"Opera Coast"],l],[/fxios\/([\w\.-]+)/i],[l,[a,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[a,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,a],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[a,"GSA"],l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[l,p.str,m.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[a,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],l],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,l]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[s,c,[u,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[s,[c,"Apple"],[u,h]],[/(apple\s{0,1}tv)/i],[[s,"Apple TV"],[c,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,s,[u,h]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[s,[c,"Amazon"],[u,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[s,p.str,m.device.amazon.model],[c,"Amazon"],[u,f]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[s,c,[u,f]],[/\((ip[honed|\s\w*]+);/i],[s,[c,"Apple"],[u,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,s,[u,f]],[/\(bb10;\s(\w+)/i],[s,[c,"BlackBerry"],[u,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[s,[c,"Asus"],[u,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[s,"Xperia Tablet"],[u,h]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[s,[c,"Sony"],[u,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,s,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[s,[c,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[s,[c,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[c,p.str,m.device.sprint.vendor],[s,p.str,m.device.sprint.model],[u,f]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[c,s,[u,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[c,[s,/_/g," "],[u,f]],[/(nexus\s9)/i],[s,[c,"HTC"],[u,h]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[s,[c,"Huawei"],[u,f]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,s,[u,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[s,[c,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[c,"Microsoft"],[u,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[s,[c,"Motorola"],[u,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[c,"Motorola"],[u,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,d.trim],[s,d.trim],[u,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[c,"Samsung"],[u,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[s,[c,"Sharp"],[u,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],s,[u,h]],[/smart-tv.+(samsung)/i],[c,[u,"smarttv"],s],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[c,"Samsung"],s,[u,f]],[/sie-(\w*)/i],[s,[c,"Siemens"],[u,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[c,"Nokia"],s,[u,f]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[s,[c,"Acer"],[u,h]],[/android.+([vl]k\-?\d{3})\s+build/i],[s,[c,"LG"],[u,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],s,[u,h]],[/(lg) netcast\.tv/i],[c,s,[u,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[s,[c,"LG"],[u,f]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[s,[c,"Lenovo"],[u,h]],[/linux;.+((jolla));/i],[c,s,[u,f]],[/((pebble))app\/[\d\.]+\s/i],[c,s,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,s,[u,f]],[/crkey/i],[[s,"Chromecast"],[c,"Google"]],[/android.+;\s(glass)\s\d/i],[s,[c,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)\s/i],[s,[c,"Google"],[u,h]],[/android.+;\s(pixel xl|pixel)\s/i],[s,[c,"Google"],[u,f]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[s,/_/g," "],[c,"Xiaomi"],[u,f]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[s,/_/g," "],[c,"Xiaomi"],[u,h]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[s,[c,"Meizu"],[u,h]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[s,[c,"OnePlus"],[u,f]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[s,[c,"RCA"],[u,h]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[s,[c,"Dell"],[u,h]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[s,[c,"Verizon"],[u,h]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[c,"Barnes & Noble"],s,[u,h]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[s,[c,"NuVision"],[u,h]],[/android.+;\s(k88)\sbuild/i],[s,[c,"ZTE"],[u,h]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[s,[c,"Swiss"],[u,f]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[s,[c,"Swiss"],[u,h]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[s,[c,"Zeki"],[u,h]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[c,"Dragon Touch"],s,[u,h]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[s,[c,"Insignia"],[u,h]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[s,[c,"NextBook"],[u,h]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[c,"Voice"],s,[u,f]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[c,"LvTel"],s,[u,f]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[s,[c,"Envizen"],[u,h]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[c,s,[u,h]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[s,[c,"MachSpeed"],[u,h]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[c,s,[u,h]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[s,[c,"Rotor"],[u,h]],[/android.+(KS(.+))\s+build/i],[s,[c,"Amazon"],[u,h]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[c,s,[u,h]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,d.lowerize],c,s],[/(android[\w\.\s\-]{0,9});.+build/i],[s,[c,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[a,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,l],[/rv\:([\w\.]{1,9}).+(gecko)/i],[l,a]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[a,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[l,p.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[l,p.str,m.os.windows.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[a,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[a,"Symbian"],l],[/\((series40);/i],[a],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],l],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[a,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],l],[/(sunos)\s?([\w\.\d]*)/i],[[a,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[a,l],[/(haiku)\s(\w+)/i],[a,l],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[l,/_/g,"."],[a,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[a,"Mac OS"],[l,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[a,l]]},y=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof y))return new y(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?d.extend(v,t):v;return this.getBrowser=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,r.browser),e.major=d.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return p.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return p.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};y.VERSION="0.7.18",y.BROWSER={NAME:a,MAJOR:"major",VERSION:l},y.CPU={ARCHITECTURE:"architecture"},y.DEVICE={MODEL:s,VENDOR:c,TYPE:u,CONSOLE:"console",MOBILE:f,SMARTTV:"smarttv",TABLET:h,WEARABLE:"wearable",EMBEDDED:"embedded"},y.ENGINE={NAME:a,VERSION:l},y.OS={NAME:a,VERSION:l},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=y),t.UAParser=y):n(3)?void 0===(r=function(){return y}.call(t,n,t,e))||(e.exports=r):i&&(i.UAParser=y);var g=i&&(i.jQuery||i.Zepto);if(void 0!==g){var b=new y;g.ua=b.getResult(),g.ua.get=function(){return b.getUA()},g.ua.set=function(e){b.setUA(e);var t=b.getResult();for(var n in t)g.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),o=i.DEVICE_TYPES,s=i.defaultData,a=t.getNavigatorInstance=function(){return!("undefined"==typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},u=t.isIOS13Check=function(e){var t=a();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)};e.exports={checkType:function(e){switch(e){case o.MOBILE:return{isMobile:!0};case o.TABLET:return{isTablet:!0};case o.SMART_TV:return{isSmartTV:!0};case o.CONSOLE:return{isConsole:!0};case o.WEARABLE:return{isWearable:!0};case o.BROWSER:return{isBrowser:!0};default:return s}},broPayload:function(e,t,n,r,i){return{isBrowser:e,browserMajorVersion:t.major,browserFullVersion:t.version,browserName:t.name,engineName:n.name||!1,engineVersion:n.version,osName:r.name,osVersion:r.version,userAgent:i}},mobilePayload:function(e,t,n,i){return r({},e,{vendor:t.vendor,model:t.model,os:n.name,osVersion:n.version,ua:i})},stvPayload:function(e,t,n,r){return{isSmartTV:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},consolePayload:function(e,t,n,r){return{isConsole:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},wearPayload:function(e,t,n,r){return{isWearable:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},getNavigatorInstance:a,isIOS13Check:u}}])},function(e,t,n){const r=n(322);let i=null;function o(e){const t=r(e);return["jpg","jpeg"].includes(t)?"image/jpeg":"image/png"}e.exports=function(e,t={}){const n=new Date,{filename:r=`Screen Shot ${n.toISOString().slice(0,10)} at ${n.toTimeString().slice(0,8).replace(/:/g,".")}.png`,quality:s=1,useBlob:a,download:u=!0}={...t};if(u&&(i=i||document.createElement("a"),i.download=r),a)return new Promise(t=>{e.toBlob(e=>{if(u){const t=URL.createObjectURL(e);i.href=t;const n=new MouseEvent("click");i.dispatchEvent(n),setTimeout(()=>{URL.revokeObjectURL(t)},1)}t(e)},o(r),s)});const c=e.toDataURL(o(r)+";base64",s);if(u){i.href=c;const e=new MouseEvent("click");i.dispatchEvent(e)}return c}},function(e,t,n){"use strict";
/*! file-extension v4.0.5 | (c) silverwind | BSD license */e.exports=function(e,t){if(t||(t={}),!e)return"";var n=(/[^./\\]*$/.exec(e)||[""])[0];return t.preserveCase?n:n.toLowerCase()}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.playSound=t.sounds=void 0;const s=o(n(228)),a=n(76);t.sounds={},t.playSound=function(e,n,r,i){const o=Object.keys(t.sounds)[Object.keys(t.sounds).length-1]+1;let u,c=n/10;function l(){t.sounds[o].play()}0>n?c=0:1<n&&(c=.1),console.log("Playing: "+e,"Volume: "+n,"Position: "+r),u=e.startsWith("http://")||e.startsWith("https://")&&1==a.gameSettings.allowcustom?e:"audio/"+e,null!=r?(t.sounds[o]=new s.Sound("Sound",u,i.rendering.getScene(),l,{volume:c,spatialSound:!0,maxDistance:100}),t.sounds[o].setPosition(new s.Vector3(r[0],r[1],r[2]))):t.sounds[o]=new s.Sound("Sound",u,i.rendering.getScene(),l,{volume:c}),t.sounds[o].onended=function(){delete t.sounds[o]}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.applyModel=t.defineModelComp=void 0;const s=o(n(226)),a=n(76),u={};let c;function l(e,t){console.log("Building model...");for(var n=c.rendering.getScene(),r=e.textureSize,i=new s.Mesh("main",n),o=e.models,u={},l=0;l<o.length;l++){for(var f=o[l],h=f.translate,d=f.boxes,p=new Array(d.length),m=0;m<d.length;m++){var v=0;null!=d[m].sizeAdd&&(v=d[m].sizeAdd);var y=new Array(6),g=d[m].coordinates,b=d[m].textureOffset;y[0]=new s.Vector4((b[0]+g[5])/r[0],(r[1]-g[4]-g[5]-b[1])/r[1],(g[3]+g[5]+b[0])/r[0],(r[1]-g[5]-b[1])/r[1]),y[1]=new s.Vector4((b[0]+2*g[5]+g[3])/r[0],(r[1]-g[4]-g[5]-b[1])/r[1],(2*g[5]+2*g[3]+b[0])/r[0],(r[1]-g[5]-b[1])/r[1]),y[2]=new s.Vector4(b[0]/r[0],(r[1]-g[4]-g[5]-b[1])/r[1],(b[0]+g[5])/r[0],(r[1]-g[5]-b[1])/r[1]),y[3]=new s.Vector4((b[0]+g[5]+g[3])/r[0],(r[1]-g[4]-g[5]-b[1])/r[1],(g[5]+2*g[3]+b[0])/r[0],(r[1]-g[5]-b[1])/r[1]),y[4]=new s.Vector4((g[3]+g[5]+b[0])/r[0],(r[1]-g[5]-b[1])/r[1],(b[0]+g[5])/r[0],(r[1]-b[1])/r[1]),y[5]=new s.Vector4((2*g[3]+g[5]+b[0])/r[0],(r[1]-g[5]-b[1])/r[1],(b[0]+g[5]+g[3])/r[0],(r[1]-b[1])/r[1]),p[m]=s.MeshBuilder.CreateBox("part-"+f.id+"-"+m,{height:(g[4]+2*v)/1,width:(g[3]+2*v)/1,depth:(g[5]+2*v)/1,faceUV:y,wrap:!0},n),p[m].setPivotMatrix(s.Matrix.Translation(h[0],h[1],h[2])),p[m].setPositionWithLocalVector(new s.Vector3((g[0]+g[3]/2+v/2)/1,(g[1]+g[4]/2+v/2)/1,(g[2]+g[5]/2+v/2)/1));var w=c.rendering.makeStandardMaterial("modelmaterial-"+f.id+"-"+m);p[m].material=w,(t.startsWith("http://")||t.startsWith("https://"))&&1==a.gameSettings.allowcustom?w.diffuseTexture=new s.Texture(t,n,!0,!0,s.Texture.NEAREST_SAMPLINGMODE):w.diffuseTexture=new s.Texture("textures/"+t+".png",n,!0,!0,s.Texture.NEAREST_SAMPLINGMODE),p[m].opaque=!1,w.diffuseTexture.hasAlpha=!0}var k=s.Mesh.MergeMeshes(p,!0,!0,void 0,!0,!0);k.setParent(i),k.scaling=new s.Vector3(.06,.06,.06),u[f.id]=k,c.rendering.addMeshToScene(k)}return{main:i,models:u}}function f(e,t,n){var r=c.rendering.getScene(),i="bold 96px 'lato'",o=new s.DynamicTexture("DynamicTexture",64,r,!1).getContext();o.font=i;var a=o.measureText(t).width+8,u=a*(.3/144),l=new s.DynamicTexture("DynamicTexture",{width:a,height:144},r,!1),f=c.rendering.makeStandardMaterial("nametag");f.diffuseTexture=l,f.emissiveTexture=f.diffuseTexture,f.diffuseTexture.hasAlpha=!0,f.opacityTexture=f.diffuseTexture,l.drawText(t,null,null,i,"#eeeeee","#00000066",!0);var h=s.MeshBuilder.CreatePlane("plane",{width:u,height:.3},r);return h.material=f,h.setPositionWithLocalVector(new s.Vector3(0,n+.2,0)),h.opaque=!1,h.setParent(e),c.rendering.addMeshToScene(h),h}t.defineModelComp=function(e){c=e,c.ents.createComponent({name:"model",state:{models:{}}})},t.applyModel=function(e,t,n,r,i,o,a){const h=c.rendering.getScene();if(null==u[t])fetch("./models/"+t+".jem").then(e=>e.json()).then((function(d){const p=l(d,n);u[t]=d,i&&(p.nametag=f(p.main,o,c.ents.getPositionData(e).height)),c.ents.addComponent(e,"model",p);const m=s.MeshBuilder.CreateBox("hitbox",{height:a[1],width:a[0],depth:a[2]},h);m.setParent(p.main),m.setPositionWithLocalVector(new s.Vector3(0,a[1]/2,0)),m.material=c.rendering.makeStandardMaterial(),m.material.wireframe=!0,c.rendering.addMeshToScene(m,!1),c.entities.addComponent(e,c.entities.names.mesh,{mesh:p.main,offset:r})}));else{var d=l(u[t],n);i&&(d.nametag=f(d.main,o,c.ents.getPositionData(e).height)),c.ents.addComponent(e,"model",d),c.entities.addComponent(e,c.entities.names.mesh,{mesh:d.main,offset:r})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(326),i=n(227);t.default=function(e,t,n,o){i.buildHotbar(e),r.setupDot(),r.setupDebug(e,t.server),i.buildInventory(e,t)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.setupDot=t.setupDebug=void 0;const s=n(192),a=o(n(201)),u=n(76);t.setupDebug=function(e,t){s.getLayer(0);const n=s.getUI(0),r=e.playerEntity,i=e.entities.getPositionData(r),o=new a.TextBlock;let c;n.addControl(o),o.text="",o.color="#f0f0f0",o.fontSize="24px",o.left="5px",o.top="5px",o.shadowColor="#111111",o.shadowOffsetX=1,o.shadowOffsetY=1,o.textHorizontalAlignment=a.Control.HORIZONTAL_ALIGNMENT_LEFT,o.textVerticalAlignment=a.Control.VERTICAL_ALIGNMENT_TOP,c=null!=t?`Server: ${t}\n`:"Singleplayer world\n",e.on("tick",(async function(){const t=`${i.position[0].toFixed(1)}, ${i.position[1].toFixed(1)}, ${i.position[2].toFixed(1)}`,n=`VoxelSrv ${u.gameVersion}\nNoa: ${e.version}\nXYZ: ${t}\n${c}`;o.text=n}))},t.setupDot=function(){s.getLayer(0);const e=s.getUI(0),t=new a.Ellipse;t.background="#eeeeee88",t.height="6px",t.width="6px",t.thickness=0,e.addControl(t)}},function(e,t,n){const r=n(328),i=n(125),o=new i,s=new i,a=n(346),u=n(347),c=r.Root.fromJSON(a),l=r.Root.fromJSON(u);function f(e){var t={};return Object.entries(e).forEach(e=>{t[e[1]]=e[0]}),t}var h={...Object.keys(a.nested)},d=f(h),p={...Object.keys(u.nested)},m=f(p);e.exports={server:c,serverIDtoName:h,serverNameToID:d,eventServer:o,client:l,clientIDtoName:p,clientNameToID:m,eventClient:s,parseToObject:function(e,t){if("server"==e){if(null==(r=h[t[0]]))return null;var n=c.lookupType(r)}else{var r;if(null==(r=p[t[0]]))return null;n=l.lookupType(r);e="client"}var i=t.slice(1),o=n.decode(i);if(null!=n)var s=n.verify(o);else s="Invalid packet";return s?(console.error("Invalid "+e+" packet! Type: "+r,s),null):{data:n.toObject(o),type:r}},parseToMessage:function(e,t,n){if("server"==e){if(null==(i=d[t]))return null;var r=c.lookupType(t)}else{var i;if(null==(i=m[t]))return null;r=l.lookupType(t);e="client"}if(null!=r)var o=r.verify(n);else o="Invalid packet";if(o)return console.error("Invalid "+e+" packet! Type: "+t,n,o),null;var s=r.create(n),a=r.encode(s).finish(),u=new Uint8Array(1+a.length);return u.set([i]),u.set(a,1),u.buffer}}},function(e,t,n){"use strict";e.exports=n(329)},function(e,t,n){"use strict";var r=e.exports=n(330);r.build="full",r.tokenize=n(239),r.parse=n(344),r.common=n(345),r.Root._configure(r.Type,r.parse,r.common)},function(e,t,n){"use strict";var r=e.exports=n(331);r.build="light",r.load=function(e,t,n){return"function"==typeof t?(n=t,t=new r.Root):t||(t=new r.Root),t.load(e,n)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=n(234),r.decoder=n(235),r.verifier=n(236),r.converter=n(237),r.ReflectionObject=n(130),r.Namespace=n(139),r.Root=n(200),r.Enum=n(88),r.Type=n(195),r.Field=n(118),r.OneOf=n(155),r.MapField=n(196),r.Service=n(197),r.Method=n(198),r.Message=n(199),r.wrappers=n(238),r.types=n(131),r.util=n(62),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},function(e,t,n){"use strict";var r=t;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(193),r.BufferWriter=n(338),r.Reader=n(194),r.BufferReader=n(339),r.util=n(101),r.rpc=n(232),r.roots=n(233),r.configure=i,i()},function(e,t,n){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),o=new Array(123),s=0;s<64;)o[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,n){for(var r,o=null,s=[],a=0,u=0;t<n;){var c=e[t++];switch(u){case 0:s[a++]=i[c>>2],r=(3&c)<<4,u=1;break;case 1:s[a++]=i[r|c>>4],r=(15&c)<<2,u=2;break;case 2:s[a++]=i[r|c>>6],s[a++]=i[63&c],u=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=i[r],s[a++]=61,1===u&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};r.decode=function(e,t,n){for(var r,i=n,s=0,a=0;a<e.length;){var u=e.charCodeAt(a++);if(61===u&&s>1)break;if(void 0===(u=o[u]))throw Error("invalid encoding");switch(s){case 0:r=u,s=1;break;case 1:t[n++]=r<<2|(48&u)>>4,r=u,s=2;break;case 2:t[n++]=(15&r)<<4|(60&u)>>2,r=u,s=3;break;case 3:t[n++]=(3&r)<<6|u,s=0}}if(1===s)throw Error("invalid encoding");return n-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){"use strict";function r(){this._listeners={}}e.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},function(e,t,n){"use strict";function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,s),e.readFloatBE=n.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(a=r*Math.pow(2,-u))>>>0,i,o+t),e((s<<31|u+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function n(e,t,n,r,i){var o=e(r,i+t),s=e(r,i+n),a=2*(s>>31)+1,u=s>>>20&2047,c=4294967296*(1048575&s)+o;return 2047===u?c?NaN:a*(1/0):0===u?5e-324*a*c:a*Math.pow(2,u-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,a,4,0)}(),e}function i(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},function(e,t,n){"use strict";var r=t;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],s=0;t<n;)(r=e[t++])<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,n){for(var r,i,o=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return e(n);s+n>r&&(o=e(r),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},function(e,t,n){"use strict";e.exports=i;var r=n(101);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";e.exports=o;var r=n(193);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(101);function o(){r.call(this)}function s(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},function(e,t,n){"use strict";e.exports=o;var r=n(194);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(101);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},function(e,t,n){"use strict";e.exports=i;var r=n(101);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,i,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";function r(e,t){"string"==typeof e&&(t=e,e=void 0);var n=[];function i(e){if("string"!=typeof e){var t=o();if(r.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var s=Object.keys(e),a=new Array(s.length+1),u=new Array(s.length),c=0;c<s.length;)a[c]=s[c],u[c]=e[s[c++]];return a[c]=t,Function.apply(null,a).apply(null,u)}return Function(t)()}for(var l=new Array(arguments.length-1),f=0;f<l.length;)l[f]=arguments[++f];if(f=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var n=l[f++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"})),f!==l.length)throw Error("parameter count mismatch");return n.push(e),i}function o(r){return"function "+(r||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=o,i}e.exports=r,r.verbose=!1},function(e,t,n){"use strict";e.exports=o;var r=n(230),i=n(231)("fs");function o(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&i&&i.readFile?i.readFile(e,(function(r,i){return r&&"undefined"!=typeof XMLHttpRequest?o.xhr(e,t,n):r?n(r):n(null,t.binary?i:i.toString("utf8"))})):o.xhr(e,t,n):r(o,this,e,t)}o.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var i=0;i<r.responseText.length;++i)e.push(255&r.responseText.charCodeAt(i))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)}},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},function(e,t,n){"use strict";var r=t,i=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},o=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=i(e),r="";n&&(r=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?o>0&&".."!==t[o-1]?t.splice(--o,2):n?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return r+t.join("/")};r.resolve=function(e,t,n){return n||(t=o(t)),i(t)?t:(n||(e=o(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?o(e+"/"+t):t)}},function(e,t,n){"use strict";e.exports=E,E.filename=null,E.defaults={keepCase:!1};var r=n(239),i=n(200),o=n(195),s=n(118),a=n(196),u=n(155),c=n(88),l=n(197),f=n(198),h=n(131),d=n(62),p=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,v=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,g=/^0[0-7]+$/,b=/^-?0[0-7]+$/,w=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,k=/^[a-zA-Z_][a-zA-Z_0-9]*$/,_=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,x=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function E(e,t,n){t instanceof i||(n=t,t=new i),n||(n=E.defaults);var S,O,T,A,C,M=n.preferTrailingComment||!1,P=r(e,n.alternateCommentMode||!1),j=P.next,I=P.push,D=P.peek,L=P.skip,B=P.cmnt,R=!0,N=!1,F=t,z=n.keepCase?function(e){return e}:d.camelCase;function U(e,t,n){var r=E.filename;return n||(E.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(r?r+", ":"")+"line "+P.line+")")}function V(){var e,t=[];do{if('"'!==(e=j())&&"'"!==e)throw U(e);t.push(j()),L(e),e=D()}while('"'===e||"'"===e);return t.join("")}function q(e){var t=j();switch(t){case"'":case'"':return I(t),V();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var n=1;"-"===e.charAt(0)&&(n=-1,e=e.substring(1));switch(e){case"inf":case"INF":case"Inf":return n*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(p.test(e))return n*parseInt(e,10);if(v.test(e))return n*parseInt(e,16);if(g.test(e))return n*parseInt(e,8);if(w.test(e))return n*parseFloat(e);throw U(e,"number",t)}(t,!0)}catch(n){if(e&&_.test(t))return t;throw U(t,"value")}}function Y(e,t){var n,r;do{!t||'"'!==(n=D())&&"'"!==n?e.push([r=$(j()),L("to",!0)?$(j()):r]):e.push(V())}while(L(",",!0));L(";")}function $(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw U(e,"id");if(m.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw U(e,"id")}function W(){if(void 0!==S)throw U("package");if(S=j(),!_.test(S))throw U(S,"name");F=F.define(S),L(";")}function H(){var e,t=D();switch(t){case"weak":e=T||(T=[]),j();break;case"public":j();default:e=O||(O=[])}t=V(),L(";"),e.push(t)}function J(){if(L("="),A=V(),!(N="proto3"===A)&&"proto2"!==A)throw U(A,"syntax");L(";")}function G(e,t){switch(t){case"option":return K(e,t),L(";"),!0;case"message":return function(e,t){if(!k.test(t=j()))throw U(t,"type name");var n=new o(t);X(n,(function(e){if(!G(n,e))switch(e){case"map":!function(e){L("<");var t=j();if(void 0===h.mapKey[t])throw U(t,"type");L(",");var n=j();if(!_.test(n))throw U(n,"type");L(">");var r=j();if(!k.test(r))throw U(r,"name");L("=");var i=new a(z(r),$(j()),t,n);X(i,(function(e){if("option"!==e)throw U(e);K(i,e),L(";")}),(function(){te(i)})),e.add(i)}(n);break;case"required":case"optional":case"repeated":Z(n,e);break;case"oneof":!function(e,t){if(!k.test(t=j()))throw U(t,"name");var n=new u(z(t));X(n,(function(e){"option"===e?(K(n,e),L(";")):(I(e),Z(n,"optional"))})),e.add(n)}(n,e);break;case"extensions":Y(n.extensions||(n.extensions=[]));break;case"reserved":Y(n.reserved||(n.reserved=[]),!0);break;default:if(!N||!_.test(e))throw U(e);I(e),Z(n,"optional")}})),e.add(n)}(e,t),!0;case"enum":return function(e,t){if(!k.test(t=j()))throw U(t,"name");var n=new c(t);X(n,(function(e){switch(e){case"option":K(n,e),L(";");break;case"reserved":Y(n.reserved||(n.reserved=[]),!0);break;default:!function(e,t){if(!k.test(t))throw U(t,"name");L("=");var n=$(j(),!0),r={};X(r,(function(e){if("option"!==e)throw U(e);K(r,e),L(";")}),(function(){te(r)})),e.add(t,n,r.comment)}(n,e)}})),e.add(n)}(e,t),!0;case"service":return function(e,t){if(!k.test(t=j()))throw U(t,"service name");var n=new l(t);X(n,(function(e){if(!G(n,e)){if("rpc"!==e)throw U(e);!function(e,t){var n=B(),r=t;if(!k.test(t=j()))throw U(t,"name");var i,o,s,a,u=t;L("("),L("stream",!0)&&(o=!0);if(!_.test(t=j()))throw U(t);i=t,L(")"),L("returns"),L("("),L("stream",!0)&&(a=!0);if(!_.test(t=j()))throw U(t);s=t,L(")");var c=new f(u,r,i,s,o,a);c.comment=n,X(c,(function(e){if("option"!==e)throw U(e);K(c,e),L(";")})),e.add(c)}(n,e)}})),e.add(n)}(e,t),!0;case"extend":return function(e,t){if(!_.test(t=j()))throw U(t,"reference");var n=t;X(null,(function(t){switch(t){case"required":case"repeated":case"optional":Z(e,t,n);break;default:if(!N||!_.test(t))throw U(t);I(t),Z(e,"optional",n)}}))}(e,t),!0}return!1}function X(e,t,n){var r=P.line;if(e&&("string"!=typeof e.comment&&(e.comment=B()),e.filename=E.filename),L("{",!0)){for(var i;"}"!==(i=j());)t(i);L(";",!0)}else n&&n(),L(";"),e&&("string"!=typeof e.comment||M)&&(e.comment=B(r)||e.comment)}function Z(e,t,n){var r=j();if("group"!==r){if(!_.test(r))throw U(r,"type");var i=j();if(!k.test(i))throw U(i,"name");i=z(i),L("=");var a=new s(i,$(j()),r,t,n);X(a,(function(e){if("option"!==e)throw U(e);K(a,e),L(";")}),(function(){te(a)})),e.add(a),N||!a.repeated||void 0===h.packed[r]&&void 0!==h.basic[r]||a.setOption("packed",!1,!0)}else!function(e,t){var n=j();if(!k.test(n))throw U(n,"name");var r=d.lcFirst(n);n===r&&(n=d.ucFirst(n));L("=");var i=$(j()),a=new o(n);a.group=!0;var u=new s(r,i,n,t);u.filename=E.filename,X(a,(function(e){switch(e){case"option":K(a,e),L(";");break;case"required":case"optional":case"repeated":Z(a,e);break;default:throw U(e)}})),e.add(a).add(u)}(e,t)}function K(e,t){var n=L("(",!0);if(!_.test(t=j()))throw U(t,"name");var r,i=t,o=i;n&&(L(")"),o=i="("+i+")",t=D(),x.test(t)&&(r=t.substr(1),i+=t,j())),L("="),function(e,t,n,r){e.setParsedOption&&e.setParsedOption(t,n,r)}(e,o,Q(e,i),r)}function Q(e,t){if(L("{",!0)){for(var n={};!L("}",!0);){if(!k.test(C=j()))throw U(C,"name");var r,i=C;"{"===D()?r=Q(e,t+"."+C):(L(":"),"{"===D()?r=Q(e,t+"."+C):(r=q(!0),ee(e,t+"."+C,r)));var o=n[i];o&&(r=[].concat(o).concat(r)),n[i]=r,L(",",!0)}return n}var s=q(!0);return ee(e,t,s),s}function ee(e,t,n){e.setOption&&e.setOption(t,n)}function te(e){if(L("[",!0)){do{K(e,"option")}while(L(",",!0));L("]")}return e}for(;null!==(C=j());)switch(C){case"package":if(!R)throw U(C);W();break;case"import":if(!R)throw U(C);H();break;case"syntax":if(!R)throw U(C);J();break;case"option":K(F,C),L(";");break;default:if(G(F,C)){R=!1;continue}throw U(C)}return E.filename=null,{package:S,imports:O,weakImports:T,syntax:A,root:t}}},function(e,t,n){"use strict";e.exports=o;var r,i=/\/|\./;function o(e,t){i.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),o[e]=t}o("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),o("duration",{Duration:r={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),o("timestamp",{Timestamp:r}),o("empty",{Empty:{fields:{}}}),o("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),o("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),o("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),o.get=function(e){return o[e]||null}},function(e){e.exports=JSON.parse('{"nested":{"loginRequest":{"fields":{"name":{"type":"string","id":1},"protocol":{"type":"int32","id":2},"maxplayers":{"type":"int32","id":3},"numberplayers":{"type":"int32","id":4},"motd":{"type":"string","id":5},"software":{"type":"string","id":6}}},"loginSuccess":{"fields":{"xPos":{"type":"double","id":1},"yPos":{"type":"double","id":2},"zPos":{"type":"double","id":3},"itemsDef":{"type":"string","id":4},"blocksDef":{"type":"string","id":5},"inventory":{"type":"string","id":6},"armor":{"type":"string","id":7}}},"playerEntity":{"fields":{"uuid":{"type":"string","id":1}}},"playerTeleport":{"fields":{"x":{"type":"double","id":1},"y":{"type":"double","id":2},"z":{"type":"double","id":3}}},"playerInventory":{"fields":{"inventory":{"type":"string","id":1},"type":{"type":"string","id":2}}},"playerSlotUpdate":{"fields":{"slot":{"type":"int32","id":1},"type":{"type":"string","id":2},"data":{"type":"string","id":3}}},"playerMovementChange":{"fields":{"key":{"type":"string","id":1},"value":{"type":"double","id":2}}},"playerKick":{"fields":{"reason":{"type":"string","id":1}}},"soundPlay":{"fields":{"sound":{"type":"string","id":1},"volume":{"type":"int32","id":2},"x":{"type":"double","id":3},"y":{"type":"double","id":4},"z":{"type":"double","id":5}}},"chatMessage":{"fields":{"message":{"type":"string","id":1}}},"tabUpdate":{"fields":{"message":{"type":"string","id":1}}},"entityCreate":{"fields":{"uuid":{"type":"string","id":1},"data":{"type":"string","id":2}}},"entityRemove":{"fields":{"uuid":{"type":"string","id":1}}},"entityMove":{"fields":{"uuid":{"type":"string","id":1},"x":{"type":"double","id":2},"y":{"type":"double","id":3},"z":{"type":"double","id":4},"rotation":{"type":"float","id":5}}},"worldBlockUpdate":{"fields":{"x":{"type":"int32","id":1},"y":{"type":"int32","id":2},"z":{"type":"int32","id":3},"id":{"type":"uint32","id":4}}},"worldChunk":{"fields":{"x":{"type":"int32","id":1},"y":{"type":"int32","id":2},"z":{"type":"int32","id":3},"data":{"type":"bytes","id":4},"type":{"type":"bool","id":5}}},"registryUpdate":{"fields":{"itemsDef":{"type":"string","id":1},"blocksDef":{"type":"string","id":2}}}}}')},function(e){e.exports=JSON.parse('{"nested":{"loginResponse":{"fields":{"username":{"type":"string","id":1},"protocol":{"type":"uint32","id":2},"mobile":{"type":"bool","id":3}}},"actionMove":{"fields":{"x":{"type":"double","id":1},"y":{"type":"double","id":2},"z":{"type":"double","id":3},"rotation":{"type":"float","id":4}}},"actionMessage":{"fields":{"message":{"type":"string","id":1}}},"actionBlockPlace":{"fields":{"x":{"type":"int32","id":1},"y":{"type":"int32","id":2},"z":{"type":"int32","id":3},"x2":{"type":"int32","id":4},"y2":{"type":"int32","id":5},"z2":{"type":"int32","id":6}}},"actionBlockBreak":{"fields":{"x":{"type":"int32","id":1},"y":{"type":"int32","id":2},"z":{"type":"int32","id":3}}},"actionInventoryClick":{"fields":{"slot":{"type":"int32","id":1},"type":{"type":"string","id":2},"inventory":{"type":"string","id":3},"slot2":{"type":"int32","id":4}}}}}')},function(e,t,n){"use strict";n.r(t);var r=n(276),i=n(125).EventEmitter;function o(e,t){t=t||{},this._noa=e,this.element=t.domElement||function(){var e=document.createElement("div");return e.tabindex=1,e.style.position="fixed",e.style.left="0px",e.style.right="0px",e.style.top="0px",e.style.bottom="0px",e.style.height="100%",e.style.overflow="hidden",document.body.appendChild(e),document.body.style.overflow="hidden",document.body.style.height="100%",e.id="noa-container",e}(),this.canvas=function(e){var t=e.querySelector("canvas");t||((t=document.createElement("canvas")).style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.height="100%",t.style.width="100%",t.id="noa-canvas",e.insertBefore(t,e.firstChild));return t}(this.element),this._shell=function(e,t){(t=Object.assign({pointerLock:!1,preventDefaults:!1},t)).element=e;var n=r(t);return n.preventDefaults=t.preventDefaults,n}(this.canvas,t),this.hasPointerLock=!1,this.supportsPointerLock=!1,this.pointerInGame=!1,this.isFocused=document.hasFocus();var n=this,i=function(e){!function(e,t){var n=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement;n?(e.hasPointerLock=!0,e.emit("gainedPointerLock")):(e.hasPointerLock=!1,e.emit("lostPointerLock"));n&&(e.pointerInGame=!0)}(n)};document.addEventListener("pointerlockchange",i,!1),document.addEventListener("mozpointerlockchange",i,!1),document.addEventListener("webkitpointerlockchange",i,!1),function(e){if("pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document){e.supportsPointerLock=!0;var t=function(n){e.supportsPointerLock=!1,document.removeEventListener(n.type,t)};document.addEventListener("touchmove",t)}}(n),n.element.addEventListener("mouseenter",(function(){n.pointerInGame=!0})),n.element.addEventListener("mouseleave",(function(){n.pointerInGame=!1})),window.addEventListener("focus",(function(){n.isFocused=!0})),window.addEventListener("blur",(function(){n.isFocused=!1})),this._shell.on("init",s.bind(null,this))}function s(e){var t=e._noa,n=e._shell;n.on("tick",(function(e){t.tick(e)})),n.on("render",(function(e){t.render(e)})),n.on("resize",t.rendering.resize.bind(t.rendering)),e.emit("DOMready")}function a(e,t){var n=e.indexOf(t);n<0||(n===e.length-1?e.pop():e[n]=e.pop())}function u(e,t,n){for(var r=(n||performance.now())+e,i=0;i<1e3;i++){if(t()||performance.now()>r)return}}o.prototype=Object.create(i.prototype),o.prototype.appendTo=function(e){this.element.appendChild(e)},o.prototype.setPointerLock=function(e){this._shell.pointerLock=!!e};var c=0,l=0;function f(e,t,n,r,i){e?function(e,t,n,r,i,o,s,a,u,c,l){for(var f=0;f<o;f++)for(var h=0;h<s;h++)for(var d=e.index(n+f,r+h,i),p=t.index(u+f,c+h,l),m=0;m<a;m++)t.data[p]=e.data[d],d+=e.stride[2],p+=t.stride[2]}(e,t,n[0],n[1],n[2],r[0],r[1],r[2],i[0],i[1],i[2]):function(e,t,n,r,i,o,s){for(var a=0;a<i;a++)for(var u=0;u<o;u++)for(var c=e.index(t+a,n+u,r),l=0;l<s;l++)e.data[c]=0,c+=e.stride[2]}(t,i[0],i[1],i[2],r[0],r[1],r[2])}function h(){this.arr=[],this.hash={}}function d(e,t){var n=t||"",r=e||1,i=[],o=[],s=0,a=0,u=0,c=0,l=!0;return function(e){"start"===e?(l&&(i.length=o.length=0,l=!1),s=a=performance.now(),u++):"end"===e?function(){if(c+=performance.now()-s,u===r){var e=n+" total "+(c/r).toFixed(2)+"ms (avg, "+r+" runs)    ";console.log(e,o.map((function(e,t){return e+": "+(i[t]/r).toFixed(2)+"ms    "})).join("")),l=!0,u=0,c=0}}():function(e){var t=performance.now();o.indexOf(e)<0&&o.push(e);var n=o.indexOf(e);i[n]||(i[n]=0),i[n]+=t-a,a=t}(e)}}h.prototype.includes=function(e){return this.hash[e]},h.prototype.add=function(e){this.hash[e]||(this.arr.push(e),this.hash[e]=!0)},h.prototype.remove=function(e){this.hash[e]&&(this.arr.splice(this.arr.indexOf(e),1),delete this.hash[e])},h.prototype.count=function(){return this.arr.length},h.prototype.forEach=function(e,t){return this.arr.forEach(e,t)},h.prototype.slice=function(e,t){return this.arr.slice(e,t)},h.prototype.isEmpty=function(){return 0===this.arr.length},h.prototype.empty=function(){this.arr.length=0,this.hash={}},h.prototype.pop=function(){var e=this.arr.pop();return delete this.hash[e],e},h.prototype.sort=function(e){var t={};this.arr.forEach(n=>{t[n]=e(n)}),this.arr.sort((e,n)=>t[n]-t[e])},h.prototype.copyFrom=function(e){this.arr=e.arr.slice(),this.hash=Object.assign({},e.hash)};var p=n(17),m=n(52),v=n(105),y=n(133),g=n(10),b=n(81),w=n(31),k=n(29),_=n(4),x=n(180),E=(n(154),n(73)),S={showFPS:!1,antiAlias:!0,clearColor:[.8,.9,1],ambientColor:[1,1,1],lightDiffuse:[1,1,1],lightSpecular:[1,1,1],groundLightColor:[.5,.5,.5],useAO:!0,AOmultipliers:[.93,.8,.5],reverseAOmultiplier:1,preserveDrawingBuffer:!0};function O(e,t,n){this.noa=e,t=Object.assign({},S,t),this.useAO=!!t.useAO,this.aoVals=t.AOmultipliers,this.revAoVal=t.reverseAOmultiplier,this.meshingCutoffTime=6,this._resizeDebounce=250,function(e,t,n){e._engine=new g.a(t,n.antiAlias,{preserveDrawingBuffer:n.preserveDrawingBuffer}),e._multiscenes=new Array,e._scene=new p.a(e._engine);var r=e._scene;e._multiscenes.push(r),r.detachControl(),r._addComponent(new x.c(r)),e._octree=new v.a(e=>{}),e._octree.blocks=[],r._selectionOctree=e._octree,e._cameraHolder=new _.a("camHolder",r),e._camera=new m.a("camera",new k.y(0,0,0),r),e._camera.parent=e._cameraHolder,e._camera.minZ=.01,e._cameraHolder.visibility=!1,e._camScreen=_.a.CreatePlane("camScreen",10,r),e.addMeshToScene(e._camScreen),e._camScreen.position.z=.1,e._camScreen.parent=e._camera,e._camScreenMat=e.makeStandardMaterial("camscreenmat"),e._camScreen.material=e._camScreenMat,e._camScreen.setEnabled(!1),e._camLocBlock=0;var i=new k.y(.1,1,.3);function o(e){return new k.e(e[0],e[1],e[2])}e._light=new b.a("light",i,r),r.clearColor=o(n.clearColor),r.ambientColor=o(n.ambientColor),e._light.diffuse=o(n.lightDiffuse),e._light.specular=o(n.lightSpecular),e._light.groundColor=o(n.groundLightColor),e.flatMaterial=e.makeStandardMaterial("flatmat")}(this,n,t),t.showFPS&&function(){var e=document.createElement("div");e.id="noa_fps";"color:white; background-color:rgba(0,0,0,0.5);","font:14px monospace; text-align:center;","min-width:2em; margin:4px;",e.style="position:absolute; top:0; right:0; z-index:0;color:white; background-color:rgba(0,0,0,0.5);font:14px monospace; text-align:center;min-width:2em; margin:4px;",document.body.appendChild(e);var t=0,n=0,r=performance.now(),i=r;M=function(){t++;var o=performance.now();if(o-i>n&&(n=o-i),i=o,!(o-r<1e3)){var s=Math.round(t/(o-r)*1e3),a=Math.round(1/n*1e3);e.innerHTML=s+"<br>"+a,t=0,n=0,r=o}}}()}O.prototype.getScene=function(){return this._scene},O.prototype.getEngine=function(){return this._engine},O.prototype.addScene=function(e){this._multiscenes.push(e)},O.prototype.getSceneArray=function(e){return this._multiscenes},O.prototype.tick=function(e){},O.prototype.render=function(e){C("start"),function(e){var t=e.noa.camera,n=t._localGetTargetPosition();e._cameraHolder.position.copyFromFloats(n[0],n[1],n[2]),e._cameraHolder.rotation.x=t.pitch,e._cameraHolder.rotation.y=t.heading,e._camera.position.z=-t.currentZoom;var r=t._localGetPosition(),i=e.noa.worldOriginOffset,o=Math.floor(r[0]+i[0]),s=Math.floor(r[1]+i[1]),a=Math.floor(r[2]+i[2]),u=e.noa.getBlock(o,s,a);!function(e,t){if(t===e._camLocBlock)return;if(0===t)e._camScreen.setEnabled(!1);else{var n=e.noa.registry.getBlockFaceMaterial(t,0);if(n){var r=e.noa.registry.getMaterialData(n),i=r.color,o=r.alpha;i&&o&&o<1&&(e._camScreenMat.diffuseColor.set(0,0,0),e._camScreenMat.ambientColor.set(i[0],i[1],i[2]),e._camScreenMat.alpha=o,e._camScreen.setEnabled(!0))}}e._camLocBlock=t}(e,u)}(this),C("updateCamera"),this._engine.beginFrame(),C("beginFrame"),this._multiscenes.forEach(e=>{e.render()}),C("render"),M(),this._engine.endFrame(),C("endFrame"),C("end")},O.prototype.resize=function(e){T||(T=!0,setTimeout(()=>{this._engine.resize(),T=!1},this._resizeDebounce))};var T=!1;O.prototype.highlightBlockFace=function(e,t,n){var r=function(e){var t=e._highlightMesh;if(!t){t=_.a.CreatePlane("highlight",1,e._scene);var n=e.makeStandardMaterial("highlightMat");n.backFaceCulling=!1,n.emissiveColor=new k.e(1,1,1),n.alpha=.2,t.material=n;var r=.5,i=_.a.CreateLines("hightlightLines",[new k.y(r,r,0),new k.y(r,-r,0),new k.y(-r,-r,0),new k.y(-r,r,0),new k.y(r,r,0)],e._scene);i.color=new k.e(1,1,1),i.parent=t,e.addMeshToScene(t),e.addMeshToScene(i),e._highlightMesh=t}return t}(this);if(e){this.noa.globalToLocal(t,null,A);for(var i=.001+.001*E.dist(this.noa.camera._localGetPosition(),A),o=0;o<3;o++)0===n[o]?A[o]+=.5:A[o]+=n[o]>0?1+i:-i;r.position.copyFromFloats(A[0],A[1],A[2]),r.rotation.x=n[1]?Math.PI/2:0,r.rotation.y=n[0]?Math.PI/2:0}r.setEnabled(e)};var A=[];O.prototype.addMeshToScene=function(e,t,n,r){if(!e._noaContainingChunk&&!this._octree.dynamicContent.includes(e)){if(!e.parent){n||(n=[e.position.x,e.position.y,e.position.z]);var i=[];this.noa.globalToLocal(n,null,i),e.position.copyFromFloats(i[0],i[1],i[2])}var o=!1;if(t){var s=r||this.noa.world._getChunkByCoords(n[0],n[1],n[2]);o=!(!s||!s.octreeBlock)}o?(s.octreeBlock.entries.push(e),e._noaContainingChunk=s):this._octree.dynamicContent.push(e),t&&(e.freezeWorldMatrix(),e.freezeNormals());var a=this.removeMeshFromScene.bind(this,e);e.onDisposeObservable.add(a)}},O.prototype.removeMeshFromScene=function(e){e._noaContainingChunk&&e._noaContainingChunk.octreeBlock&&a(e._noaContainingChunk.octreeBlock.entries,e),e._noaContainingChunk=null,a(this._octree.dynamicContent,e)},O.prototype.makeStandardMaterial=function(e){var t=new w.a(e,this._scene);return t.specularColor.copyFromFloats(0,0,0),t.ambientColor.copyFromFloats(1,1,1),t.diffuseColor.copyFromFloats(1,1,1),t},O.prototype.prepareChunkForRendering=function(e){var t=e.size,n=[];this.noa.globalToLocal([e.x,e.y,e.z],null,n);var r=new k.y(n[0],n[1],n[2]),i=new k.y(n[0]+t,n[1]+t,n[2]+t);e.octreeBlock=new y.a(r,i,void 0,void 0,void 0,e=>{}),this._octree.blocks.push(e.octreeBlock)},O.prototype.disposeChunkForRendering=function(e){e.octreeBlock&&(a(this._octree.blocks,e.octreeBlock),e.octreeBlock.entries.length=0,e.octreeBlock=null)},O.prototype._rebaseOrigin=function(e){var t=new k.y(e[0],e[1],e[2]);this._scene.meshes.forEach(e=>{e.parent||(e.position.subtractInPlace(t),e._isWorldMatrixFrozen&&e.markAsDirty())}),this._octree.blocks.forEach(e=>{e.minPoint.subtractInPlace(t),e.maxPoint.subtractInPlace(t),e._boundingVectors.forEach(e=>{e.subtractInPlace(t)})})},O.prototype.debug_SceneCheck=function(){var e=this._scene.meshes,t=this._octree.dynamicContent,n=[],r=0,i=0,o=this._scene.materials,s=[];o.forEach(e=>{e.subMaterials?e.subMaterials.forEach(e=>s.push(e)):s.push(e)}),this._octree.blocks.forEach((function(e){r++,e.entries.forEach(e=>n.push(e))})),e.forEach((function(e){if(e._isDisposed&&c(e,"disposed mesh in scene"),0!==e.getIndices().length)if(l(e,t,n)&&c(e,"non-empty mesh missing from octree"),e.material){i+=e.subMeshes?e.subMeshes.length:1;var r=e.material.subMaterials||[e.material];r.forEach((function(e){l(e,r)&&c(e,"mesh material not in scene")}))}else c(e,"non-empty scene mesh with no material")}));var a=[];s.forEach(t=>{var n=!1;e.forEach(e=>{e.material===t&&(n=!0),e.material&&e.material.subMaterials&&e.material.subMaterials.includes(t)&&(n=!0)}),n||a.push(t.name)}),a.length&&console.warn("Materials unused by any mesh: ",a.join(", ")),t.forEach((function(t){l(t,e)&&c(t,"octree/dynamic mesh not in scene")})),n.forEach((function(t){l(t,e)&&c(t,"octree block mesh not in scene")}));var u=Math.round(10*n.length/r)/10;function c(e,t){console.warn(e.name+" --- "+t)}function l(e,t,n){return!!e&&(!t.includes(e)&&(!n||!n.includes(e)))}return console.log("meshes - octree:",n.length,"  dynamic:",t.length,"   subMeshes:",i,"   avg meshes/octreeBlock:",u),"done."},O.prototype.debug_MeshCount=function(){var e={};for(var t in this._scene.meshes.forEach(t=>{var n=t.name||"";n=(n=(n=(n=n.replace(/-\d+.*/,"#")).replace(/\d+.*/,"#")).replace(/(rotHolder|camHolder|camScreen)/,"rendering use")).replace(/atlas sprite .*/,"atlas sprites"),e[n]=e[n]||0,e[n]++}),e)console.log("   "+(e[t]+"       ").substr(0,7)+t)};var C=()=>{},M=function(){};var P=n(119),j=n.n(P),I=n(55),D=n(14),L=n(71),B=n(8),R=function(e){var t=new q(e),n=new V(e);this.meshChunk=function(r,i,o,s,a,u,c){Y("start");var l=i||e.registry.getBlockFaceMaterial,h=o||e.registry._getMaterialVertexColor,d=void 0===a?e.rendering.useAO:a,p=u||e.rendering.aoVals,m=isNaN(c)?e.rendering.revAoVal:c,v=function(e){var t=e.voxels.shape[0],n=F;if(t+2!==n.shape[0]){var r=t+2;n=new j.a(new Uint16Array(r*r*r),[r,r,r]),F=n}var i=z[0],o=z[1],s=z[2],a=z[3],u=z[4],c=z[5],l=z[6];t!==N&&(N=t,function(e,t,n,r){for(var i=0;i<3;i++)t[i]=[e-1,0,0][i],n[i]=[1,e,1][i],r[i]=[0,1,e+1][i]}(t,u,c,l));for(var h=0;h<3;h++){i[0]=h;for(var d=0;d<3;d++){i[1]=d;for(var p=0;p<3;p++){i[2]=p;for(var m=0;m<3;m++){var v=i[m];o[m]=u[v],s[m]=c[v],a[m]=l[v]}var y=e._neighbors.get(h-1,d-1,p-1);f(y?y.voxels:null,n,o,s,a)}}}return n}(r);Y("copy");var y,g=r.isFull||r.isEmpty,b=t.mesh(v,l,h,d,p,m,g);return b.length&&(y=n.build(r,b,s),Y("terrain")),Y("end"),y||null}};var N,F=new j.a(new Uint16Array(27),[3,3,3]),z=Array.from(Array(10)).map(e=>[0,0,0]);function U(e){this.id=0|e,this.positions=[],this.indices=[],this.normals=[],this.colors=[],this.uvs=[],this.mergeable=!1}function V(e){function t(e,t){for(var r=[],i=[],o=[],s=null,a=0;a<e.length;++a){var u=e[a];if(t||u.mergeable)if(r.push(u.positions.length),i.push(u.indices.length),o.push(u.id),s){var c=s.positions.length/3;n(s.positions,u.positions),n(s.normals,u.normals),n(s.colors,u.colors),n(s.uvs,u.uvs);for(var l=0,f=u.indices.length;l<f;++l)s.indices.push(u.indices[l]+c);e.splice(a,1),u.dispose(),a--}else s=u}return{vertices:r,indices:i,matIDs:o}}function n(e,t){for(var n=0;n<t.length;n++)e.push(t[n])}this.build=function(n,i,o){for(var s=0,a=0;a<i.length;a++){var u=i[a];if(o)u.mergeable=!0;else{var c=e.registry.getMaterialTexture(u.id),l=e.registry.getMaterialData(u.id);u.mergeable=!c&&1===l.alpha&&!l.renderMat}u.mergeable&&s++}s>1&&t(i,!1);var f=t(i,!0);return function(t,n,r,i,o){var s=e.rendering.getScene(),a=new _.a(n,s),u=new D.a;if(u.positions=t.positions,u.indices=t.indices,u.normals=t.normals,u.colors=t.colors,u.uvs=t.uvs,u.applyToMesh(a),t.dispose(),1===r.length)a.material=r[0];else{var c=new L.a("multimat "+n,s);a.subMeshes=[];for(var l=0,f=0,h=0;h<r.length;h++){c.subMaterials[h]=r[h];var d=new I.b(h,l,i[h],f,o[h],a);a.subMeshes[h]=d,l+=i[h],f+=o[h]}a.material=c}return a}(i[0],"chunk_"+n.id,f.matIDs.map(t=>function(t,n){if(n)return e.rendering.flatMaterial;var i="terrain mat "+t;r[i]||(r[i]=function(t){var n=e.registry.getMaterialData(t);if(n.renderMat)return n.renderMat;var r=e.registry.getMaterialTexture(t),i=n.alpha;if(!r&&1===i)return e.rendering.flatMaterial;var o=e.rendering.flatMaterial.clone("terrain"+t);if(r){var s=e.rendering.getScene(),a=new B.a(r,s,!0,!1,B.a.NEAREST_SAMPLINGMODE);n.textureAlpha&&(a.hasAlpha=!0),o.diffuseTexture=a}n.alpha<1&&(o.alpha=n.alpha);return o}(t));return r[i]}(t,o)),f.vertices,f.indices)};var r={}}function q(e){var t=new Int16Array(16),n=new Uint16Array(16),r=null,i=e.registry._solidityLookup,o=e.registry._opacityLookup;function s(e,i,o,s){for(var u=o.shape[1],c=t,l=n,f=0,h=2*i,d=o.data,p=o.index(e-1,0,0),m=o.stride[0],v=o.stride[1],y=o.stride[2],g=0;g<u;++g){var b=p;p+=y;for(var w=0;w<u;w++,f++,b+=v){var k=d[b],_=d[b+m];if(k!==_){var x=a(k,_,s,h);x&&(c[f]=x>0?s(k,h):-s(_,h+1),r&&(l[f]=x>0?r(o,e,e-1,w,g):r(o,e-1,e,w,g)))}}}}function a(e,t,n,r){var i=o[e],s=o[t];if(i&&s)return 0;if(i)return 1;if(s)return-1;var a=n(e,r),u=n(t,r+1);return a===u?0:0===a?-1:0===u?1:0}function u(e,r,i,o,s,a,u,d,p,m,v){for(var y=0,g=t,b=n,w=u?c:l,k=u?h:f,_=0;_<a;++_)for(var x=1,E=1,S=0;S<s;S+=x,y+=x){var O=0|g[y];if(O){var T=0|b[y];for(x=1;x<s-S&&w(y+x,g,O,b,T);++x);e:for(E=1;E<a-_;++E)for(var A=0;A<x;++A){if(!w(y+A+E*s,g,O,b,T))break e}var C=Math.abs(O);d[C]||(d[C]=new U(C));var M=d[C],P=k(M.colors,p(C),T,m,v),j=[0,0,0];j[r]=e,j[i]=S,j[o]=_;var I=[0,0,0],D=[0,0,0];I[i]=x,D[o]=E;var L=M.positions;L.push(j[0],j[1],j[2],j[0]+I[0],j[1]+I[1],j[2]+I[2],j[0]+I[0]+D[0],j[1]+I[1]+D[1],j[2]+I[2]+D[2],j[0]+D[0],j[1]+D[1],j[2]+D[2]);var B=O>0?1:-1;2===r?M.uvs.push(0,E,-B*x,E,-B*x,0,0,0):M.uvs.push(0,x,0,0,B*E,0,B*E,x);var R=L.length/3-4;O<0?P?M.indices.push(R,R+1,R+2,R,R+2,R+3):M.indices.push(R+1,R+2,R+3,R,R+1,R+3):P?M.indices.push(R,R+2,R+1,R,R+3,R+2):M.indices.push(R+3,R+1,R,R+3,R+2,R+1);var N=0===r?B:0,F=1===r?B:0,z=2===r?B:0;M.normals.push(N,F,z,N,F,z,N,F,z,N,F,z);for(var V=0;V<E;++V)for(var q=0;q<x;++q)g[y+q+V*s]=0}else x=1}}function c(e,t,n,r,i){return n===t[e]&&i===r[e]}function l(e,t,n,r,i){return n===t[e]}function f(e,t,n,r,i){return e.push(t[0],t[1],t[2],1),e.push(t[0],t[1],t[2],1),e.push(t[0],t[1],t[2],1),e.push(t[0],t[1],t[2],1),!0}function h(e,t,n,r,i){var o=m(n,0,0),s=m(n,1,0),a=m(n,1,1),u=m(n,0,1);v(e,t,o,r,i),v(e,t,s,r,i),v(e,t,a,r,i),v(e,t,u,r,i);return o===a?u!==s||2===u:u!==s&&o+a>u+s}function d(e,t,n,r,o){var s=1,a=1,u=1,c=1;return i[e.get(t,r+1,o)]&&(++u,++c),i[e.get(t,r-1,o)]&&(++s,++a),i[e.get(t,r,o+1)]&&(++a,++c),i[e.get(t,r,o-1)]&&(++s,++u),i[e.get(t,r,o)]?(c=3===c||i[e.get(t,r+1,o+1)]?3:2,a=3===a||i[e.get(t,r-1,o+1)]?3:2,u=3===u||i[e.get(t,r+1,o-1)]?3:2,s=3===s||i[e.get(t,r-1,o-1)]?3:2):(1===c&&i[e.get(t,r+1,o+1)]&&(c=2),1===a&&i[e.get(t,r-1,o+1)]&&(a=2),1===u&&i[e.get(t,r+1,o-1)]&&(u=2),1===s&&i[e.get(t,r-1,o-1)]&&(s=2)),c<<6|u<<4|a<<2|s}function p(e,t,n,r,o){var s=1,a=1,u=1,c=1;return i[e.get(t,r+1,o)]&&(++u,++c),i[e.get(t,r-1,o)]&&(++s,++a),i[e.get(t,r,o+1)]&&(++a,++c),i[e.get(t,r,o-1)]&&(++s,++u),i[e.get(t,r,o)]?(c=3===c||i[e.get(t,r+1,o+1)]?3:2,a=3===a||i[e.get(t,r-1,o+1)]?3:2,u=3===u||i[e.get(t,r+1,o-1)]?3:2,s=3===s||i[e.get(t,r-1,o-1)]?3:2):(1===c&&(i[e.get(t,r+1,o+1)]?c=2:i[e.get(n,r,o+1)]&&i[e.get(n,r+1,o)]&&i[e.get(n,r+1,o+1)]||(c=0)),1===u&&(i[e.get(t,r+1,o-1)]?u=2:i[e.get(n,r,o-1)]&&i[e.get(n,r+1,o)]&&i[e.get(n,r+1,o-1)]||(u=0)),1===a&&(i[e.get(t,r-1,o+1)]?a=2:i[e.get(n,r,o+1)]&&i[e.get(n,r-1,o)]&&i[e.get(n,r-1,o+1)]||(a=0)),1===s&&(i[e.get(t,r-1,o-1)]?s=2:i[e.get(n,r,o-1)]&&i[e.get(n,r-1,o)]&&i[e.get(n,r-1,o-1)]||(s=0))),c<<6|u<<4|a<<2|s}function m(e,t,n){return e>>(t?n?6:4:n?2:0)&3}function v(e,t,n,r,i){var o=0===n?i:r[n-1];e.push(t[0]*o,t[1]*o,t[2]*o,1)}this.mesh=function(a,c,l,f,h,m,v){i=e.registry._solidityLookup,o=e.registry._opacityLookup;var y={},g=m===h[0];r=f?g?d:p:null;for(var b=0;b<3;++b){var w=(b+1)%3,k=(b+2)%3,_=a.shape,x=a.transpose(b,w,k).lo(1,1,1).hi(_[b]-2,_[w]-2,_[k]-2),E=x.shape[0]-1,S=x.shape[1],O=x.shape[2];t.length<S*O&&(t=new Int16Array(S*O),n=new Uint16Array(S*O));for(var T=0;T<=E;++T)s(T,b,x,c),Y("masks"),u(T,b,w,k,S,O,f,y,l,h,m),v&&(T+=E-1),Y("submeshes")}return Object.keys(y).map(e=>y[e])}}U.prototype.dispose=function(){this.positions=null,this.indices=null,this.normals=null,this.colors=null,this.uvs=null};var Y=d(500,"Terrain meshing"),$=n(179),W=new function(){function e(e,t,n,r,i,o){var s=e._objectBlocks,a=new $.a("object_sps_"+e.id,t,{updatable:!1}),u=e.noa.registry._blockHandlerLookup,c=e.noa.registry._blockMeshLookup;for(var l in n){var f,h=c[l],d=n[l],p=d.length,m=u[l];m&&(f=m.onCustomMeshCreate);a.addShape(h,p,{positionFunction:function(e,t,n){var a=d[n],u=s[a];e.position.set(u.x+.5,u.y,u.z+.5),f&&f(e,r+u.x,i+u.y,o+u.z)}}),d.length=0}return a}this.initChunk=function(e){e._objectBlocks={},e._objectSystems=[]},this.disposeChunk=function(e){this.removeObjectMeshes(e),e._objectBlocks=null},this.addObjectBlock=function(e,t,n,r,i){var o=n+"|"+r+"|"+i;e._objectBlocks[o]=new H(t,n,r,i,null)},this.removeObjectBlock=function(e,t,n,r){var i=t+"|"+n+"|"+r;e._objectBlocks[i]&&delete e._objectBlocks[i]},this.removeObjectMeshes=function(e){for(var t=e._objectSystems||[];t.length;){var n=t.pop();n.mesh&&n.mesh.dispose(),n.dispose()}},this.buildObjectMeshes=function(t){Q("start");var n=t.noa.rendering.getScene(),r=t.noa.registry._blockMeshLookup,i={};for(var o in t._objectBlocks){var s=t._objectBlocks[o].id,a=r[s].material,u=a?n.materials.indexOf(a):-1;i[u]||(i[u]={}),i[u][s]||(i[u][s]=[]),i[u][s].push(o)}Q("preprocess");var c=t.i*t.size,l=t.j*t.size,f=t.k*t.size,h=[];for(var d in i){var p=e(t,n,i[d],c,l,f);Q("made SPS");var m=p.buildMesh();Q("built mesh"),m.material=d>-1?n.materials[d]:null,h.push(m),t._objectSystems.push(p)}return Q("end"),h}};function H(e,t,n,r){this.id=0|e,this.x=0|t,this.y=0|n,this.z=0|r}var J,G,X,Z,K,Q=()=>{},ee=n(119),te=ne;function ne(e,t,n,r,i,o,s){this.id=t,this.requestID="",this.noa=e,this.isDisposed=!1,this.octreeBlock=null,this.voxels=s,this.i=n,this.j=r,this.k=i,this.size=o,this.x=n*o,this.y=r*o,this.z=i*o,this._terrainDirty=!1,this._objectsDirty=!1,J=e.registry._solidityLookup,G=e.registry._opacityLookup,X=e.registry._objectLookup,Z=e.registry._blockHandlerLookup,this._terrainMesh=null,this._objectBlocks=null,this._objectSystems=null,W.initChunk(this),this.isFull=!1,this.isEmpty=!1;var a=Array.from(Array(27)).map(()=>null);this._neighbors=new ee(a,[3,3,3]).lo(1,1,1),this._neighbors.set(0,0,0,this),this._neighborCount=0,this._maxMeshedNeighbors=0,this._timesMeshed=0,oe(this)}function re(e,t,n,r,i,o){var s=Z[t];if(s){var a=s[n];a&&a(e.x+r,e.y+i,e.z+o)}}function ie(e){return 0!==e&&(!!J[e]||!X[e])}function oe(e){for(var t=!0,n=!0,r=!1,i=e.voxels,o=i.shape[0],s=0;s<o;++s)for(var a=0;a<o;++a)for(var u=i.index(s,a,0),c=0;c<o;++c,++u){var l=i.data[u];0!==l?(t=t&&G[l],n=!1,X[l]&&(se(e,l,s,a,c),r=!0),re(e,l,"onLoad",s,a,c)):t=!1}e.isFull=t,e.isEmpty=n,e._terrainDirty=!e.isEmpty,e._objectsDirty=r}function se(e,t,n,r,i){W.addObjectBlock(e,t,n,r,i),e._objectsDirty=!0}function ae(e,t){for(var n=e.voxels,r=n.shape[0],i=0;i<r;++i)for(var o=0;o<r;++o)for(var s=0;s<r;++s){var a=n.get(i,o,s);a>0&&re(e,a,t,i,o,s)}}ne._createVoxelArray=function(e){var t=new Uint16Array(e*e*e);return new ee(t,[e,e,e])},ne.prototype._updateVoxelArray=function(e){ae(this,"onUnload"),W.disposeChunk(this),this.voxels=e,this._terrainDirty=!1,this._objectsDirty=!1,W.initChunk(this),oe(this)},ne.prototype.get=function(e,t,n){return this.voxels.get(e,t,n)},ne.prototype.getSolidityAt=function(e,t,n){return J[this.voxels.get(e,t,n)]},ne.prototype.set=function(e,t,n,r){var i=this.voxels.get(e,t,n),o=i;if(r!==o){this.voxels.set(e,t,n,r),X[i]&&function(e,t,n,r){W.removeObjectBlock(e,t,n,r),e._objectsDirty=!0}(this,e,t,n),X[r]&&se(this,r,e,t,n),re(this,o,"onUnset",e,t,n),re(this,r,"onSet",e,t,n),G[r]||(this.isFull=!1),0!==r&&(this.isEmpty=!1),(ie(r)||ie(i))&&(this._terrainDirty=!0),(this._terrainDirty||this._objectsDirty)&&this.noa.world._queueChunkForRemesh(this);var s=!1;if(J[i]!==J[r]&&(s=!0),G[i]!==G[r]&&(s=!0),s){var a=this.size-1,u=0===e?-1:e<a?0:1,c=0===t?-1:t<a?0:1,l=0===n?-1:n<a?0:1;if(u|c|l){var f=c?[0,c]:[0],h=l?[0,l]:[0];(u?[0,u]:[0]).forEach(e=>{f.forEach(t=>{h.forEach(n=>{if(0!=(e|t|n)){var r=this._neighbors.get(e,t,n);r&&(r._terrainDirty=!0,this.noa.world._queueChunkForRemesh(r))}})})})}}}},ne.prototype.mesh=function(e,t,n,r,i){return K||(K=new R(this.noa)),K.meshChunk(this,e,t,n,r,i)},ne.prototype.updateMeshes=function(){var e=this.noa.rendering;if(this._terrainDirty){this._terrainMesh&&this._terrainMesh.dispose();var t=this.mesh();if(t&&t.getIndices().length>0){var n=[this.x,this.y,this.z];e.addMeshToScene(t,!0,n,this)}this._terrainMesh=t||null,this._terrainDirty=!1,this._timesMeshed++,this._maxMeshedNeighbors=Math.max(this._maxMeshedNeighbors,this._neighborCount)}if(this._objectsDirty){W.removeObjectMeshes(this);var r=W.buildObjectMeshes(this),i=[this.x,this.y,this.z];r.forEach(t=>e.addMeshToScene(t,!0,i,this)),this._objectsDirty=!1}},ne.prototype.dispose=function(){ae(this,"onUnload"),W.disposeChunk(this),this._terrainMesh&&this._terrainMesh.dispose(),this.voxels.data=null,this.voxels=null,this._neighbors.data=null,this._neighbors=null,this.isDisposed=!0};var ue=n(125).EventEmitter,ce={chunkSize:24,chunkAddDistance:3,chunkRemoveDistance:4,worldGenWhilePaused:!1,manuallyControlChunkLoading:!1};function le(e,t){var n;this.noa=e,t=Object.assign({},ce,t),this.playerChunkLoaded=!1,this.Chunk=te,this.chunkSize=t.chunkSize,this.chunkAddDistance=t.chunkAddDistance,this.chunkRemoveDistance=t.chunkRemoveDistance,this.chunkRemoveDistance<this.chunkAddDistance&&(this.chunkRemoveDistance=this.chunkAddDistance),this.manuallyControlChunkLoading=!!t.manuallyControlChunkLoading,this.minNeighborsToMesh=6,this.maxChunksPendingCreation=10,this.maxChunksPendingMeshing=10,this.maxProcessingPerTick=9,this.maxProcessingPerRender=5,this.worldGenWhilePaused=t.worldGenWhilePaused,this._cachedWorldName="",this._lastPlayerChunkID="",this._chunkStorage={},(n=this)._chunkIDsKnown=new h,n._chunkIDsToRequest=new h,n._chunkIDsPending=new h,n._chunkIDsToMesh=new h,n._chunkIDsToMeshFirst=new h,n._chunkIDsToRemove=new h,n._queueChunkForRemesh=e=>{ye(n,e)},function(e){e._getChunk=(t,n,r)=>{var i=he(t,n,r);return e._chunkStorage[i]||null},e._setChunk=(t,n,r,i)=>{var o=he(t,n,r);i?e._chunkStorage[o]=i:delete e._chunkStorage[o]},e._getChunkByCoords=function(t,n,r){var i=e._worldCoordToChunkCoord(t),o=e._worldCoordToChunkCoord(n),s=e._worldCoordToChunkCoord(r);return e._getChunk(i,o,s)}}(this);var r=this.chunkSize;if(0==(r&r-1)){var i=0|Math.log2(r),o=r-1|0;this._worldCoordToChunkCoord=e=>e>>i|0,this._worldCoordToChunkIndex=e=>e&o|0}else this._worldCoordToChunkCoord=e=>0|Math.floor(e/r),this._worldCoordToChunkIndex=e=>(e%r+r)%r|0}le.prototype=Object.create(ue.prototype),le.prototype.getBlockID=function(e,t,n){var r=this._getChunkByCoords(e,t,n);return r?r.get(this._worldCoordToChunkIndex(e),this._worldCoordToChunkIndex(t),this._worldCoordToChunkIndex(n)):0},le.prototype.getBlockSolidity=function(e,t,n){var r=this._getChunkByCoords(e,t,n);return!!r&&!!r.getSolidityAt(this._worldCoordToChunkIndex(e),this._worldCoordToChunkIndex(t),this._worldCoordToChunkIndex(n))},le.prototype.getBlockOpacity=function(e,t,n){var r=this.getBlockID(e,t,n);return this.noa.registry.getBlockOpacity(r)},le.prototype.getBlockFluidity=function(e,t,n){var r=this.getBlockID(e,t,n);return this.noa.registry.getBlockFluidity(r)},le.prototype.getBlockProperties=function(e,t,n){var r=this.getBlockID(e,t,n);return this.noa.registry.getBlockProps(r)},le.prototype.getBlockObjectMesh=function(e,t,n){var r=this._getChunkByCoords(e,t,n);return r?r.getObjectMeshAt(this._worldCoordToChunkIndex(e),this._worldCoordToChunkIndex(t),this._worldCoordToChunkIndex(n)):0},le.prototype.setBlockID=function(e,t,n,r){var i=this._worldCoordToChunkCoord(t),o=this._worldCoordToChunkCoord(n),s=this._worldCoordToChunkCoord(r),a=this._worldCoordToChunkIndex(t),u=this._worldCoordToChunkIndex(n),c=this._worldCoordToChunkIndex(r),l=this._getChunk(i,o,s);l&&l.set(a,u,c,e)},le.prototype.isBoxUnobstructed=function(e){for(var t=e.base,n=e.max,r=Math.floor(t[0]);r<n[0]+1;r++)for(var i=Math.floor(t[1]);i<n[1]+1;i++)for(var o=Math.floor(t[2]);o<n[2]+1;o++)if(this.getBlockSolidity(r,i,o))return!1;return!0},le.prototype.setChunkData=function(e,t,n){!function(e,t,n,r){var i=t.split("|"),o=parseInt(i.shift()),s=parseInt(i.shift()),a=parseInt(i.shift()),u=i.join("|"),c=he(o,s,a);if(e._chunkIDsPending.remove(c),u!==e.noa.worldName)return;if(!e._chunkIDsKnown.includes(c))return;if(e._chunkIDsToRemove.includes(c))return;var l=e._chunkStorage[c];if(l){l._updateVoxelArray(n),l._neighbors.data.forEach(t=>{t&&t!==l&&t._neighborCount>20&&ye(e,t)})}else{var f=e.chunkSize;l=new te(e.noa,c,o,s,a,f,n),e._setChunk(o,s,a,l),l.requestID=t,l.userData=r,be(e,o,s,a,l),e.noa.rendering.prepareChunkForRendering(l),e.emit("chunkAdded",l)}ye(e,l),_e("receive")}(this,e,t,n)},le.prototype.invalidateVoxelsInAABB=function(e){!function(e,t){var n=t.base.map(t=>Math.floor(e._worldCoordToChunkCoord(t))),r=t.max.map(t=>Math.floor(e._worldCoordToChunkCoord(t)));e._chunkIDsKnown.forEach(t=>{for(var i=de(t),o=0;o<3;o++)if(i[o]<n[o]||i[o]>r[o])return;e._chunkIDsToRemove.includes(t)||e._chunkIDsToRequest.add(t)})}(this,e)},le.prototype.manuallyLoadChunk=function(e,t,n){if(!this.manuallyControlChunkLoading)throw fe;var r=he(this._worldCoordToChunkCoord(e),this._worldCoordToChunkCoord(t),this._worldCoordToChunkCoord(n));this._chunkIDsKnown.add(r),this._chunkIDsToRequest.add(r)},le.prototype.manuallyUnloadChunk=function(e,t,n){if(!this.manuallyControlChunkLoading)throw fe;var r=he(this._worldCoordToChunkCoord(e),this._worldCoordToChunkCoord(t),this._worldCoordToChunkCoord(n));this._chunkIDsToRemove.add(r),this._chunkIDsToRequest.remove(r),this._chunkIDsToMesh.remove(r),this._chunkIDsToMeshFirst.remove(r)};var fe="Set `noa.world.manuallyControlChunkLoading` if you need this API";function he(e,t,n){return e+"|"+t+"|"+n}function de(e){return e.split("|").map(e=>parseInt(e))}function pe(e){var t=e.noa.entities.getPosition(e.noa.playerEntity);return[e._worldCoordToChunkCoord(t[0]),e._worldCoordToChunkCoord(t[1]),e._worldCoordToChunkCoord(t[2])]}le.prototype.tick=function(){var e=performance.now();this._cachedWorldName!==this.noa.worldName&&(!function(e){e._chunkIDsToRemove.copyFrom(e._chunkIDsKnown),e._chunkIDsToRequest.empty(),e._chunkIDsToMesh.empty(),e._chunkIDsToMeshFirst.empty();var t=pe(e);ge(e._chunkIDsToRemove,t[0],t[1],t[2])}(this),this._cachedWorldName=this.noa.worldName);var t,n,r,i,o,s,a=pe(this),f=he(a[0],a[1],a[2]),h=f!=this._lastPlayerChunkID;if(h&&(this.emit("playerEnteredChunk",a[0],a[1],a[2]),this._lastPlayerChunkID=f),ke("start"),_e("start"),!this.manuallyControlChunkLoading){h&&(t=this,n=a[0],r=a[1],i=a[2],o=t.chunkRemoveDistance*t.chunkRemoveDistance,s=t._chunkIDsToRemove,t._chunkIDsKnown.forEach(e=>{if(!s.includes(e)){var a=de(e),u=a[0]-n,c=a[1]-r,l=a[2]-i;u*u+c*c+l*l<o||(t._chunkIDsToRemove.add(e),t._chunkIDsToRequest.remove(e),t._chunkIDsToMesh.remove(e),t._chunkIDsToMeshFirst.remove(e))}}),ge(s,n,r,i),ke("remQueue"));var d=function(e){if(e===c)return l;for(var t=Math.ceil(e),n=0,r=e*e,i=-t;i<=t;++i)for(var o=-t;o<=t;++o)for(var s=-t;s<=t;++s){i*i+o*o+s*s<r&&n++}return c=e,l=n,n}(this.chunkAddDistance);(h||this._chunkIDsKnown.count()<d)&&(!function(e,t,n,r){for(var i=Math.ceil(e.chunkAddDistance),o=e.chunkAddDistance*e.chunkAddDistance,s=e._chunkIDsKnown,a=e._chunkIDsToRequest,u=t-i;u<=t+i;++u)for(var c=n-i;c<=n+i;++c)for(var l=r-i;l<=r+i;++l){var f=he(u,c,l);if(!s.includes(f)){var h=u-t,d=c-n,p=l-r;h*h+d*d+p*p>o||(s.add(f),a.add(f))}}ge(a,t,n,r)}(this,a[0],a[1],a[2]),ke("addQueue"))}u(this.maxProcessingPerTick,()=>{var e=function(e){var t=e._chunkIDsToRequest;if(t.isEmpty())return!0;var n=e._chunkIDsPending.count(),r=e._chunkIDsToMesh.count();if(n>=e.maxChunksPendingCreation)return!0;if(r>=e.maxChunksPendingMeshing)return!0;var i=t.pop();return function(e,t){var n=de(t),r=n[0],i=n[1],o=n[2],s=e.chunkSize,a=te._createVoxelArray(e.chunkSize),u=e.noa.worldName,c=[r,i,o,u].join("|"),l=r*s,f=i*s,h=o*s;e._chunkIDsPending.add(t),e.emit("worldDataNeeded",c,a,l,f,h,u),_e("request")}(e,i),t.isEmpty()}(this);return ke("requests"),e=e&&function(e){var t=e._chunkIDsToRemove;return!!t.isEmpty()||(function(e,t){var n=de(t),r=e._getChunk(n[0],n[1],n[2]);r&&(e.emit("chunkBeingRemoved",r.requestID,r.voxels,r.userData),e.noa.rendering.disposeChunkForRendering(r),r.dispose(),_e("dispose"),be(e,n[0],n[1],n[2],null));e._setChunk(n[0],n[1],n[2],null),e._chunkIDsKnown.remove(t),e._chunkIDsToMesh.remove(t),e._chunkIDsToMeshFirst.remove(t)}(e,t.pop()),t.isEmpty())}(this),ke("removes"),e=e&&ve(this,!1),ke("meshes"),e},e),performance.now()-e+2<this.maxProcessingPerTick&&(!function(e){for(var t=e._chunkIDsKnown.arr,n=Math.min(50,t.length),r=e._chunkIDsToMesh.count()+e._chunkIDsToMeshFirst.count(),i=0;i<n;i++){me=(me+1)%t.length;var o=t[me],s=e._chunkStorage[o];if(s){var a=s._neighborCount;if(!(a<e.minNeighborsToMesh)&&!(a<=s._maxMeshedNeighbors)&&(ye(e,s),++r>10))return}}}(this),ke("looking"),u(this.maxProcessingPerTick,()=>{var e=ve(this,!1);return ke("meshes"),e},e));var p=this._getChunk(a[0],a[1],a[2]);this.playerChunkLoaded=!!p,_e("end",this),ke("end")},le.prototype.render=function(){u(this.maxProcessingPerRender,()=>ve(this,!0))};var me=-1;function ve(e,t){var n=e._chunkIDsToMeshFirst;if(n.isEmpty()&&!t&&(n=e._chunkIDsToMesh),n.isEmpty())return!0;var r=n.pop();if(!e._chunkIDsToRemove.includes(r)){var i=e._chunkStorage[r];i&&function(e,t){e._chunkIDsToMesh.remove(t.id),e._chunkIDsToMeshFirst.remove(t.id),t.updateMeshes(),_e("mesh")}(e,i)}}function ye(e,t){var n=t._neighborCount;n<Math.min(e.minNeighborsToMesh,26)||(t._terrainDirty=!0,(26===n?e._chunkIDsToMeshFirst:e._chunkIDsToMesh).add(t.id))}function ge(e,t,n,r){e.sort(e=>{var i=de(e),o=i[0]-t,s=i[1]-n,a=i[2]-r;return o*o+a*a+Math.abs(s)})}function be(e,t,n,r,i){for(var o=-1;o<=1;o++)for(var s=-1;s<=1;s++)for(var a=-1;a<=1;a++)if(0!=(o|s|a)){var u=he(t+o,n+s,r+a),c=e._chunkStorage[u];c&&(i?(i._neighborCount++,i._neighbors.set(o,s,a,c),c._neighborCount++,c._neighbors.set(-o,-s,-a,i),26===c._neighborCount&&ye(e,c)):(c._neighborCount--,c._neighbors.set(-o,-s,-a,null)))}}function we(e,t,n,r){var i=0,o=0,s=0,a=0,u=[];n.forEach(t=>{var n=e._chunkStorage[t];n&&(s++,u.push(n._timesMeshed),n.isFull&&i++,n.isEmpty&&o++,26===n._neighborCount&&a++)});var c=n.length.toString().padEnd(8);if(c+=("exist: "+s).padEnd(12),c+=("full: "+i).padEnd(12),c+=("empty: "+o).padEnd(12),c+=("surr: "+a).padEnd(12),r){var l=u.reduce((e,t)=>e+t,0),f=u.reduce((e,t)=>Math.max(e,t),0),h=u.reduce((e,t)=>Math.min(e,t),0);c+="times meshed: avg "+(l/s).toFixed(2),c+="  max "+f,c+="  min "+h}console.log(t,c)}le.prototype.report=function(){console.log("World report - playerChunkLoaded: ",this.playerChunkLoaded),we(this,"  known:     ",this._chunkIDsKnown.arr,!0),we(this,"  to request:",this._chunkIDsToRequest.arr),we(this,"  to remove: ",this._chunkIDsToRemove.arr),we(this,"  creating:  ",this._chunkIDsPending.arr),we(this,"  to mesh:   ",this._chunkIDsToMesh.arr.concat(this._chunkIDsToMeshFirst.arr))};var ke=()=>{},_e=()=>{};var xe=n(289),Ee=function(e,t,n){return function(e,t,n){t=Object.assign({},Se,t);var r=xe(n,t),i=t.bindings;for(var o in i){var s=Array.isArray(i[o])?i[o]:[i[o]];s.unshift(o),r.bind.apply(r,s)}return r}(0,t,n)},Se={bindings:{forward:["W","<up>"],left:["A","<left>"],backward:["S","<down>"],right:["D","<right>"],fire:"<mouse 1>","mid-fire":["<mouse 2>","Q"],"alt-fire":["<mouse 3>","E"],jump:"<space>",sprint:"<shift>",crouch:"<control>"}};var Oe=n(292),Te=function(e,t){return function(e,t){t=Object.assign({},Ae,t);var n=e.world,r=e.registry._solidityLookup,i=e.registry._fluidityLookup,o=e.worldOriginOffset;return Oe(t,(e,t,i)=>{var s=n.getBlockID(e+o[0],t+o[1],i+o[2]);return r[s]},(e,t,r)=>{var s=n.getBlockID(e+o[0],t+o[1],r+o[2]);return i[s]})}(e,t)},Ae={gravity:[0,-10,0],airDrag:.1};var Ce=n(73),Me=n(188),Pe=n(223),je={inverseX:!1,inverseY:!1,sensitivityX:10,sensitivityY:10,initialZoom:0,zoomSpeed:.2};function Ie(e,t){this.noa=e,t=Object.assign({},je,t),this.sensitivityX=t.sensitivityX,this.sensitivityY=t.sensitivityY,this.inverseX=t.inverseX,this.inverseY=t.inverseY,this.heading=0,this.pitch=0,this.cameraTarget=this.noa.ents.createEntity(["position"]);var n=.9*e.ents.getPositionData(e.playerEntity).height;e.ents.addComponent(this.cameraTarget,"followsEntity",{entity:e.playerEntity,offset:[0,n,0]}),this.zoomDistance=t.initialZoom,this.zoomSpeed=t.zoomSpeed,this.currentZoom=t.initialZoom,this._dirVector=Ce.fromValues(0,1,0)}Ie.prototype._localGetTargetPosition=function(){var e=this.noa.ents.getPositionData(this.cameraTarget);return Ce.copy(De,e._renderPosition)},Ie.prototype._localGetPosition=function(){var e=this._localGetTargetPosition();return 0===this.currentZoom?e:Ce.scaleAndAdd(e,e,this._dirVector,-this.currentZoom)};var De=Ce.create();Ie.prototype.getTargetPosition=function(){var e=this._localGetTargetPosition();return this.noa.localToGlobal(e,Le)};var Le=[];Ie.prototype.getPosition=function(){var e=this._localGetPosition();return this.noa.localToGlobal(e,Le)},Ie.prototype.getDirection=function(){return this._dirVector},Ie.prototype.applyInputsToCamera=function(){var e=this.noa.inputs.state;!function(e){var t=e.dx,n=e.dy,r=document.body.clientWidth/6,i=document.body.clientHeight/6,o=Math.abs(t)>r&&t/Ve<-1,s=Math.abs(n)>i&&n/qe<-1;o||s?(e.dx=Ve,e.dy=qe,Ve=t>0?1:-1,qe=n>0?1:-1):(t&&(Ve=t),n&&(qe=n))}(e);var t=.0066*Math.PI/180,n=e.dy*this.sensitivityY*t,r=e.dx*this.sensitivityX*t;this.inverseY&&(n=-n),this.inverseX&&(r=-r);var i=2*Math.PI;this.heading+=r<0?r+i:r,this.heading>i&&(this.heading-=i);var o=Math.PI/2-.001;this.pitch=Math.max(-o,Math.min(o,this.pitch+n)),Ce.set(this._dirVector,0,0,1),Ce.rotateX(this._dirVector,this._dirVector,Be,this.pitch),Ce.rotateY(this._dirVector,this._dirVector,Be,this.heading)};var Be=Ce.create();Ie.prototype.updateBeforeEntityRenderSystems=function(){this.currentZoom+=(this.zoomDistance-this.currentZoom)*this.zoomSpeed},Ie.prototype.updateAfterEntityRenderSystems=function(){var e=function(e){if(!Re){var t=e.noa.worldOriginOffset;Re=new Me([0,0,0],Ce.clone(Fe)),Ne=(n,r,i)=>e.noa.world.getBlockSolidity(n+t[0],r+t[1],i+t[2]),Ce.scale(Fe,Fe,-.5)}Re.setPosition(e._localGetTargetPosition()),Re.translate(Fe);var n=Math.max(e.zoomDistance,e.currentZoom)+.1;return Ce.scale(ze,e.getDirection(),-n),Pe(Ne,Re,ze,Ue,!0)}(this);this.currentZoom>e&&(this.currentZoom=e)};var Re,Ne,Fe=Ce.fromValues(.2,.2,.2),ze=Ce.create(),Ue=()=>!0;var Ve=0,qe=0,Ye={texturePath:""},$e={solid:!0,opaque:!0,fluidDensity:1,viscosity:.5};function We(e,t){this.noa=e,t=Object.assign({},Ye,t);var n=[!1],r=[!1],i=[!1],o=[!1],s=[0,0,0,0,0,0],a=[null],u=[null],c=[null],l={},f=[null],h=t.texturePath;this.registerBlock=function(e,t){t=t||{},$e.solid=!t.fluid,$e.opaque=!t.fluid;var f=Object.assign({},$e,t);if(e<1||e>65535)throw"Block id out of range: "+e;for(;e>n.length;)this.registerBlock(n.length,{});n[e]=!!f.solid,r[e]=!!f.opaque,i[e]=!!f.fluid,o[e]=!!f.blockMesh,u[e]=f.blockMesh||null;var h,d=f.material||null;if(d)if("string"==typeof d)h=[d,d,d,d,d,d];else if(d.length&&2==d.length)h=[d[1],d[1],d[0],d[0],d[1],d[1]];else if(d.length&&3==d.length)h=[d[2],d[2],d[0],d[1],d[2],d[2]];else{if(!d.length||6!=d.length)throw"Invalid material parameter: "+d;h=d}else h=[null,null,null,null,null,null];for(var p=0;p<6;++p)s[6*e+p]=He(this,l,h[p],!0);a[e]={},i[e]&&(a[e].fluidDensity=f.fluidDensity,a[e].viscosity=f.viscosity);var m=f.onLoad||f.onUnload||f.onSet||f.onUnset||f.onCustomMeshCreate;return c[e]=m?new Je(f):null,e},this.registerMaterial=function(e,t,n,r,i){var o=l[e]||f.length;l[e]=o;var s=1;return t&&4==t.length&&(s=t.pop()),f[o]={color:t||[1,1,1],alpha:s,texture:n?h+n:"",textureAlpha:!!r,renderMat:i||null},o},this.getBlockSolidity=function(e){return n[e]},this.getBlockOpacity=function(e){return r[e]},this.getBlockFluidity=function(e){return i[e]},this.getBlockProps=function(e){return a[e]},this.getBlockFaceMaterial=function(e,t){return s[6*e+t]},this.getMaterialColor=function(e){return f[e].color},this.getMaterialTexture=function(e){return f[e].texture},this.getMaterialData=function(e){return f[e]},this._solidityLookup=n,this._opacityLookup=r,this._fluidityLookup=i,this._objectLookup=o,this._blockMeshLookup=u,this._blockHandlerLookup=c,this._getMaterialVertexColor=function(e){return f[e].texture?d:f[e].color};var d=[1,1,1];this.registerMaterial("dirt",[.4,.3,0],null),this.registerBlock(1,{material:"dirt"})}function He(e,t,n,r){if(!n)return 0;var i=t[n];return void 0===i&&r&&(i=e.registerMaterial(n)),i}function Je(e){this.onLoad=e.onLoad||null,this.onUnload=e.onUnload||null,this.onSet=e.onSet||null,this.onUnset=e.onUnset||null,this.onCustomMeshCreate=e.onCustomMeshCreate||null}var Ge=n(202),Xe=n(203),Ze=n(73),Ke=n(294),Qe={shadowDistance:10};function et(e,t){Ke.call(this),this.noa=e,t=Object.assign({},Qe,t),this.names={};var r={shadow:t.shadowDistance},i=n(296);i.keys().forEach(t=>{var n=/\.\/(.*)\.js/.exec(t)[1],o=r[n]||void 0,s=i(t);s.default&&(s=s.default);var a=s(e,o),u=this.createComponent(a);this.names[n]=u}),this.isPlayer=function(t){return t===e.playerEntity},this.hasPhysics=this.getComponentAccessor(this.names.physics),this.cameraSmoothed=this.getComponentAccessor(this.names.smoothCamera),this.hasMesh=this.getComponentAccessor(this.names.mesh),this.hasPosition=this.getComponentAccessor(this.names.position);var o=this.getStateAccessor(this.names.position);function s(t,n){Ze.copy(n._renderPosition,n._localPosition),Ze.add(n.position,n._localPosition,e.worldOriginOffset),Object(Ge.updatePositionExtents)(n);var r=a(t);r&&Object(Xe.setPhysicsFromPosition)(r,n)}this.getPositionData=o,this._localGetPosition=function(e){return o(e)._localPosition},this.getPosition=function(e){return o(e).position},this._localSetPosition=function(e,t){var n=o(e);Ze.copy(n._localPosition,t),s(e,n)},this.setPosition=(t,n,r,i)=>{"number"==typeof n&&(n=[n,r,i]);var o=e.globalToLocal(n,null,[]);this._localSetPosition(t,o)},this.setEntitySize=function(e,t,n,r){var i=o(e);i.width=(t+r)/2,i.height=n,s(e,i)},this._rebaseOrigin=function(e){this.getStatesList(this.names.position).forEach(t=>{Ze.subtract(t._localPosition,t._localPosition,e),s(t.__id,t)})};var a=this.getStateAccessor(this.names.physics);this.getPhysics=a,this.getPhysicsBody=function(e){return a(e).body},this.getMeshData=this.getStateAccessor(this.names.mesh),this.getMovement=this.getStateAccessor(this.names.movement),this.getCollideTerrain=this.getStateAccessor(this.names.collideTerrain),this.getCollideEntities=this.getStateAccessor(this.names.collideEntities),this.onPairwiseEntityCollision=function(e,t){}}function tt(e,t){return!(e[0]>t[3])&&(!(e[1]>t[4])&&(!(e[2]>t[5])&&(!(e[3]<t[0])&&(!(e[4]<t[1])&&!(e[5]<t[2])))))}et.prototype=Object.create(Ke.prototype),et.prototype.constructor=et,et.prototype.addComponentAgain=function(e,t,n){this.hasComponent(e,t)&&this.removeComponent(e,t,!0),this.addComponent(e,t,n)},et.prototype.isTerrainBlocked=function(e,t,n){for(var r=this.noa.worldOriginOffset,i=Math.floor(e-r[0]),o=Math.floor(t-r[1]),s=Math.floor(n-r[2]),a=[i+.001,o+.001,s+.001,i+.999,o+.999,s+.999],u=this.getStatesList(this.names.collideTerrain),c=0;c<u.length;c++){var l=u[c].__id;if(tt(a,this.getPositionData(l)._extents))return!0}return!1},et.prototype.getEntitiesInAABB=function(e,t){var n=this.noa.worldOriginOffset,r=[e.base[0]+n[0],e.base[1]+n[1],e.base[2]+n[2],e.max[0]+n[0],e.max[1]+n[1],e.max[2]+n[2]],i=t?this.getStatesList(t).map(e=>this.getPositionData(e.__id)):this.getStatesList(this.names.position),o=[];return i.forEach(e=>{tt(r,e._extents)&&o.push(e.__id)}),o},et.prototype.add=function(e,t,n,r,i,o,s){var a=this,u=this.createEntity();if(this.addComponent(u,this.names.position,{position:e||[0,0,0],width:t,height:n}),o){this.addComponent(u,this.names.physics);var c=this.getPhysicsBody(u),l=this.names.smoothCamera;c.onStep=function(){a.addComponentAgain(u,l)}}return r&&(i||(i=Ze.create()),this.addComponent(u,this.names.mesh,{mesh:r,offset:i})),s&&this.addComponent(u,this.names.shadow,{size:t}),u}
/*!
 * noa: an experimental voxel game engine.
 * @url      github.com/andyhall/noa
 * @author   Andy Hall <andy@fenomas.com>
 * @license  MIT
 */;var nt=n(73),rt=n(119),it=n(275),ot=n(125).EventEmitter,st=(t.default=at,{debug:!1,silent:!1,playerHeight:1.8,playerWidth:.6,playerStart:[0,10,0],playerAutoStep:!1,tickRate:33,blockTestDistance:10,stickyPointerLock:!0,dragCameraOutsidePointerLock:!0,skipDefaultHighlighting:!1,originRebaseDistance:25});function at(e){if(!(this instanceof at))return new at(e);this.version=n(316).version,e=Object.assign({},st,e),this._tickRate=e.tickRate,this._lastRenderTime=0,this._paused=!1,this._dragOutsideLock=e.dragCameraOutsidePointerLock;var t=this;if(!e.silent){var r=e.debug?" (debug)":"";console.log(`noa-engine v${this.version}${r}`)}this.worldOriginOffset=[0,0,0],this._originRebaseDistance=e.originRebaseDistance,this.vec3=nt,this.positionInCurrentTick=0,this.worldName="default",this.container=function(e,t){return new o(e,t)}(this,e),this.inputs=Ee(0,e,this.container.element),this.registry=function(e,t){return new We(e,t)}(this,e),this.world=function(e,t){return new le(e,t)}(this,e),this.rendering=function(e,t,n){return new O(e,t,n)}(this,e,this.container.canvas),this.physics=Te(this,e),this.entities=function(e,t){return new et(e,t)}(this,e),this.ents=this.entities;var i=this.ents;this.playerEntity=i.add(e.playerStart,e.playerWidth,e.playerHeight,null,null,!0,!0),i.addComponent(this.playerEntity,i.names.collideTerrain),i.addComponent(this.playerEntity,i.names.collideEntities);var s=i.getPhysicsBody(this.playerEntity);s.gravityMultiplier=2,s.autoStep=e.playerAutoStep,i.addComponent(this.playerEntity,i.names.receivesInputs),i.addComponent(this.playerEntity,i.names.fadeOnZoom);var a,u,c;i.addComponent(this.playerEntity,i.names.movement,{airJumps:1}),this.camera=function(e,t){return new Ie(e,t)}(this,e),this.blockTestDistance=e.blockTestDistance,this.blockTargetIdCheck=this.registry.getBlockSolidity,this.targetedBlock=null,e.skipDefaultHighlighting||(this.defaultBlockHighlightFunction=function(e){e?t.rendering.highlightBlockFace(!0,e.position,e.normal):t.rendering.highlightBlockFace(!1)},this.on("targetBlockChanged",this.defaultBlockHighlightFunction)),e.debug&&(window.noa=this,window.scene=this.rendering._scene,window.ndarray=rt,window.vec3=nt,i.getMovement(1).airJumps=999,this.setViewDistance=function(e){var t=this.world.chunkSize;this.world.chunkAddDistance=e/t,this.world.chunkRemoveDistance=e/t+1,this.world._lastPlayerChunkID=""}),u="0.27",(c=(e,t,n)=>{var r=()=>{throw`This property changed in ${u} - ${n}`};Object.defineProperty(e,t,{get:r,set:r})})(a=this,"getPlayerEyePosition","to get the camera/player offset see API docs for `noa.camera.cameraTarget`"),c(a,"setPlayerEyePosition","to set the camera/player offset see API docs for `noa.camera.cameraTarget`"),c(a,"getPlayerPosition","use `noa.ents.getPosition(noa.playerEntity)` or similar"),c(a,"getCameraVector","use `noa.camera.getDirection`"),c(a,"getPlayerMesh","use `noa.ents.getMeshData(noa.playerEntity).mesh` or similar"),c(a,"playerBody","use `noa.ents.getPhysicsBody(noa.playerEntity)`"),c(a.rendering,"zoomDistance","use `noa.camera.zoomDistance`"),c(a.rendering,"_currentZoom","use `noa.camera.currentZoom`"),c(a.rendering,"_cameraZoomSpeed","use `noa.camera.zoomSpeed`"),c(a.rendering,"getCameraVector","use `noa.camera.getDirection`"),c(a.rendering,"getCameraPosition","use `noa.camera.getLocalPosition`"),c(a.rendering,"getCameraRotation","use `noa.camera.heading` and `noa.camera.pitch`"),c(a.rendering,"setCameraRotation","to customize camera behavior see API docs for `noa.camera`"),u="0.28",c(a.rendering,"makeMeshInstance","removed, use Babylon's `mesh.createInstance`"),c(a.world,"_maxChunksPendingCreation",'use `maxChunksPendingCreation` (no "_")'),c(a.world,"_maxChunksPendingMeshing",'use `maxChunksPendingMeshing` (no "_")'),c(a.world,"_maxProcessingPerTick",'use `maxProcessingPerTick` (no "_")'),c(a.world,"_maxProcessingPerRender",'use `maxProcessingPerRender` (no "_")'),u="0.29",c(a,"_constants","removed, voxel IDs are no longer packed with bit flags")}at.prototype=Object.create(ot.prototype),at.prototype.tick=function(){if(this._paused)this.world.worldGenWhilePaused&&this.world.tick(e);else{ht("start"),function(e){var t=e.ents.getPositionData(e.playerEntity)._localPosition,n=e._originRebaseDistance;if(nt.sqrLen(t)<n*n)return;for(var r=[],i=0;i<3;i++){var o=Math.floor(t[i]);r[i]=o,e.worldOriginOffset[i]+=o}e.rendering._rebaseOrigin(r),e.entities._rebaseOrigin(r)}(this);var e=this._tickRate;this.world.tick(e),ht("world"),this.rendering.tick(e),this.physics.tick(e),ht("physics"),this.rendering.tick(e),ht("rendering"),function(e){var t="",n=e.blockTargetIdCheck||e.registry.getBlockSolidity,r=e._localPick(null,null,null,n);if(r){var i=lt;nt.floor(i.adjacent,r.position),nt.copy(i.normal,r.normal),nt.sub(i.position,i.adjacent,i.normal),i.blockID=e.world.getBlockID(i.position[0],i.position[1],i.position[2]),e.targetedBlock=i,t=i.position.join("|")+i.normal.join("|")+"|"+i.blockID}else e.targetedBlock=null;t!=ft&&(e.emit("targetBlockChanged",e.targetedBlock),ft=t)}(this),ht("targets"),this.entities.tick(e),ht("entities"),this.emit("tick",e),ht("tick event"),ht("end");var t=this.inputs.state;t.scrollx=t.scrolly=t.scrollz=0}},at.prototype.render=function(e){this.positionInCurrentTick=e;var t=performance.now(),n=t-(this._lastRenderTime||t-16);this._lastRenderTime=t,this._paused?this.world.worldGenWhilePaused&&this.world.render():(dt("start"),(this.container.hasPointerLock||!this.container.supportsPointerLock||this._dragOutsideLock&&this.inputs.state.fire)&&this.camera.applyInputsToCamera(),dt("init"),this.world.render(n),dt("meshing"),this.camera.updateBeforeEntityRenderSystems(),this.entities.render(n),this.camera.updateAfterEntityRenderSystems(),dt("entities"),this.emit("beforeRender",n),dt("before render"),this.rendering.render(n),dt("render"),this.emit("afterRender",n),dt("after render"),dt("end"),this.inputs.state.dx=this.inputs.state.dy=0)},at.prototype.globalToLocal=function(e,t,n){var r=this.worldOriginOffset;if(t){for(var i=0;i<3;i++){var o=e[i]-r[i];o+=t[i],n[i]=o}return n}return nt.sub(n,e,r)},at.prototype.localToGlobal=function(e,t,n){var r=this.worldOriginOffset;if(n){for(var i=0;i<3;i++){var o=Math.floor(e[i]);t[i]=o+r[i],n[i]=e[i]-o}return t}return nt.add(t,e,r)},at.prototype.setPaused=function(e){this._paused=!!e,e||(this.inputs.state.dx=this.inputs.state.dy=0)},at.prototype.getBlock=function(e,t,n){return e.length?this.world.getBlockID(e[0],e[1],e[2]):this.world.getBlockID(e,t,n)},at.prototype.setBlock=function(e,t,n,r){return t.length?this.world.setBlockID(e,t[0],t[1],t[2]):this.world.setBlockID(e,t,n,r)},at.prototype.addBlock=function(e,t,n,r){if(t.length){if(this.entities.isTerrainBlocked(t[0],t[1],t[2]))return;return this.world.setBlockID(e,t[0],t[1],t[2]),e}if(!this.entities.isTerrainBlocked(t,n,r))return this.world.setBlockID(e,t,n,r),e},at.prototype.pick=function(e,t,n,r){return 0===n?null:(e&&(this.globalToLocal(e,null,ut),e=ut),this._localPick(e,t,n,r))};var ut=nt.create();at.prototype._localPick=function(e,t,n,r){if(0===n)return null;var i=r||this.registry.getBlockSolidity,o=this.world,s=this.worldOriginOffset;e||(e=this.camera._localGetTargetPosition()),t=t||this.camera.getDirection(),n=n||this.blockTestDistance;var a=ct._localPosition,u=ct.normal;return it((function(e,t,n){var r=o.getBlockID(e+s[0],t+s[1],n+s[2]);return i(r)}),e,t,n,a,u)?(nt.scaleAndAdd(a,a,u,.01),this.localToGlobal(a,ct.position),ct):null};var ct={_localPosition:nt.create(),position:[0,0,0],normal:[0,0,0]};var lt={blockID:0,position:[],normal:[],adjacent:[]},ft="";var ht=()=>{},dt=()=>{}},function(e,t,n){"use strict";n.r(t),n.d(t,"buildMain",(function(){return a}));var r=100;function i(e,t,n,i){var o=document.createElement("div");o.id=e,o.classList.add("window_main"),o.style=`\n\t\tposition: absolute;\n\t\tz-index: ${r};\n\t\tbackground-color: #eeeeeedd;\n\t\ttop: calc(50vh - ${n[1]}/2);\n\t\tleft: calc(50vw - ${n[0]}/2);\n\t\t`,o.style.width=n[0],o.style.height=n[1],o.onclick=function(){r++,o.style.zIndex=r};var s=document.createElement("div");s.id=e+"_bar",s.style="\n\t\tpadding: 10px;\n\t\tcursor: move;\n\t\tz-index: 1;\n\t\tbackground-color: #2b2b2bee;\n\t\tcolor: #fff;\n\t\ttext-align: center;\n\t",s.style.width="100%",s.style.height="40px",s.innerHTML=t,s.classList.add("window_bar");var a=document.createElement("div");a.id=e+"_close",a.style="\n\t\tcursor: pointer;\n\t\tz-index: 2;\n\t\tbackground-color: #dd444466;\n\t\tfloat: right;\n\t\tcolor: #fff;\n\t\tborder-radius: 50%;\n\t",a.style.width="20px",a.style.height="20px",a.onclick=function(){o.style.display="none",o.style.top=`calc(50vh - ${n[1]}/2);`,o.style.left=`calc(50vw - ${n[0]}/2);`},a.classList.add("window_close"),o.appendChild(s),s.appendChild(a),o.appendChild(i);var u=0,c=0,l=0,f=0;function h(e){(e=e||window.event).preventDefault(),u=l-e.clientX,c=f-e.clientY,l=e.clientX,f=e.clientY,o.style.top=o.offsetTop-c+"px",o.style.left=o.offsetLeft-u+"px"}function d(){document.onmouseup=null,document.onmousemove=null}return s.onmousedown=function(e){(e=e||window.event).preventDefault(),r++,o.style.zIndex=r,l=e.clientX,f=e.clientY,document.onmouseup=d,document.onmousemove=h},{main:o,bar:s,close:a}}window.createWindow=i;var o=n(204),s=n(76);function a(e){var t=document.createElement("div");t.id="menu_screen";var n=document.createElement("div");n.id="menu_container",t.appendChild(n);var r=document.createElement("img");r.id="menu_logo",r.src="./textures/gui/logo.png",n.appendChild(r);var a=function(e){var t=document.createElement("div");t.style.padding="10px";var n=document.createElement("div");n.classList.add("input-group");var r=document.createElement("input");r.id="menu_server_input",r.classList.add("form-control"),r.setAttribute("required",""),r.setAttribute("placeholder","Server adress with port"),n.appendChild(r);var a=document.createElement("div");a.classList.add("input-group-append");var u=document.createElement("button");u.id="menu_connect",u.classList.add("btn"),u.classList.add("btn-secondary"),u.onclick=function(){var t=localStorage.getItem("nickname"),n=r.value;console.log(t,n),e(new o.Socket("ws://"+n))},u.innerHTML="Join",a.appendChild(u),n.appendChild(a),t.appendChild(n);var c=document.createElement("div");c.style="overflow:auto; max-height: 100vh; height: 400px;";var l=document.createElement("table");l.id="menu_serverlist",l.setAttribute("class","table table-sm");var f=document.createElement("thead");f.style.backgroundColor="#88888844",f.innerHTML='\n\t\t<tr>\n\t\t\t<th scope="col">Address</th>\n\t\t\t<th scope="col">Name</th>\n\t\t\t<th scope="col">Motd</th>\n\t\t\t<th scope="col">Players</th>\n\t\t\t<th scope="col">Software</th>\n\t\t\t<th scope="col"></th>\n\t\t</tr>\n\t\t',l.appendChild(f),c.appendChild(l),t.appendChild(c);var h=document.createElement("tbody");h.classList.add("table-hover"),h.style.overflowY="scroll",l.appendChild(h);var d=i("menu_multiplayer","Multiplayer servers",["900px","550px"],t);return setTimeout((function(){fetch("http://pb4.eu:9001").then(e=>e.json()).then((function(e){var t=0;Object.values(e).forEach((function(e){var n=h.insertRow(t);t+=1;var i=n.insertCell(0),o=n.insertCell(1),a=n.insertCell(2),u=n.insertCell(3),c=n.insertCell(4),l=n.insertCell(5);if(i.innerHTML=e.ip,o.innerHTML=e.name,a.innerHTML=e.motd,u.innerHTML=`<b>${e.numberplayers}</b>\\<b>${e.maxplayers}</b>`,c.innerHTML=e.software,e.protocol==s.gameProtocol||0==s.gameProtocol){var f=document.createElement("button");f.innerHTML="Select",f.classList.add("btn"),f.classList.add("btn-outline-secondary"),f.classList.add("btn-sm"),l.appendChild(f),f.onclick=function(){r.value=e.ip}}else e.protocol<s.gameProtocol||null==e.protocol?l.innerHTML="Outdated server":e.protocol>s.gameProtocol&&(l.innerHTML="Outdated client")}))}))})),d.main}(e);a.style.display="none",t.appendChild(a);var u=function(e){var t=document.createElement("div");t.style.padding="10px";var n=document.createElement("div");n.classList.add("form-group");var r=document.createElement("label");r.id="menu_nickname_info",r.htmlFor="menu_nickname",r.innerHTML="Username",r.style.marginBottom="5px",n.appendChild(r);var o=document.createElement("input");o.id="menu_nickname",o.classList.add("form-control"),o.classList.add("form-control-sm"),o.classList.add("col-md-6"),o.setAttribute("placeholder",localStorage.getItem("nickname")),o.value=localStorage.getItem("nickname"),n.appendChild(o),t.appendChild(n);var s=document.createElement("div");s.classList.add("form-check");var a=document.createElement("label");a.id="menu_options_singleplayer_info",a.classList.add("form-check-label"),a.htmlFor="menu_options_singleplayer",a.innerHTML="Enable experimental singleplayer mode";var u=document.createElement("input");u.id="menu_options_singleplayer",u.classList.add("form-check-input"),u.checked="true"==localStorage.getItem("singleplayer"),u.type="checkbox",s.appendChild(u),s.appendChild(a);var c=document.createElement("div");c.classList.add("form-check");var l=document.createElement("label");l.id="menu_step_info",l.classList.add("form-check-label"),l.htmlFor="menu_step",l.innerHTML="Autostep";var f=document.createElement("input");f.id="menu_step",f.classList.add("form-check-input"),f.checked="true"==localStorage.getItem("autostep"),f.type="checkbox",c.appendChild(f),c.appendChild(l),t.appendChild(c);var h=document.createElement("div");h.classList.add("form-check");var d=document.createElement("label");d.id="menu_mouse_info",d.classList.add("form-check-label"),d.htmlFor="menu_mouse",d.innerHTML='Mouse sensitivity: <span id="menu_mouse_number">'+localStorage.getItem("mouse")+"</span> (Def: 15)";var p=document.createElement("input");p.id="menu_mouse",p.classList.add("form-range"),p.value=localStorage.getItem("mouse"),p.max=50,p.min=1,p.step=1,p.type="range",p.oninput=()=>{document.getElementById("menu_mouse_number").innerHTML=p.value},h.appendChild(p),h.appendChild(d),t.appendChild(h);var m=document.createElement("div");m.classList.add("form-check");var v=document.createElement("label");v.id="menu_options_gamepad_label",v.classList.add("form-check-label"),v.htmlFor="menu_options_gamepad",v.innerHTML="Enable gamepad support";var y=document.createElement("input");y.id="menu_options_gamepad",y.classList.add("form-check-input"),y.checked="true"==localStorage.getItem("gamepad"),y.type="checkbox",m.appendChild(y),m.appendChild(v),t.appendChild(m);var g=document.createElement("div");g.classList.add("form-check");var b=document.createElement("label");b.id="menu_options_allowCustom_label",b.classList.add("form-check-label"),b.htmlFor="menu_options_allowCustom",b.innerHTML="Allow usage of custom assets from Internet";var w=document.createElement("input");w.id="menu_options_allowCustom",w.classList.add("form-check-input"),w.checked="true"==localStorage.getItem("allowcustom"),w.type="checkbox",g.appendChild(w),g.appendChild(b),t.appendChild(g);var k=i("menu_settins","Settings",["800px","500px"],t),_=k.main.onclick;return k.main.onclick=function(){_(),localStorage.setItem("nickname",o.value),localStorage.setItem("singleplayer",u.checked),localStorage.setItem("autostep",f.checked),localStorage.setItem("mouse",p.value),localStorage.setItem("gamepad",y.checked),localStorage.setItem("allowcustom",w.checked),game.allowCustom="true"==localStorage.getItem("allowcustom"),null!=e&&(e.ents.getPhysicsBody(e.playerEntity).autoStep=f.checked,e.camera.sensitivityX=parseInt(p.value),e.camera.sensitivityY=parseInt(p.value))},k.main}();u.style.display="none",t.appendChild(u);var c=document.createElement("ul");c.id="menu_options",c.classList.add("menu_list");var l=document.createElement("li");l.innerHTML="Multiplayer",l.onclick=function(){a.style.display="initial"},c.appendChild(l);var f=document.createElement("li");f.innerHTML="Settings",f.onclick=function(){u.style.display="initial"},c.appendChild(f);var h=document.createElement("li");h.innerHTML="Github",h.onclick=function(){window.open("https://github.com/VoxelSrv/voxelsrv","_blank")},c.appendChild(h);var d=document.createElement("li");d.innerHTML="Official discord",d.onclick=function(){window.open("https://discord.com/invite/K9PdsDh","_blank")},c.appendChild(d),n.appendChild(c);var p=document.createElement("div");p.id="menu_version",p.innerHTML="VoxelSrv "+s.gameVersion,t.appendChild(p),document.getElementById("gui-container").appendChild(t)}}]);